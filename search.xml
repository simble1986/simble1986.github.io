<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[openstackæŽ¥å£çŠ¶æ€å¼‚å¸¸]]></title>
    <url>%2Fpost%2F257b0787.html</url>
    <content type="text"><![CDATA[é”™è¯¯ä¿¡æ¯ neutroné”™è¯¯æ—¥å¿—Exit code: 2; Stdin: ; Stdout: ; Stderr: sudo: unable to resolve host pxea4badb2 é—®é¢˜çŽ°è±¡ openstackçš„routerä¸­åˆ›å»ºäº†ä¸€ä¸ªè”é€šä¸¤ä¸ªvlançš„è·¯ç”±å™¨ï¼Œå‘çŽ°ä¸¤ä¸ªæŽ¥å£è½®æµå¤„äºŽbuildçŠ¶æ€ æŸ¥çœ‹æ—¥å¿— /var/log/neutron/neutron-linuxbridge-agent.log 1234567891011121314151617181920212223242526115265 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py", line 196, in force_reraise115266 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent six.reraise(self.type_, self.value, self.tb)115267 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 419, in add_tap_interface115268 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent tap_device_name, device_owner)115269 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 451, in _add_tap_interface115270 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent segmentation_id)115271 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 403, in ensure_physical_in_bridge115272 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent physical_interface)115273 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 221, in ensure_flat_bridge115274 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent gateway):115275 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 362, in ensure_bridge115276 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent self.update_interface_ip_details(bridge_name, interface, ips, gateway)115277 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 301, in update_interface_ip_details115278 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent dst_device.addr.add(cidr=ip['cidr'])115279 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 597, in add115280 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent self._as_root([net.version], tuple(args))115281 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 384, in _as_root115282 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent use_root_namespace=use_root_namespace)115283 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 96, in _as_root115284 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent log_fail_as_error=self.log_fail_as_error)115285 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 105, in _execute115286 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent log_fail_as_error=log_fail_as_error)115287 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/utils.py", line 146, in execute115288 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent raise ProcessExecutionError(msg, returncode=returncode)115289 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent ProcessExecutionError: Exit code: 2; Stdin: ; Stdout: ; Stderr: sudo: unable to resolve host pxea4badb2 17413115290 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent RTNETLINK answers: File exists é—®é¢˜åŽŸå›  sudo: unable to resolve host pxea4badb2 æ— æ³•è§£æžä¸»æœºå æŸ¥çœ‹/etc/hostsä¸­ç¼ºå°‘äº†æœ¬åœ°hostnameçš„IPåœ°å€æ˜ å°„ Exit code: 2; Stdin: ; Stdout: ; Stderr: é—®é¢˜æ¯”è¾ƒä¸ç›´è§‚ï¼Œgoogleä¹‹åŽï¼Œæœ‰äººè¯´æ˜¯å› ä¸ºbridgeä¸Šé…ç½®äº†IPï¼Œå¯¼è‡´å†²çªäº† ç»æŸ¥çœ‹controllerä¸Šï¼Œå‘çŽ°ä¸€ä¸ªbridgeå’Œä¸€ä¸ªæ— åŠ›ç½‘å¡é…ç½®äº†åŒæ ·çš„IPï¼Œå¯èƒ½æ˜¯å› ä¸ºä¹‹å‰ä½¿ç”¨flatç½‘ç»œåŽåˆ‡æ¢ä¸ºvlanç½‘ç»œï¼Œæ²¡æœ‰æ¸…ç†openstackä¸­åˆ›å»ºçš„é…ç½®å¯¼è‡´ã€‚ å°†bridgeä¸Šçš„IPåœ°å€åˆ é™¤åŽï¼Œæ¢å¤æ­£å¸¸]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuåœ¨Openstackä¸­å¯åŠ¨å¯†ç æ³¨å…¥ä¸ç”Ÿæ•ˆé—®é¢˜å®šä½1]]></title>
    <url>%2Fpost%2Fc2a7a06a.html</url>
    <content type="text"><![CDATA[é—®é¢˜è¯´æ˜Ž ä½¿ç”¨Ubuntuçš„cloudé•œåƒåˆ›å»ºå®žä¾‹ï¼Œåœ¨åˆ›å»ºæ—¶ä½¿ç”¨è„šæœ¬ä¿®æ”¹å¯†ç  12345#!/bin/bashpasswd ubuntu&lt;&lt;EOFubuntuubuntuEOF ç³»ç»Ÿå¯åŠ¨åŽï¼Œå‘çŽ°å¯†ç ä¿®æ”¹æœªæˆåŠŸ å®šä½æ€è·¯ æŸ¥çœ‹å®žä¾‹å¯åŠ¨æ—¥å¿— âž¡ï¸ æŸ¥çœ‹openstackçš„neutron agentçŠ¶æ€ âž¡ï¸ æŸ¥çœ‹meta-dataæœåŠ¡æ—¥å¿— step by step æŸ¥çœ‹å®žä¾‹å¯åŠ¨æ—¥å¿— 123[ 731.435163] cloud-init[845]: 2018-09-11 01:42:24,574 - url_helper.py[WARNING]: Calling 'http://169.254.169.254/2009-04-04/meta-data/instance-id' failed [119/120s]: request error [HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /2009-04-04/meta-data/instance-id (Caused by NewConnectionError('&lt;requests.packages.urllib3.connection.HTTPConnection object at 0x7fa26f1eb6d8&gt;: Failed to establish a new connection: [Errno 101] Network is unreachable',))][ 738.460169] cloud-init[845]: 2018-09-11 01:42:31,597 - DataSourceEc2.py[CRITICAL]: Giving up on md from ['http://169.254.169.254/2009-04-04/meta-data/instance-id'] after 126 seconds[ 738.470572] cloud-init[845]: 2018-09-11 01:42:31,608 - util.py[WARNING]: Getting data from &lt;class 'cloudinit.sources.DataSourceCloudStack.DataSourceCloudStack'&gt; failed ä»¥ä¸Šæ—¥å¿—è¯´æ˜Žcloud-initåœ¨å‘meta-data serverèŽ·å–meta-dataæ—¶å¤±è´¥ æŸ¥çœ‹neutron agentçŠ¶æ€ 123456789101112root@pxea4badb217413:~# neutron agent-list+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+| id | agent_type | host | availability_zone | alive | admin_state_up | binary |+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+| 459740a7-b60c-4db7-9ee0-3b45d6c3b2de | Linux bridge agent | pxe1418773526e5 | | :-) | True | neutron-linuxbridge-agent || 4ec74c6a-c392-4216-bddd-789ec5aa3d86 | DHCP agent | pxea4badb217413 | nova | :-) | True | neutron-dhcp-agent || 6d992669-fbe6-412c-a717-5c2b61a2b901 | Metadata agent | pxea4badb217413 | | :-) | True | neutron-metadata-agent || 77dc04a5-0e43-4907-be3a-6f165e77807c | Linux bridge agent | pxe74867aee16bc | | :-) | True | neutron-linuxbridge-agent || c54c7593-5973-41ed-86c8-7e22ac1e95ec | Linux bridge agent | pxea4badb217413 | | :-) | True | neutron-linuxbridge-agent || e882e27d-45de-4cb3-9284-7e9101e2b39b | L3 agent | pxea4badb217413 | nova | :-) | True | neutron-l3-agent |+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+root@pxea4badb217413:~# æ£€æŸ¥neutron-metadataæ—¥å¿— 123456789101112131415161718192021222018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent [-] Failed reporting state!2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent Traceback (most recent call last):2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/neutron/agent/metadata/agent.py", line 266, in _report_state2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent use_call=self.agent_state.get('start_flag'))2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/neutron/agent/rpc.py", line 87, in report_state2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent return method(context, 'report_state', **kwargs)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py", line 158, in call2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent retry=self.retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/transport.py", line 90, in _send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent timeout=timeout, retry=retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 470, in send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent retry=retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 459, in _send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent result = self._waiter.wait(msg_id, timeout)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 342, in wait2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent message = self.waiters.get(msg_id, timeout=timeout)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 244, in get2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent 'to message ID %s' % msg_id)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent MessagingTimeout: Timed out waiting for a reply to message ID 5b145001c0a34d37a68337821e64908f2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent2018-09-05 19:07:06.405 10617 WARNING oslo.service.loopingcall [-] Function 'neutron.agent.metadata.agent.UnixDomainMetadataProxy._report_state' run outlasted interval by 30.00 sec 12342018-09-06 16:23:48.658 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 1 seconds.2018-09-06 16:23:49.752 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 2 seconds.2018-09-06 16:23:51.766 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 4 seconds.2018-09-06 16:23:55.779 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 6 seconds. ä»¥ä¸Šæ˜¾ç¤ºä¸ºAMQP serverè¿žæŽ¥ä¸åˆ° æ£€æŸ¥meta-dataçš„é…ç½® 123456789 /etc/neutron/metadata_agent.ini # IP address used by Nova metadata server. (string value)#nova_metadata_ip = 127.0.0.1nova_metadata_ip = controller# TCP Port used by Nova metadata server. (port value)# Minimum value: 0# Maximum value: 65535#nova_metadata_port = 8775 æŸ¥çœ‹controllerä¸Šç«¯å£ç›‘å¬çŠ¶å†µ 1234567891011121314151617181920212223242526272829303132root@pxea4badb217413:~# netstat -lnpActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program nametcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 1149/sshdtcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 2316/exim4tcp 0 0 127.0.0.1:6010 0.0.0.0:* LISTEN 18284/12tcp 0 0 127.0.0.1:6011 0.0.0.0:* LISTEN 18861/20tcp 0 0 0.0.0.0:9696 0.0.0.0:* LISTEN 1243/pythontcp 0 0 0.0.0.0:6080 0.0.0.0:* LISTEN 1247/pythontcp 0 0 0.0.0.0:8774 0.0.0.0:* LISTEN 1237/pythontcp 0 0 0.0.0.0:8775 0.0.0.0:* LISTEN 1237/pythontcp 0 0 0.0.0.0:9191 0.0.0.0:* LISTEN 1242/pythontcp 0 0 0.0.0.0:25672 0.0.0.0:* LISTEN 2922/beam.smptcp 0 0 0.0.0.0:8776 0.0.0.0:* LISTEN 1235/pythontcp 0 0 10.160.17.196:3306 0.0.0.0:* LISTEN 1769/mysqldtcp 0 0 10.160.17.196:11211 0.0.0.0:* LISTEN 2443/memcachedtcp 0 0 0.0.0.0:9292 0.0.0.0:* LISTEN 1246/pythontcp6 0 0 :::21 :::* LISTEN 833/vsftpdtcp6 0 0 :::22 :::* LISTEN 1149/sshdtcp6 0 0 ::1:25 :::* LISTEN 2316/exim4tcp6 0 0 ::1:6010 :::* LISTEN 18284/12tcp6 0 0 ::1:6011 :::* LISTEN 18861/20tcp6 0 0 :::35357 :::* LISTEN 3904/apache2tcp6 0 0 :::5000 :::* LISTEN 3904/apache2tcp6 0 0 :::80 :::* LISTEN 3904/apache2tcp6 0 0 :::8081 :::* LISTEN 4749/cmatcp6 0 0 :::4369 :::* LISTEN 2586/epmdudp 0 0 0.0.0.0:123 0.0.0.0:* 3218/chronydudp 0 0 0.0.0.0:161 0.0.0.0:* 3189/snmpdudp 0 0 0.0.0.0:323 0.0.0.0:* 3218/chronydudp6 0 0 :::123 :::* 3218/chronydudp6 0 0 :::323 :::* 3218/chronyd ä»¥ä¸Šï¼Œå‘çŽ°5762ç«¯å£æœªç›‘å¬ å°è¯•å¯åŠ¨rabbitmq-server 123service rabbitmq-server start * Starting RabbitMQ Messaging Server rabbitmq-server * RabbitMQ Messaging Server already running [ OK ] å†æ¬¡æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€ 1tcp6 0 0 :::5672 :::* LISTEN 2922/beam.smp é‡å¯meta-dataçš„serviceï¼Œå‘çŽ°æ—¥å¿—å·²ç»ä¸å†æŠ¥é”™äº† ç„¶è€Œï¼Œè¿™ç«Ÿç„¶ä¸æ˜¯æœ€ç»ˆåŽŸå› ï¼Œæœ€ç»ˆçš„é—®é¢˜å‘çŽ°æ˜¯ç½‘ç»œé—®é¢˜]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqlalchemyè¿žæŽ¥dockerçš„mysqlé—®é¢˜è®°å½•]]></title>
    <url>%2Fpost%2F6e2fcf3d.html</url>
    <content type="text"><![CDATA[åˆå¼€å§‹é¼“æ£flask+mysqläº† ðŸ‘¶ ä¸æˆæƒ³ï¼Œåˆä¸€æ¬¡è¸©äº†å¥½å¤šé›· ðŸ˜‚ æœ‰ä¸€ç§æ‰“æ€ªå‡çº§çš„æ„Ÿè§‰ çŽ¯å¢ƒè¯´æ˜Ž Mac+flask docker+mysql é—®é¢˜1 create_engineæŠ¥é”™ é”™è¯¯ä¿¡æ¯ 1234567891011&gt;&gt;&gt; from sqlalchemy import create_engine&gt;&gt;&gt; engine = create_engine('mysql+mysqldb://root:123456@localhost/beta_monitor')Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 424, in create_engine return strategy.create(*args, **kwargs) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 81, in create dbapi = dialect_cls.dbapi(**dbapi_args) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/dialects/mysql/mysqldb.py", line 102, in dbapi return __import__('MySQLdb')ImportError: No module named MySQLdb é—®é¢˜åŽŸå›  æ²¡æœ‰å®‰è£…pythonçš„mysqlåŒ…ï¼Œéœ€è¦å®‰è£…mysql-pythonå’Œ/æˆ–mysqlclientï¼Œç„¶åŽå°±é‡åˆ°äº†ç¬¬äºŒä¸ªé—®é¢˜ é—®é¢˜2 pip install mysql-pythonå¤±è´¥ é”™è¯¯ä¿¡æ¯ 123456789101112131415161718â‡’ pip install mysql-pythonCollecting mysql-python Downloading https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip (108kB) 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 112kB 153kB/s Complete output from command python setup.py egg_info: sh: mysql_config: command not found Traceback (most recent call last): File "&lt;string&gt;", line 1, in &lt;module&gt; File "/private/var/folders/3z/tqw46wwj7xb1d2ftp578x5vm0000gn/T/pip-install-ViJMnc/mysql-python/setup.py", line 17, in &lt;module&gt; metadata, options = get_config() File "setup_posix.py", line 43, in get_config libs = mysql_config("libs_r") File "setup_posix.py", line 25, in mysql_config raise EnvironmentError("%s not found" % (mysql_config.path,)) EnvironmentError: mysql_config not found ----------------------------------------Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/3z/tqw46wwj7xb1d2ftp578x5vm0000gn/T/pip-install-ViJMnc/mysql-python/ é—®é¢˜åŽŸå›  mysql_configä¸å­˜åœ¨ï¼ŒåŽŸæ¥æ˜¯ç³»ç»Ÿå¿…é¡»å®‰è£…mysqlå®¢æˆ·ç«¯ è§£å†³æ–¹æ³• brew install mysql 123456â‡’ brew install mysqlUpdating Homebrew...==&gt; Downloading https://homebrew.bintray.com/bottles/mysql-5.7.22.high_sierra.bottle.tar.gz######################################################################## 100.0%==&gt; Pouring mysql-5.7.22.high_sierra.bottle.tar.gz... é—®é¢˜3 è¿žæŽ¥mysqlæœåŠ¡å™¨å¤±è´¥ é”™è¯¯ä¿¡æ¯ Authentication plugin 'caching_sha2_password' cannot be loaded 1234567891011121314&gt;&gt;&gt; engine = create_engine('mysql+mysqldb://root:123456@127.0.0.1/beta_monitor')&gt;&gt;&gt; connection = engine.connect()Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 2102, in connect return self._connection_cls(self, **kwargs)... File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect return Connection(*args, **kwargs) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/MySQLdb/connections.py", line 193, in __init__ super(Connection, self).__init__(*args, **kwargs2)sqlalchemy.exc.OperationalError: (_mysql_exceptions.OperationalError) (2059, "Authentication plugin 'caching_sha2_password' cannot be loaded: dlopen(/usr/local/Cellar/mysql/5.7.22/lib/plugin/caching_sha2_password.so, 2): image not found") (Background on this error at: http://sqlalche.me/e/e3q8) é—®é¢˜åŽŸå›  ä¸Šç½‘æŸ¥äº†ä¸€é€šï¼Œä¼¼ä¹Žè¯´ä»ŽæŸä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œmysqlç”¨äº†ä¸€ç§è®¤è¯æ–¹å¼å¯¼è‡´é—®é¢˜ã€‚æ ¹æ®è§£å†³æ–¹æ³•çœ‹ï¼Œæ›´æ¢äº†è®¤è¯æ–¹å¼å°±å¯ä»¥äº† è§£å†³æ–¹æ³• ç”¨dockerå¯åŠ¨mysqlæ—¶å¢žåŠ å‚æ•° --default-authentication-plugin=mysql_native_password 12~|â‡’ docker run -p 3306:3306 -d -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=beta_monitor -e MYSQL_USER=test -e MYSQL_PASSWORD=123456 mysql --default-authentication-plugin=mysql_native_passwordd8f5e623dc595df19b9d6cce52780381b625c1565622f5867f2ad3aeafdca499 å¦‚æžœå®‰è£…åœ¨æœåŠ¡å™¨ä¸Šï¼Œåˆ™åœ¨my.cnfä¸­ä¿®æ”¹ç›¸å…³é…ç½® æµ‹è¯• æœ¬åœ°è¿žæŽ¥æµ‹è¯• 123456789101112131415161718~|â‡’ mysql -utest -p123456 -h 127.0.0.1mysql: [Warning] Using a password on the command line interface can be insecure.ERROR 2013 (HY000): Lost connection to MySQL server at &apos;reading initial communication packet&apos;, system error: 0~|â‡’ mysql -utest -p -h 127.0.0.1Enter password:Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 8Server version: 8.0.12 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; quit é€šè¿‡connection = engine.connect()æ— å¼‚å¸¸ ä½œä¸ºä¸€ä¸ªæš—å¤œç²¾çµçŽ©å®¶ï¼Œå¼ºçƒˆè°´è´£å¸Œå°”ç“¦çº³æ–¯çƒ§äº†æˆ‘è€å®¶çš„å‘åŠ£è¡Œå¾„ï¼Œæš´é›ªæ€Žä¹ˆæ´—ä¹Ÿæ²¡ç”¨]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>sqlalchemy</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¾Žç­¾è®°å½•]]></title>
    <url>%2Fpost%2Ffbe9394a.html</url>
    <content type="text"><![CDATA[è®°ç¬¬ä¸€æ¬¡æ‹¿åˆ°åå¹´ç¾Žç­¾ æ—¶é—´ æäº¤DS160: 2018-07-08 é¢„çº¦é¢ç­¾æ—¶é—´: 2018-07-27 å‰é¢æŽ’é˜Ÿäººå¤ªå¤š Issued: 2018-07-30 æŠ¤ç…§å·²ä»Žé¢†äº‹é¦†é‚£è¾¹æ”¶å›žï¼Œç›®å‰æ­£åœ¨å®‰æŽ’è¿é€: 2018-07-30 æ”¶åˆ°æŠ¤ç…§: 2018-08-02 æŒç»­æ—¶é—´ é¢ç­¾æŒç»­æ—¶é—´ï¼š1åˆ†é’Ÿä¸åˆ° APæŒç»­æ—¶é—´ï¼š2ä¸ªå·¥ä½œæ—¥ Issuedåˆ°é€åˆ°è‹å·žï¼š3ä¸ªå·¥ä½œæ—¥ é¢ç­¾é—®é¢˜ ä½ åŽ»ç¾Žå›½å¹²ä»€ä¹ˆï¼Ÿ è¦åŽ»ç¾Žå›½å¤šä¹…ï¼Ÿ ä½ æ˜¯åšä»€ä¹ˆå·¥ä½œçš„ï¼Ÿ ä½ ä»¬å…¬å¸æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ ä½ æ˜¯ä¸€ä¸ªäººåŽ»ä¹ˆï¼Ÿ â€œä½ é€šè¿‡äº†ï¼â€]]></content>
      <categories>
        <category>æ—…è¡Œ</category>
      </categories>
      <tags>
        <tag>visa</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openstackå­¦ä¹ ç¬”è®°1]]></title>
    <url>%2Fpost%2F9b5fb1d1.html</url>
    <content type="text"><![CDATA[è¯¥ç³»åˆ—ç”¨æ¥è®°å½•æœ¬äººä½¿ç”¨Openstackçš„ä¸€äº›ç¬”è®°å’Œå¿ƒå¾— Openstackä¸€äº›ç†è§£ æœåŠ¡è¯´æ˜Ž keystone - å¿…é€‰ è®¤è¯æœåŠ¡ï¼Œæ˜¯å…¶ä»–æ‰€æœ‰æœåŠ¡çš„åŸºç¡€ glance - å¿…é€‰ é•œåƒæœåŠ¡ï¼Œç”¨æ¥å­˜å‚¨é•œåƒæ–‡ä»¶ï¼Œå¦‚iso, vmdk, qcow2ç­‰ nova - å¿…é€‰ è®¡ç®—æœåŠ¡ï¼ŒåŒ…æ‹¬è®¡ç®—ï¼Œè°ƒåº¦ï¼Œç®¡ç†ï¼Œapiç­‰ï¼Œæ˜¯openstackçš„æ ¸å¿ƒæœåŠ¡ neutron - å¿…é€‰ ç½‘ç»œæœåŠ¡ horizon - å¯é€‰ï¼ˆæŽ¨èé€‰æ‹©ï¼‰ ç®¡ç†ç•Œé¢ï¼Œå›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿ä½¿ç”¨ cinder - å¯é€‰ å—å­˜å‚¨æœåŠ¡ï¼Œç”¨æ¥åˆ›å»ºè™šæ‹Ÿæœºçš„ç£ç›˜ ä¸€äº›ç†è§£ openstackå¯ä»¥ç†è§£ä¸ºæ’ä»¶åž‹çš„ï¼Œçµæ´»å°±ä½“çŽ°äºŽæ­¤ã€‚ è®¡ç®—æœåŠ¡ï¼ŒæŽ§åˆ¶èŠ‚ç‚¹å¯ä»¥åªåšè®¡ç®—çš„è°ƒåº¦ï¼Œç®¡ç†ï¼Œä¹Ÿå¯ä»¥åœ¨æŽ§åˆ¶èŠ‚ç‚¹ä¸Šå¯åŠ¨è®¡ç®—æœåŠ¡ åŒæ ·ï¼Œå¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šèµ·å—å­˜å‚¨æœåŠ¡ å…³äºŽç½‘ç»œ åˆšå¼€å§‹çš„æ—¶å€™å¾ˆç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆæ¯ä¸ªè®¡ç®—èŠ‚ç‚¹ä¸Šéƒ½è¦é…ç½®ä¸€ä¸ªé¢å¤–çš„ç½‘å¡ï¼Œå¹¶å°†å…¶è¿žåœ¨ä¸€èµ· éœ€è¦è¯´æ˜Žçš„æ˜¯ï¼š è™šæ‹Ÿæœºçš„ç¬¬ä¸€ä¸ªç½‘å£æ˜¯openstackçš„å„ä¸ªèŠ‚ç‚¹ç”¨æ¥é€šä¿¡çš„ç½‘å¡ ç¬¬äºŒä¸ªç½‘å£æ˜¯ç”¨æ¥å®žçŽ°åœ¨openstackä¸Šå¯åŠ¨çš„å®žä¾‹å½¼æ­¤é€šä¿¡çš„ï¼ˆå³ä¸œè¥¿å‘æµé‡ï¼‰ ä¹Ÿå¯ä»¥ä¸ç”¨ç¬¬äºŒä¸ªç½‘å£ï¼Œè¿™æ—¶ï¼Œä¸¤ä¸ªå®žä¾‹å¯ä»¥é€šè¿‡åŸºäºŽç¬¬ä¸€ä¸ªç½‘å£ä¹‹é—´å»ºç«‹çš„éš§é“è¿›è¡Œé€šä¿¡ å¦‚æžœè¦è®©å®žä¾‹å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œåˆ™éœ€è¦ä¸ºå…¶åˆ†é…ä¸“é—¨çš„è®¿é—®å¤–ç½‘çš„ç½‘å£ openstackå¹¶ä¸ç›´æŽ¥ç®¡ç†ç½‘å£æˆ–ç½‘æ¡¥ï¼Œè¦ä¹ˆé€šè¿‡linux bridgeï¼Œæˆ–è€…æ˜¯openvSwitch åœ¨openstackçš„UIä¸Šçœ‹åˆ°çš„ç½‘å£ï¼Œéƒ½æ˜¯ä»£å· æµ‹è¯•çŽ¯å¢ƒå‡†å¤‡ ä¸¤å°è™šæ‹Ÿæœºï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥all in oneï¼‰ ç¡¬ä»¶å‡†å¤‡ æ¯å°è™šæ‹Ÿæœºåº”åŒ…å« è™šæœºå¯ä¸Šç½‘ å¦å¤–åŒ…å«ä¸€å¼ é¢å¤–çš„ç½‘å¡ å†…å­˜å°½é‡å¤šï¼ˆ8Gï¼‰ CPUå°½é‡å¤šï¼ˆ8 cpusï¼‰ controllerç¡¬ç›˜ç¨å¾®å¤§ä¸€äº› åŸºæœ¬å‡†å¤‡ Ubuntu16.04 + Qç‰ˆæœ¬ï¼ˆQueensï¼‰ é…ç½®NTP å®‰è£…OpenstackåŸºç¡€åŒ… å‡†å¤‡ä»“åº“ 12# apt install software-properties-common# add-apt-repository cloud-archive:queens å®‰è£…openstackåŒ… 123$ apt update$ apt upgrade #ç»å®žé™…æµ‹è¯•ï¼Œå¦‚æžœç”¨apt dist-upgradeå¯èƒ½ä¼šå‡ºçŽ°é—®é¢˜ï¼Œå®‰è£…çš„ä¸æ˜¯æœ€æ–°çš„åŒ…$ apt install python-openstackclient controller controllerä¸Šéœ€è¦å®‰è£…çš„ä¸œè¥¿æœ€å¤š ä¾èµ– æ•°æ®åº“: MariaDB æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ æœåŠ¡åŠèº«ä»½è®¤è¯: Memcached etcd openstackæœåŠ¡ è®¤è¯æœåŠ¡: keystone é•œåƒæœåŠ¡: glance è®¡ç®—æœåŠ¡ï¼ˆæŒ‡è®¡ç®—çš„è°ƒåº¦ï¼Œç®¡ç†ï¼Œapiç­‰æœåŠ¡ï¼‰: nova ç½‘ç»œæœåŠ¡ï¼ˆç½‘ç»œç®¡ç†ï¼Œè°ƒåº¦ç­‰æœåŠ¡ï¼‰: neutron ç®¡ç†ç•Œé¢: horizon å—å­˜å‚¨æœåŠ¡ï¼ˆå¯é€‰ï¼‰: cinder compute è®¡ç®—èŠ‚ç‚¹ç›¸å¯¹æ¥è¯´ç®€å•äº†å¾ˆå¤š openstackæœåŠ¡ è®¡ç®—æœåŠ¡ï¼ˆä¸“æŒ‡è®¡ç®—æœåŠ¡ï¼‰: nova-compute ç½‘ç»œæœåŠ¡: neutron å¯åœ¨controllerä¸ŠåŒæ ·èµ·è®¡ç®—æœåŠ¡ è¯¦ç»†å®‰è£…è¿‡ç¨‹å¯å‚çœ‹å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨markdownå†™PPT]]></title>
    <url>%2Fpost%2F4f712e63.html</url>
    <content type="text"><![CDATA[è‡ªæ‰“æŽ¥è§¦Markdownä»¥æ¥ï¼Œæ·±æ·±çš„çˆ±ä¸Šäº†è¿™ç§æ ¼å¼çš„ä¹¦å†™ï¼Œå…ˆæ˜¯å¼„ç½‘ç«™ï¼Œç„¶åŽåˆå¼„ç”µå­ä¹¦ã€‚æœ€è¿‘è¦ç»™æ–°å‘˜å·¥åŸ¹è®­ï¼Œè¦å‡†å¤‡4ä¸ªPPTï¼ŒäºŽæ˜¯å°±æƒ³æœ‰æ²¡æœ‰ç›´æŽ¥ç”¨mdæ¥å†™PPTçš„å‘¢ï¼Ÿä¸Šç½‘ä¸€æœï¼Œè¿˜çœŸæœ‰ã€‚ æœ‰Reveal.js, LandSlide, GitPitchç­‰ï¼Œä½†ä¹Ÿè®¸æ˜¯æˆ‘ç ”ç©¶çš„ä¸æ·±å§ï¼Œgitpitchæ˜¯åœ¨çº¿çš„ï¼ŒLandSlideè¦ç”¨pipæ¥å®‰è£…ã€‚Reveal.jså€’æ˜¯ä¹‹å‰è§teamé‡Œçš„å¤§ç¥žæœ‰å†™è¿‡ï¼Œä½†çŽ°åœ¨å¥½åƒå˜æˆäº†slidesäº†ï¼Œä¹Ÿæ˜¯åœ¨çº¿çš„ã€‚æœ€ç»ˆï¼Œä¸»è§’å‡ºåœºï¼Œæˆ‘é€‰æ‹©äº†Marpã€‚ ä¼˜ç‚¹ ä¹¦å†™ç®€å• æä¾›ä¸¤å¥—æ¨¡ç‰ˆ å¯å®žæ—¶é¢„è§ˆ åªéœ€è¦ä¸€ä¸ªmdæ–‡ä»¶å³å¯ï¼Œä¸éœ€è¦å…¶ä»–è¯¸å¦‚yamlä¹‹ç±»çš„ä¸œè¥¿ æ”¯æŒMacï¼ŒWinå’ŒLinux ç¼ºç‚¹ æ²¡æœ‰åŠ¨ç”» åªèƒ½å¯¼å‡ºä¸ºpdfæ ¼å¼ï¼Œä¸èƒ½ç”ŸæˆPPTæ ¼å¼ ä»…æ”¯æŒåŸºç¡€çš„markdownè¯­æ³• è™½ç„¶æœ‰ç€ä¸Šé¢çš„ç¼ºç‚¹ï¼Œç„¶è€Œï¼Œå¯¹äºŽå†™æŠ€æœ¯ç±»PPTï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨äº† ç”¨æ³• Marpæä¾›ä¸¤å¥—ä¸»é¢˜ï¼Œéƒ½è¯´ä¸“æ²»é€‰æ‹©éšœç¢ã€‚ç‰¹åˆ«æ˜¯é»˜è®¤ä¸»é¢˜ï¼Œç®€ç›´æ˜¯é€‰æ‹©éšœç¢æ‚£è€…çš„ç¦éŸ³ã€‚ ä¸‹è½½å®Œå®‰è£…åŽï¼Œä¸¤ä¸ªä¾‹å­ä¸­å·²ç»æœ‰æ¯”è¾ƒåŸºæœ¬çš„è¯´æ˜Žäº†ã€‚ä½†æœ‰ä¸€äº›ä¸œè¥¿è¿˜æ˜¯å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚ è®¾ç½®é¡µç  é¡µç æ˜¯å¯ä»¥éšæ—¶å¼€å¯ï¼Œéšæ—¶å…³é—­çš„ã€‚ 1&lt;!-- page_number: true --&gt; åœ¨ä»»æ„é¡µè¾“å…¥ä»¥ä¸Šä»£ç å°±å¯ä»¥å¼€å¯ï¼Œä½†å¦‚æžœä½ è¦åœ¨å“ªé¡µå…³é—­æ˜¾ç¤ºé¡µç ï¼Œå¯ä»¥ç”¨false èƒŒæ™¯è®¾ç½® å› ä¸ºåªæœ‰ä¸¤å¥—æ¨¡ç‰ˆï¼Œæ‰€ä»¥ï¼Œæƒ³è¦å¥½çœ‹ç‚¹ï¼Œè¿˜æ˜¯éœ€è¦ä¸€äº›èƒŒæ™¯å›¾ç‰‡çš„ã€‚åˆšå¼€å§‹æˆ‘åªçŸ¥é“ç”¨![bg](aaa.png)çš„æ–¹å¼å¼•å…¥èƒŒæ™¯ï¼Œä½†åŽæ¥å‘çŽ°èƒŒæ™¯å›¾ç‰‡å…¶å®žæ˜¯å’ŒèƒŒæ™¯ä¸»é¢˜å åŠ äº†çš„ã€‚ åŽæ¥ç»†ç»†çœ‹äº†æ–‡æ¡£æ‰å‘çŽ°ï¼ŒåŽŸæ¥å¯ä»¥ç”¨å¼€å…³å¼€å¯ï¼Œè¿˜å¯ä»¥è®¾ç½®èƒŒæ™¯çš„å¤§å° 1![bg original 70%](aaa.png) ä½¿ç”¨äº†originalä¹‹åŽï¼ŒèƒŒæ™¯å°±å˜æˆäº†çº¯å›¾ç‰‡ï¼Œè€Œ70%åˆ™å¯ä»¥æŒ‡å®šå›¾ç‰‡å¤§å°ã€‚ å½“ç„¶ï¼Œæ›´æœ‰è¶£çš„æ˜¯ï¼Œå¯ä»¥ç”¨å¤šä¸ªèƒŒæ™¯å¹¶æŽ’çš„æ–¹å¼æ¥å®Œæˆéƒ¨åˆ†æ¤å…¥ã€‚ æ¯”å¦‚ï¼š åˆ™æ˜¯ç”¨å¦‚ä¸‹ä»£ç å®Œæˆ 123456![bg 450% original](robot2.png)![bg]()![bg]()![bg]()![bg]()![bg 450% original](robot2.png) è¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„æ˜¯ï¼Œå¦‚æžœä¸è®¾ç½®å›¾ç‰‡çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§æ‰©å……æ»¡æ•´ä¸ªå±å¹•æ¥è®¾ç½®ï¼Œä½†å¦‚æžœè®¾ç½®æ¯”ä¾‹ï¼Œå¦‚ä¸Šé¢çš„ä»£ç ï¼Œåˆ™100%æ˜¯æ•´ä¸ªé¡µé¢å®½åº¦/6ä¹‹åŽçš„å›¾ç‰‡å¤§å°ã€‚ å½“ç„¶ï¼Œçµæ´»è¿ç”¨è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œä¹Ÿèƒ½å¸¦æ¥å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„æ•ˆæžœã€‚ emoji å€¼å¾—ä¸€æçš„æ˜¯Marpçš„emojiè¡¨æƒ…é€‰æ‹©çš„å¾ˆæ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§ï¼Œè€Œä¸”å¯ä»¥æŒ‰ç…§æ®µè½æ¥è°ƒæ•´å¤§å° æ¯”å¦‚ï¼š 1234# :cat:## :fish:### :tiger:#### :bird: è¡¨æƒ…çš„å¤§å°ä¼šéšç€æ®µè½æ¯”è¾ƒè€Œå˜åŒ–ã€‚è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚ å¦å¤–ï¼Œä¼¼ä¹Žè½¯ä»¶çš„ä½œè€…æ­£åœ¨å¼€å‘æ–°çš„è½¯ä»¶ï¼Œå¾ˆæ˜¯æœŸå¾… ðŸ±]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04å®‰è£…Open vSwitch]]></title>
    <url>%2Fpost%2Fb2c6ed30.html</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒå‡†å¤‡ èŽ·å–å®‰è£…åŒ… 1git clone https://github.com/openvswitch/ovs.git å®‰è£…å¿…è¦çš„ä¾èµ– 1apt install autoconf libtool make libssl-dev libcap-ng-dev å®‰è£… å½“ä½¿ç”¨æºä»£ç æ—¶ï¼Œéœ€è¦è‡ªå·±åˆ›å»ºconfigureè„šæœ¬ 1$ ./boot.sh é…ç½®å¹¶å¼€å¯å†…æ ¸æ¨¡å— 1$ ./configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc --with-linux=/lib/modules/$(uname -r)/build å®‰è£… 12$ make$ make install å®‰è£…å†…æ ¸æ¨¡å— è¯¥æ­¥éª¤å¯èƒ½ä¼šæŠ¥é”™ï¼Œè¯·å‚çœ‹åŽæ–‡ 1$ make modules_install å®˜æ–¹å®‰è£…æ–‡æ¡£ä¸­æåˆ°ï¼Œä½ æœ‰å¯èƒ½ä¹‹å‰å·²ç»å®‰è£…äº†ovsçš„æ¨¡å—ï¼Œä¸ºäº†ç¡®ä¿ä½¿ç”¨çš„æ˜¯ä½ åˆšæ‰ç¼–è¯‘çš„ï¼Œåˆ™éœ€è¦åœ¨/etc/depmod.d/ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ 1234567$ config_file=&quot;/etc/depmod.d/openvswitch.conf&quot;$ for module in datapath/linux/*.ko; do modname=&quot;$(basename $&#123;module&#125;)&quot; echo &quot;override $&#123;modname%.ko&#125; * extra&quot; &gt;&gt; &quot;$config_file&quot; echo &quot;override $&#123;modname%.ko&#125; * weak-updates&quot; &gt;&gt; &quot;$config_file&quot; done$ depmod -a åŠ è½½å†…æ ¸æ¨¡å— 1$ /sbin/modprobe openvswitch éªŒè¯ 123456789$ /sbin/lsmod | grep openvswitchopenvswitch 303104 0tunnel6 16384 1 openvswitchnf_nat_ipv6 16384 1 openvswitchnf_defrag_ipv6 36864 2 openvswitch,nf_conntrack_ipv6nf_nat_ipv4 16384 2 openvswitch,iptable_natnf_nat 28672 6 nf_nat_redirect,openvswitch,nf_nat_ipv4,nf_nat_ipv6,xt_nat,nf_nat_masquerade_ipv4nf_conntrack 106496 11 xt_CT,openvswitch,nf_nat,nf_nat_ipv4,nf_nat_ipv6,xt_conntrack,nf_nat_masquerade_ipv4,nf_conntrack_netlink,xt_connmark,nf_conntrack_ipv4,nf_conntrack_ipv6libcrc32c 16384 2 raid456,openvswitch å¯åŠ¨æœåŠ¡ å®˜æ–¹è¯´æ˜Žä¸­æåˆ°æœ‰ä¸€ä¸ªovs-ctlçš„å‘½ä»¤ï¼Œç„¶è€Œï¼Œæˆ‘å®‰è£…å®Œä¹‹åŽå¹¶æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ã€‚å¯èƒ½å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒè€äº†å§ã€‚ åˆ›å»ºå¿…è¦çš„ç›®å½• 123$ mkdir -p /etc/openvswitch$ mkdir -p /var/log/openvswitch$ mkdir -p /var/run/openvswitch é…ç½®ovsdb-server ä»Žæºæ–‡ä»¶ç›®å½•åˆ›å»ºconf.db 12ovs$ ovsdb-tool create /etc/openvswitch/conf.db \ vswitchd/vswitch.ovsschema é…ç½® 123456ovsdb-server --remote=punix:/var/run/openvswitch/db.sock \ --remote=db:Open_vSwitch,Open_vSwitch,manager_options \ --private-key=db:Open_vSwitch,SSL,private_key \ --certificate=db:Open_vSwitch,SSL,certificate \ --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert \ --pidfile --detach --log-file åˆå§‹åŒ–æ•°æ®åº“ 1ovs-vsctl --no-wait init å¯åŠ¨ovsè¿›ç¨‹ 1ovs-vswitchd --pidfile --detach --log-file éªŒè¯ åˆ›å»ºbridge 1$ ovs-vsctl add-br br0 ä¸ºbr0æ·»åŠ æŽ¥å£ 1$ ovs-vsctl add-port br0 eth1 æŸ¥çœ‹é…ç½® 1$ ovs-vsctl show é—®é¢˜åŠè§£å†³ å®‰è£…å†…æ ¸æ¨¡å—æ—¶å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼Œå¿½ç•¥å³å¯ï¼ˆæˆ‘è¿˜ä»¥ä¸ºå¾ˆä¸¥é‡ï¼Œæœäº†ä¸€é˜µï¼Œå‘çŽ°ä¸ç”¨ç®¡ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839$ make modules_installcd datapath/linux &amp;&amp; make modules_installmake[1]: Entering directory &apos;/root/ovs/datapath/linux&apos;make -C /lib/modules/4.4.0-127-generic/build M=/root/ovs/datapath/linux modules_installmake[2]: Entering directory &apos;/usr/src/linux-headers-4.4.0-127-generic&apos; INSTALL /root/ovs/datapath/linux/openvswitch.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-geneve.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-gre.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-lisp.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-stt.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-vxlan.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory DEPMOD 4.4.0-127-genericmake[2]: Leaving directory &apos;/usr/src/linux-headers-4.4.0-127-generic&apos;depmod `sed -n &apos;s/#define UTS_RELEASE &quot;\([^&quot;]*\)&quot;/\1/p&apos; /lib/modules/4.4.0-127-generic/build/include/generated/utsrelease.h`make[1]: Leaving directory &apos;/root/ovs/datapath/linux&apos;]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>ovs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitbook+gitlabå‘å¸ƒç§æœ‰çš„å›¾ä¹¦ä»“åº“]]></title>
    <url>%2Fpost%2F51748f3c.html</url>
    <content type="text"><![CDATA[è¿‘æœŸå¸¦ç€ä¸€äº›åŒäº‹å­¦ä¹ pythonï¼Œå¼€å§‹ç”¨markdownçš„æ ¼å¼å†™äº†å¾ˆå¤šç»ƒä¹ é¢˜ï¼Œä¸€ç›´æœ‰æƒ³æ³•å°†å…¶å‘å¸ƒæˆä¸€æœ¬ç”µå­ä¹¦åœ¨å…¬å¸å†…éƒ¨åˆ†äº«ã€‚ä½†ç”±äºŽæœ‰äº›å†…å®¹å¯èƒ½æ¶‰åŠå…¬å¸ç›¸å…³ï¼Œæ— æ³•ç›´æŽ¥å¯¹å¤–å‘å¸ƒã€‚è€Œå…¬å¸å†…éƒ¨è‡ªå»ºäº†ä¸€ä¸ªgitlabæœåŠ¡å™¨ï¼Œä¸€ç›´ç”¨äºŽæ‰˜ç®¡ä¸€äº›ä¸æ˜¯å¾ˆé‡è¦çš„ä»£ç ã€‚æ‰€ä»¥ï¼Œä¾¿æœ‰äº†å°†markdownæ‰˜ç®¡åˆ°gitlabä¸Šï¼Œç„¶åŽä½¿ç”¨gitbookåœ¨å†…éƒ¨è¿›è¡Œå‘å¸ƒã€‚ å¦ä¸€æ–¹é¢ï¼Œç”±äºŽæœ€è¿‘ç—´è¿·äºŽDockerï¼Œæ‰€ä»¥ï¼Œä¹ŸåŒæ ·å°†gitbookæ‰“åŒ…æˆdocker imageï¼Œç”¨äºŽå¿«é€Ÿå‘å¸ƒã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦ç”¨äºŽè®°å½•æ•´ä¸ªæ“ä½œè¿‡ç¨‹ã€‚ gitbook+docker æœ¬åœ°å®‰è£… å¯å‚çœ‹gitbookçš„å®˜æ–¹æ–‡æ¡£ çŽ¯å¢ƒéœ€æ±‚ gitbookéœ€è¦nodejsçŽ¯å¢ƒ NodeJS (v4.0.0 and above is recommended) å®‰è£…gitbook-cli 1npm install gitbook-cli -g åˆ›å»ºä¸€æœ¬ä¹¦ å½“ä½¿ç”¨gitlabæ—¶ï¼Œå¯è·³è¿‡æ­¤æ­¥éª¤ åˆ›å»ºå­˜æ”¾ä¹¦ç±çš„ç›®å½• 1$ mkdir mybook åˆå§‹åŒ– 1$ gitbook init åˆå§‹åŒ–å®ŒæˆåŽï¼Œå°†ç”ŸæˆSUMMARY.mdå’ŒREADME.md æ’ä»¶å®‰è£… å¦‚æžœæ²¡æœ‰ç”Ÿæˆbook.jsonï¼Œå¯è‡ªè¡Œåˆ›å»º 12345678910111213&#123;&quot;root&quot;: &quot;./&quot;,&quot;title&quot;: &quot;mybook&quot;,&quot;head_title&quot;: &quot;My first book&quot;,&quot;description&quot;: &quot;test with gitbook&quot;,&quot;author&quot;: &quot;myname&quot;,&quot;output.name&quot;: &quot;practice&quot;,&quot;gitbook&quot;: &quot;&gt;= 3.0.0&quot;,&quot;language&quot;: &quot;zh-hans&quot;,&quot;plugins&quot;: [ ] å°†æ’ä»¶åœ¨pluginså­—æ®µä¸­è¿›è¡Œå£°æ˜ŽåŽï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… 1$ gitbook install é¢„è§ˆå’Œå‘å¸ƒè‡ªå·±çš„ä¹¦ 1$ gitbook serve éšåŽå¯ç™»é™†http://localhost:4000æ¥é¢„è§ˆè‡ªå·±çš„ä¹¦ dockeré•œåƒ å…¶å®žåœ¨docker hubä¸Šæœç´¢ä¾¿å¯ä»¥å¾—åˆ°gitbookçš„é•œåƒï¼Œä½†æœ¬ç€å­¦ä¹ çš„æ€åº¦ï¼Œè¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹ç»ƒä¹ åˆ¶ä½œè‡ªå·±çš„dockeré•œåƒã€‚ ç”±äºŽnodejsæœ‰å®˜æ–¹æä¾›çš„dockeré•œåƒï¼Œæ‰€ä»¥ï¼Œä¸€åˆ‡å˜å¾—å¾ˆç®€å• Dockerfile 12345678910FROM node:8-alpineMAINTAINER Bo Qi &lt;simble1986@gmail.com&gt;RUN npm install gitbook-cli -g &amp;&amp; npm install &amp;&amp; gitbook installWORKDIR /bookEXPOSE 4000 35729CMD gitbook install &amp;&amp; gitbook serve ç¼–è¯‘dockeré•œåƒ 1$ docker build --tag mygitbook . ä¹¦çš„ç»“æž„ å½“ä½¿ç”¨gitbook initåŽä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šREADME.mdå’ŒSUMMARY.md. å…¶ä¸­ï¼ŒREADME.mdç”¨æ¥å¯¹æœ¬ä¹¦è¿›è¡Œä¸€äº›è¯´æ˜Ž è€ŒSUMMARY.mdåˆ™ç”¨æ¥åˆ›å»ºç›®å½•ç»“æž„ã€‚ SUMMARY.md 1234567891011121314151617# Summary* [ä»‹ç»](README.md)* [Gitä½¿ç”¨](gitSetup.md)* [PythonåŸºç¡€](part1/README.md) * [ç»ƒä¹ 1-åˆ—è¡¨](part1/1.md) * [ç»ƒä¹ 2-å­—å…¸](part1/2.md) * [ç»ƒä¹ 3-æ•°æ®ç»“æž„åµŒå¥—](part1/3.md) * [ç»ƒä¹ 4-è¿ç®—ç¬¦](part1/4.md) * [ç»ƒä¹ 5-é€»è¾‘æŽ§åˆ¶](part1/5.md) * [ç»ƒä¹ 6-å¼‚å¸¸å¤„ç†](part1/6.md) * [ç»ƒä¹ 7-å‡½æ•°](part1/7.md) * [ç»ƒä¹ 8-æ–‡ä»¶æ“ä½œ](part1/8.md) * [è½»æ¾ä¸€åˆ»-çŒœæ•°å­—æ¸¸æˆ](part1/happy1.md) * [ç»ƒä¹ 9-ç±».1](part1/9.md) * [ç»ƒä¹ 10-ç±».2](part1/10.md) * [ç»ƒä¹ 11-ç±»çš„ç»§æ‰¿](part1/11.md) book.json éœ€è¦è‡ªå·±åˆ›å»ºbook.json 12345678910111213141516171819202122232425262728293031323334353637&#123; "root": "./", "title": "ç»ƒä¹ python", "head_title": "é€šè¿‡ç»ƒä¹ çš„æ–¹å¼æ¥å­¦ä¹ python", "description": "é€šè¿‡å°ç»ƒä¹ ä¸€ç‚¹ä¸€ç‚¹ç†Ÿæ‚‰python", "author": "myname(simble1986@gmail.com)", "output.name": "é€šè¿‡ç»ƒä¹ å­¦è„šæœ¬", "gitbook": "3.2.3", "language": "zh-hans", "links" : &#123; "sidebar" : &#123; "Home" : "http://www.simble.site" &#125; &#125;, "plugins": [ "autotheme", "prism", "prism-themes", "-highlight", "-search", "search-pro", "emphasize", "splitter", "tbfed-pagefooter", "toggle-chapters", "codeblock-filename", "ace", "simple-page-toc", "edit-link", "copy-code-button", "alerts", "anchor-navigation-ex", "theme-comscore" ]&#125; git-labå½’æ¡£ åœ¨gitlabä¸Šåˆ›å»ºè‡ªå·±çš„projectå¹¶å½’æ¡£ åœ¨æœåŠ¡å™¨ä¸Šç”¨dockerå¯åŠ¨é¢„è§ˆ ä»Žgitlabä¸Šcloneä¹¦çš„ç»“æž„ å¯åŠ¨dockerå¹¶æŒ‚è½½gitbookçš„ç›®å½•åˆ°dockerä¸­ 1$ docker run -d -p 80:4000 -v /mybook:/book mygitbook æ’ä»¶åŠè¯´æ˜Ž éžå¸¸æ„Ÿè°¢Zhangjikaiçš„æ’ä»¶è¯´æ˜Žæ–‡æ¡£ï¼Œç„¶åŽæˆ‘å‘çŽ°Zhangjikaiå’Œæˆ‘ä¸€æ ·ä½¿ç”¨äº†Hexoæ­å»ºäº†è‡ªå·±çš„blogï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº†Nextçš„ä¸»é¢˜]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[python virtenvçŽ¯å¢ƒæ­å»º]]></title>
    <url>%2Fpost%2F4926e490.html</url>
    <content type="text"><![CDATA[è¿‘æœŸç”±äºŽç»„å†…æµ‹è¯•æ¡†æž¶æ›´æ–°é¢‘ç¹ï¼Œä¸”ç”±äºŽæ¡†æž¶é‡‡ç”¨äº†æ’ä»¶å½¢å¼ï¼Œå®‰è£…åŒ…å¾ˆå¤šã€‚å½“ä½¿ç”¨åŒä¸€å°æœåŠ¡å™¨æ¥å®‰è£…æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿäº§çŽ¯å¢ƒç ´åã€‚ä¸ºæ­¤ï¼Œå¿…é¡»é‡‡ç”¨virtenvæ–¹å¼ã€‚ virtualenvçš„çŽ¯å¢ƒå»ºç«‹å¹¶ä¸å¤æ‚ï¼Œä½†æ¯æ¬¡éƒ½éœ€è¦åŽ»æŸ¥ä¸€ç•ªã€‚ç‰¹æ­¤è®°å½• å®‰è£… å®‰è£…virtualenv python2.7 1pip install virtualenv python3 1pip3 install virtualenv ä½¿ç”¨ åˆ›å»ºå·¥ä½œç›®å½• 12root@vm1:/home/test# mkdir myprojectroot@vm1:/home/test# cd myproject åˆ›å»ºç‹¬ç«‹çš„pythonè¿è¡ŒçŽ¯å¢ƒ 1234root@vm1:/home/test# virtualenv venvNew python executable in /home/test/myproject/venv/bin/pythonInstalling setuptools, pip, wheel...done.root@vm1:/home/test# å¼•ç”¨æ–°çš„çŽ¯å¢ƒå˜é‡ 12root@vm1:/home/test# source venv/bin/activate(venv)root@vm1:/home/test# å¼€å§‹ä½¿ç”¨ 1(venv)root@vm1:/home/test# pip install docker é€€å‡ºå½“å‰venvçŽ¯å¢ƒ 12(venv)root@vm1:/home/test# deactivateroot@vm1:/home/test# ä¸€ä¸ªå°é—®é¢˜ git cloneæ—¶é‡åˆ°server certificate verification failed. CAfile: /etc/ssl/certs/ca-certificates.crt CRLfile: noneçš„è§£å†³æ–¹æ³• 1export GIT_SSL_NO_VERIFY=1]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker APIä¸€ç§è¿žæŽ¥åˆ°PTYçš„äº¤äº’æ–¹æ³•]]></title>
    <url>%2Fpost%2Fb18ab8ad.html</url>
    <content type="text"><![CDATA[æŠ˜è…¾äº†ä¸€å‘¨å¤šï¼Œç»ˆäºŽæžå®šäº†åœ¨dockerçš„python APIä¸‹ï¼Œå½“æ‰§è¡Œexec_runæ—¶ï¼Œå¦‚ä½•è¿žæŽ¥containerçš„PTYã€‚ å½“å¼„æ˜Žç™½ä¹‹åŽï¼Œæ‰å‘çŽ°åŽŸæ¥æ˜¯é‚£ä¹ˆç®€å•ã€‚ä¹‹å‰å‡ ä¹Žæœéäº†googleå’Œç™¾åº¦ï¼Œéƒ½æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„æ–‡ç«  å‰è¨€ è¿™ä¸¤å¹´ï¼Œdockerçš„å‘å±•å¦‚ç«å¦‚è¼ï¼Œä½œä¸ºç½‘ç»œæµ‹è¯•ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨å°è¯•ç€å°†dockerå¼•å…¥æµ‹è¯•ä¸­ï¼Œæ¥æ›´å¤šçš„æ¨¡æ‹ŸçœŸå®žç”¨æˆ·ï¼Œå¹¶å®žçŽ°è‡ªåŠ¨åŒ–ã€‚ Pexpectæ˜¯ä¸€ä¸ªéžå¸¸å¼ºå¤§ä¸”å¥½ç”¨çš„å·¥å…·ï¼Œå½“éœ€è¦ä¸Žè®¾å¤‡å’ŒPCè¿žæŽ¥æ—¶ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šç”¨åˆ°ã€‚è€Œä¹‹å‰éƒ½ç›´æŽ¥ä½¿ç”¨spawnä¸€ä¸ªå‘½ä»¤è¡Œæ¥è¿›è¡Œè¿žæŽ¥ æœ¬ç¯‡åšæ–‡å°†ä»‹ç»ä¸€ç§ä½¿ç”¨pexpectçš„fdspawnï¼Œé€šè¿‡socketæ–¹å¼è¿žæŽ¥åˆ°containerçš„æ–¹æ³•ï¼Œä»¥ä¾¿ä¸Žè¿œç¨‹çš„containerè¿›è¡Œäº¤äº’ è‡ªåŠ¨åŒ–æ€è·¯ clienté€šè¿‡python APIè¿žæŽ¥åˆ°docker åˆ›å»ºä¸€ä¸ªcontainerå¹¶ä¿æŒè¿è¡Œ ä½¿ç”¨exec_run()æ–°å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œè¿è¡Œ/bin/bashï¼Œå¹¶å¼€å¯socketæ–¹å¼ ä½¿ç”¨pexpectçš„fdspawnè¿žæŽ¥exec_run()è¿”å›žçš„socket çŽ¯å¢ƒå‡†å¤‡ Dockerå¼€å¯remote API å‚è§ä¹‹å‰åšæ–‡ Docker Client å®‰è£…å¿…è¦çš„åŒ… 12$ pip install docker$ pip install pexpect å¼€å§‹ä½¿ç”¨ åˆ›å»ºcontainer 123&gt;&gt;&gt; import docker&gt;&gt;&gt; client=docker.DockerClient(base_url='tcp://10.0.0.10:1234')&gt;&gt;&gt; c1 = client.containers.run("ubuntu", detach=True, tty=True) è¿žæŽ¥container 123456&gt;&gt;&gt; res = c1.exec_run("/bin/bash", socket=True, stdin=True, tty=True)&gt;&gt;&gt; resExecResult(exit_code=None, output=&lt;socket object, fd=15, family=1, type=1, protocol=0&gt;)&gt;&gt;&gt; sock = res.output&gt;&gt;&gt; sock&lt;socket object, fd=15, family=1, type=1, protocol=0&gt; ä½¿ç”¨pexpectè¿žæŽ¥ 1234567891011&gt;&gt;&gt; import pexpect.fdpexpect&gt;&gt;&gt; session=pexpect.fdpexpect.fdspawn(sock.fileno(),timeout=10)&gt;&gt;&gt; &gt;&gt;&gt; session.send("ls\n")3&gt;&gt;&gt; session.expect("#")0&gt;&gt;&gt; session.before' ls\r\n\x1b[0m\x1b[01;34mbin\x1b[0m \x1b[01;34mdev\x1b[0m \x1b[01;34mhome\x1b[0m \x1b[01;34mlib64\x1b[0m \x1b[01;34mmnt\x1b[0m \x1b[01;34mproc\x1b[0m \x1b[01;34mrun\x1b[0m \x1b[01;34msrv\x1b[0m \x1b[30;42mtmp\x1b[0m \x1b[01;34mvar\x1b[0m\r\n\x1b[01;34mboot\x1b[0m \x1b[01;34metc\x1b[0m \x1b[01;34mlib\x1b[0m \x1b[01;34mmedia\x1b[0m \x1b[01;34mopt\x1b[0m \x1b[01;34mroot\x1b[0m \x1b[01;34msbin\x1b[0m \x1b[01;34msys\x1b[0m \x1b[01;34musr\x1b[0m\r\n\x1b]0;root@6a097ddbe55d: /\x07root@6a097ddbe55d:/'&gt;&gt;&gt; session.after'#'&gt;&gt;&gt; æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨exec_run()æ‰§è¡Œå¼€å¯å‘½ä»¤æ—¶ï¼Œéœ€è¦æŒ‡å®šstdin=Trueï¼Œå¦åˆ™ï¼Œpexpectçš„send()å°†æ— æ³•å°†å‘½ä»¤å‘é€è‡³container åŒæ ·ï¼Œåœ¨ä½¿ç”¨exec_run()æ—¶ï¼Œéœ€è¦æŒ‡å®štty=Trueï¼Œå¦åˆ™ï¼Œå°†æ²¡æœ‰å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œæ— æ³•è¿›è¡ŒåŒ¹é…]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>pexpect</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerptyä½¿ç”¨]]></title>
    <url>%2Fpost%2F1c49a9aa.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡åšå®¢å°†ä»‹ç»åœ¨ä½¿ç”¨docker APIæ—¶ï¼Œå¦‚ä½•ç›‘ç®¡containerçš„PTYå®žçŽ°äº¤äº’ é—®é¢˜å¼•å…¥ dockerå®˜æ–¹å·²ç»æä¾›äº†APIç”¨æ¥ç®¡ç†clientï¼Œcontainerï¼Œimageï¼Œnetworkç­‰ï¼ŒåŸºæœ¬çš„æ“ä½œè¦†ç›–äº†docker CLIç›¸å…³åŠŸèƒ½ï¼Œä½†dockerçš„APIçŽ°åœ¨åªèƒ½ä½¿ç”¨exec_runæ¥æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œä¸­é—´æ— æ³•è¿›è¡Œäº¤äº’ï¼Œå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äºŽ-itçš„æ–¹å¼æ¥å®Œæˆäº¤äº’æ“ä½œã€‚ ç»è¿‡å‡ å¤©çš„å­¦ä¹ å’Œæµ‹è¯•ï¼Œå‘çŽ°å…¶å®ždockerçš„containers.run()å’Œcontainers.exec_run()éƒ½æ˜¯å¯ä»¥è®¾ç½®stdin=True, tty=Trueã€‚ä½†å¼€å¯è¿™äº›ä¹‹åŽï¼Œå°†è¿”å›žä¸€ä¸ªsocketï¼Œéœ€è¦è‡ªå·±æ¥è¿›è¡Œå¤„ç†ã€‚ googleå¤§æ³•åŽï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªdockerptyçš„python libï¼Œå¯ä»¥å®Œæˆè¿™ä»¶äº‹æƒ… çŽ¯å¢ƒæ­å»º æ ¹æ®dockerptyçš„githubä¸Šæåˆ°çš„å®‰è£…è¿‡ç¨‹ï¼Œåªéœ€è¦pip install dockerptyå³å¯å®Œæˆå®‰è£…ã€‚ ä½†æºç å·²ç»æœ‰ä¸¤å¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œè¯¥ç‰ˆæœ¬æ— æ³•åœ¨æ–°çš„docker APIä¸Šæ­£å¸¸å·¥ä½œ forkäº†å·¥ç¨‹åŽï¼Œå¯¹å…¶ä¸­çš„ä»£ç æ¶‰åŠåˆ°çš„docker APIè¿›è¡Œæ›´æ–°åŽï¼Œæµ‹è¯•å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæœ€æ–°çš„ä»£ç å·²ç»ä¸Šä¼ åˆ°gitä¸Šsimble1986/dockerpty ä¾èµ– åŽŸæœ‰çš„projectä¸Šæåˆ°ä¾èµ–çš„docker apiä¸ºdocker-py&gt;=0.3.2ï¼Œä½†dockerçš„python APIå·²ç»æ›´æ–° å®‰è£…docker API 1pip install docker å®‰è£…æ­¥éª¤ èŽ·å–æºç  1git clone https://github.com/simble1986/dockerpty.git å®‰è£… 123$ pip uninstall dockerpty$ cd dockerpty$ python setup.py install ç›¸å…³API å‚çœ‹dockerå®˜æ–¹APIæ–‡æ¡£ï¼Œä»¥ä¸‹ä¸»è¦å¯¹containerç›¸å…³å‚æ•°åŠ ä»¥è¯´æ˜Ž tty (bool) â€“ Allocate a pseudo-TTY. stdin_open (bool) â€“ Keep STDIN open even if not attached. åŸºæœ¬ä½¿ç”¨ è¿žæŽ¥client 1234567root@slt-docker:/home/bqi# pythonPython 2.7.12 (default, Dec 4 2017, 14:50:18)[GCC 5.4.0 20160609] on linux2Type "help", "copyright", "credits" or "license" for more information.&gt;&gt;&gt; import docker&gt;&gt;&gt; import dockerpty&gt;&gt;&gt; client=docker.from_env() æ³¨ï¼š æ”¯æŒè¿œç¨‹API åˆ›å»ºcontainer 1&gt;&gt;&gt; test1 = client.containers.create("ubuntu","/bin/bash",tty=True,stdin_open=True) ä½¿ç”¨dockerpty 123456&gt;&gt;&gt; dockerpty.start(client,test1)root@d6ddcf619602:/# lsbin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr varroot@d6ddcf619602:/# exitexit&gt;&gt;&gt;]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>dockerpty</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerä¸­æ— å¯†ç aptå®‰è£…mysql]]></title>
    <url>%2Fpost%2F70cf198a.html</url>
    <content type="text"><![CDATA[é—®é¢˜å‡ºçŽ° Linuxåœ¨ç¬¬ä¸€æ¬¡å®‰è£…æœ‰äº›è½¯ä»¶æ—¶ä¼šæœ‰äº¤äº’çš„è¾“å…¥çš„éœ€æ±‚ï¼Œæ¯”å¦‚mysqlåœ¨é¦–æ¬¡å®‰è£…æ—¶éœ€è¦è®¾ç½®rootçš„å¯†ç ã€‚è¿™åœ¨æ­£å¸¸é…ç½®è¿‡ç¨‹ä¸­æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†åœ¨ä½¿ç”¨DockerFileåˆ›å»ºdockeré•œåƒæ—¶ï¼Œåˆ™é‡åˆ°äº†éº»çƒ¦ã€‚ è§£å†³æ€è·¯ å¦‚æžœå°†å®‰è£…å¥½çš„mysql-serverä½¿ç”¨apt removeä»Žç³»ç»Ÿä¸­å¸è½½åŽï¼Œå†æ¬¡é‡æ–°å®‰è£…ï¼Œåˆ™ä¸å†éœ€è¦è¾“å…¥å¯†ç ã€‚å¦å¤–å½“å®‰è£…å®Œä¸€äº›è½¯ä»¶åŽï¼Œå¯ä»¥ä½¿ç”¨dpkg-configæ¥é‡æ–°é…ç½®ã€‚ è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨å®‰è£…è½¯ä»¶å‰å…ˆå¯¹ç³»ç»Ÿåšå¥½ç›¸å…³é…ç½®ã€‚æŽ¥ä¸‹æ¥ï¼Œå°±æ˜¯éœ€è¦èŽ·å–è½¯ä»¶çš„å¿…è¦é…ç½®é¡¹ èŽ·å–è½¯ä»¶å¿…è¦é…ç½®é¡¹ ä¸‹è½½è½¯ä»¶åŒ… å¯ä»¥é€šè¿‡ç½‘ä¸Šæœç´¢æ–¹å¼ä¸‹è½½ç›¸å…³çš„debåŒ…ï¼Œä½†ä¼—æ‰€å‘¨çŸ¥ï¼ŒLinuxçš„è½¯ä»¶åŒ…ç‰ˆæœ¬å¤šï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¹¶ä¸çŸ¥é“éœ€è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬ã€‚ä½†å¯ä»¥ä½¿ç”¨aptæ¥ä¸‹è½½ç›¸åº”çš„è½¯ä»¶åŒ… 1$ apt-get -d install -y mysql-server ä½¿ç”¨apt-getçš„-då‚æ•°ï¼Œå°†åªä¼šä¸‹è½½ï¼Œä¸è¿›è¡Œå®‰è£…ã€‚ä¸‹è½½å®Œæ¯•åŽï¼Œè½¯ä»¶åŒ…ä½äºŽ/var/cache/apt/archivesç›®å½•ä¸‹ã€‚ èŽ·å–é…ç½®é¡¹ è¿›å…¥è½¯ä»¶åŒ…çš„å­˜æ”¾ç›®å½•ï¼Œç„¶åŽæ‰§è¡Œ 1dpkg-preconfigure mysql-server-5.1_5.1.49-3_amd64.deb ä½¿ç”¨debconfig-showæ¥æŸ¥çœ‹ç›¸åº”çš„é…ç½®é¡¹ 12345$ debconf-show mysql-server mysql-server/root_password: (password omitted) mysql-server/root_password_again: (password omitted) mysql-server/error_setting_password: ... å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸¤é¡¹æ˜¯å¿…é¡»é…ç½®çš„ï¼šmysql-server/root_passwordå’Œmysql-server/root_password_again é¢„é…ç½® åˆ›å»ºé…ç½®æ–‡ä»¶ åœ¨åˆé€‚çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚mysql-passwdï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ 12debconf mysql-server/root_password password 123456debconf mysql-server/root_password_again password 123456 åŠ è½½é…ç½® 1$ debconf-set-selections mysql-passwd æµ‹è¯•ç»“æžœ å†æ¬¡å®‰è£…mysql-serverï¼Œå°†ä¸å†éœ€è¦è¾“å…¥å¯†ç  1$ apt-get install -y mysql-server DockerFileå¤„ç† DockerFileåº”å½“å°½é‡é¿å…ä¸éœ€è¦çš„æ“ä½œï¼Œæ‰€ä»¥ï¼ŒèŽ·å–é…ç½®é¡¹çš„æ“ä½œå¯ä»¥æå‰åœ¨å®žéªŒçŽ¯å¢ƒä¸­å®Œæˆã€‚ å¯å°†èŽ·å–çš„å‘½ä»¤è¡Œä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œä½¿ç”¨æ—¶copyè¿‡åŽ»ã€‚ 12COPY ./mysql-passwd /tmp/mysql-passwdRUN apt-get update &amp;&amp; debconf-set-selections /tmp/mysql-passwd &amp;&amp; apt-get install -yqq mysql-server &amp;&amp; rm -rf /var/lib/apt/lists/* æˆ–è€…æ˜¯åœ¨DockerFileä¸­ç›´æŽ¥ç”Ÿæˆï¼Œè¿™æ—¶åˆ™å¯ä»¥å°†mysql passwdè®¾ç½®ä¸ºå‚æ•° 12RUN echo debconf mysql-server/root_password password 123456 &gt; /tmp/mysql-passwd &amp;&amp; echo debconf mysql-server/root_password_again password 123456 &gt;&gt; /tmp/mysql-passwdRUN apt-get update &amp;&amp; debconf-set-selections /tmp/mysql-passwd &amp;&amp; apt-get install -yqq mysql-server &amp;&amp; rm -rf /var/lib/apt/lists/*]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>DockerFile</tag>
        <tag>mysql-server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo+Nextä¸Šå¼€å¯Valineè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2Fpost%2Fa072bce6.html</url>
    <content type="text"><![CDATA[æœ‹å‹ä¹‹å‰é—®æ€Žä¹ˆæ²¡æœ‰å¼€è¯„è®ºç³»ç»Ÿï¼Œå€’ä¸æ˜¯ä¸æƒ³å¼€ï¼Œè€Œæ˜¯åˆšå¼€å§‹å»ºç«™çš„æ—¶å€™æµè§ˆäº†å¥½å¤šåšæ–‡ï¼Œä¼¼ä¹Žå¾ˆå¤šåŽŸæ¥çš„æŽ¥å£éƒ½åœ¨hexoä¸å¤ªå¥½ç”¨äº†ã€‚ç‰¹åˆ«æ˜¯å¾ˆå¤šåšæ–‡éƒ½æ˜¯ä¸¤å¹´å‰å†™çš„ï¼Œå½“ç„¶ï¼Œå¤§å¤šæ•°å…¶ä»–åŠŸèƒ½éƒ½æ²¡é—®é¢˜ ç®€ä»‹ Valine Valineæ˜¯ä¸€æ¬¾åŸºäºŽLeancloudçš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åŽç«¯è¯„è®ºç³»ç»Ÿã€‚ Leancloud æˆ‘çš„ç†è§£ï¼ŒLeancloudç›¸å½“äºŽæ˜¯ä¸€ä¸ªæ•°æ®æ‰˜ç®¡å¹³å°ï¼Œå¯ä»¥å¸®åŠ©åº”ç”¨å­˜å‚¨ç›¸å…³æ•°æ®ã€‚Valineä¸»è¦ç”¨åˆ°çš„æ˜¯å…¶ä¸­çš„æ•°æ®å­˜å‚¨â€”â€”comments çŽ¯å¢ƒè¯´æ˜Ž ä½¿ç”¨äº†æœ€æ–°ç‰ˆçš„Hexoä»¥åŠæœ€æ–°ç‰ˆçš„Nextä¸»é¢˜ èŽ·å–AppID æ³¨å†ŒLeancloud è®¿é—®Leancloudï¼Œç‚¹å‡»å…è´¹è¯•ç”¨å°±ä¼šè·³è½¬åˆ°æ³¨å†Œ/ç™»é™†é¡µé¢ã€‚å½“å‰æ”¯æŒé€šè¿‡Githubï¼ŒWeiboä»¥åŠQQè¿›è¡Œæ³¨å†Œ æ³¨å†Œå®ŒåŽéœ€è¦éªŒè¯é‚®ç®± åˆ›å»ºåº”ç”¨ è®¿é—®æŽ§åˆ¶å°ï¼Œåœ¨æŽ§åˆ¶å°ä¸­åˆ›å»ºæ–°åº”ç”¨ èŽ·å–åº”ç”¨Key ç‚¹å‡»æ–°åˆ›å»ºçš„åº”ç”¨â€”â€”è®¾ç½®â€”â€”åº”ç”¨Keyï¼Œä¿å­˜é¡µé¢ä¸Šçš„App IDä»¥åŠApp Keyä»¥å¤‡åŽç»­ä½¿ç”¨ é…ç½®Valine åœ¨æœ€æ–°ç‰ˆçš„Nextä¸»é¢˜ä¸­ï¼Œå·²ç»åˆå…¥äº†Valineçš„é…ç½®ä»£ç ï¼Œä½¿å¾—é…ç½®èµ·æ¥éžå¸¸å¿«æ·ã€‚è®¿é—®Hexoä¸­ä½¿ç”¨Valineï¼Œç‚¹å‡»mergedï¼Œä¼šè·³è½¬åˆ°Nextä¸»é¢˜çš„mergeåŽ†å² æ£€æŸ¥ç›¸å…³æ–‡ä»¶ å¯ä»¥å†æ¬¡æ£€æŸ¥å¹¶ç¡®è®¤ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlï¼Œlayout/_macro/post.swigå’Œlayout/_third-party/comments/valine.swigæ˜¯å¦éƒ½å·²ç»åˆå…¥äº†ç›¸å…³ä»£ç  é…ç½®AppKey ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlä¸­çš„valineéƒ¨åˆ†å†…å®¹ 12345678910valine: enable: true appid: $Your APP ID # your leancloud application appid appkey: $Your APP Key # your leancloud application appkey notify: false # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: éšä¾¿è¯´äº›ä»€ä¹ˆå§ # comment box placeholder avatar: mm # gravatar style guest_info: nick,mail,link # custom comment header pageSize: 10 # pagination size é‡æ–°ç”Ÿæˆé¡µé¢ æ‰§è¡Œå‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶éƒ¨ç½² 1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d åˆ°è¿™é‡Œï¼ŒæŸ¥çœ‹é¡µé¢å·²ç»å¯ä»¥çœ‹åˆ°è¯„è®ºç³»ç»Ÿ åˆ›å»ºç•™è¨€é¡µé¢ å¯ä»¥ä¸ºç«™ç‚¹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç•™è¨€æ¿é¡µé¢ åˆ›å»ºé¡µé¢ 1$ hexo new page guestbook é…ç½®ä¸»é¢˜ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlçš„menuå­—æ®µæ–°å¢žguestbookå­—æ®µ 12345678910menu: home: / || home tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat about: /about/ || user guestbook: /guestbook/ || comments å¯ä»¥è®¿é—®fontawesomeé€‰æ‹©è‡ªå·±å–œæ¬¢çš„å›¾æ ‡æ¥ä½œä¸ºç•™è¨€æ¿çš„å›¾æ ‡ æœ¬åœ°åŒ–å¤„ç† ç¼–è¾‘å¯¹åº”è¯­è¨€çš„é…ç½®æ–‡ä»¶themes/next/languages/zh-CN.ymlï¼Œåœ¨menuä¸­å¢žåŠ guestbookçš„ä¸­æ–‡ 1234567891011menu: home: é¦–é¡µ archives: å½’æ¡£ categories: åˆ†ç±» tags: æ ‡ç­¾ about: å…³äºŽ search: æœç´¢ schedule: æ—¥ç¨‹è¡¨ sitemap: ç«™ç‚¹åœ°å›¾ commonweal: å…¬ç›Š 404 guestbook: ç•™è¨€ ç¼–è¾‘é¡µé¢ ç¼–è¾‘ä¹‹å‰ç”Ÿæˆçš„guestbooké¡µé¢ 123456---title: ç•™è¨€æ¿date: 2018-03-26 23:36:19comments: true---&lt;center&gt;æ—¢ç„¶æ¥äº†ï¼Œå°±æ˜¯ä¸€ç§ç¼˜åˆ†ï¼Œç•™ä¸‹ç‚¹ä»€ä¹ˆå§:cat:&lt;/center&gt; é‡æ–°éƒ¨ç½²ä¹‹åŽå°±å¯ä»¥çœ‹åˆ°ç•™è¨€æ¿äº† ðŸ˜ƒ æ¸…é™¤æµ‹è¯•ç•™è¨€ ä¸ºäº†ç¡®ä¿ç•™è¨€åŠŸèƒ½å·²ç»æ­£å¸¸å·¥ä½œï¼Œéƒ½ä¼šæµ‹è¯•ä¸€ä¸‹ã€‚æµ‹è¯•å®Œæ¯•åŽï¼Œå¯ä»¥é€šè¿‡Leancloudçš„æŽ§åˆ¶å°æ¸…é™¤æµ‹è¯•æ•°æ® ç‚¹å‡»myblogâ€”â€”å­˜å‚¨â€”â€”Commentsï¼Œå³å¯æŸ¥çœ‹å½“å‰ç•™è¨€ï¼Œé€‰ä¸­æµ‹è¯•æ—¶çš„ç•™è¨€ï¼Œåˆ é™¤å³å¯]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>Next</tag>
        <tag>Valine</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨Ubuntu 16.04ä¸Šå¼€å¯Dockerçš„Remote API]]></title>
    <url>%2Fpost%2F3e41aa59.html</url>
    <content type="text"><![CDATA[ç”±äºŽè‡ªåŠ¨åŒ–çš„è€ƒè™‘ï¼Œéœ€è¦ç”¨dockerçš„remote APIï¼Œå°è¯•äº†å¤šç§æ–¹æ³•ï¼Œæœ€ç»ˆæ‰æ‰¾åˆ°äº†å¯è¡Œçš„æ–¹æ³• å¯è¡Œçš„æ–¹æ³• ç¼–è¾‘/lib/systemd/system/docker.service 1$ vim /lib/systemd/system/docker.service ä¿®æ”¹ExecStartçš„å‚æ•° 1ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 éšåŽæ‰§è¡Œservice docker restartæ—¶ä¼šæç¤ºWarning: docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.åˆ™è¡¨ç¤ºé…ç½®æˆåŠŸ 1systemctl daemon-reload é‡å¯dockeræœåŠ¡ 1service docker restart æµ‹è¯•æ˜¯å¦æˆåŠŸ 12$ curl http://localhost:2375/containers/json[&#123;"Id":"30c8e35f1292421d11f6b09385a4fc980d6abaca591d0f52b18dbad8e4f5be04","Names":["/clever_murdock"],"Image":"portainer/portainer","ImageID":"sha256:a8f2aeb34cf69178be1d152759fb17ccff7915faf750c82cd7d1851b12ec7b37","Command":"/portainer","Created":1520845664,"Ports":[&#123;"IP":"0.0.0.0","PrivatePort":9000,"PublicPort":9000,"Type":"tcp"&#125;],"Labels":&#123;&#125;,"State":"running","Status":"Up 13 minutes","HostConfig":&#123;"NetworkMode":"default"&#125;,"NetworkSettings":&#123;"Networks":&#123;"bridge":&#123;"IPAMConfig":null,"Links":null,"Aliases":null,"NetworkID":"78fa057306e70838bab1e18359c86bd8eff7de2285c351784ad951cd7a73f8d1","EndpointID":"e99ca98169320155c8833a8746be7d0e1c8d98186c75fba9d9bf2486367a4e00","Gateway":"172.17.0.1","IPAddress":"172.17.0.2","IPPrefixLen":16,"IPv6Gateway":"","GlobalIPv6Address":"","GlobalIPv6PrefixLen":0,"MacAddress":"02:42:ac:11:00:02","DriverOpts":null&#125;&#125;&#125;,"Mounts":[&#123;"Type":"bind","Source":"/opt/portainer","Destination":"/data","Mode":"","RW":true,"Propagation":"rprivate"&#125;,&#123;"Type":"bind","Source":"/var/run/docker.sock","Destination":"/var/run/docker.sock","Mode":"","RW":true,"Propagation":"rprivate"&#125;]&#125;] ä¸å¯è¡Œçš„æ–¹æ³• åŒæ—¶åˆ—å‡ºåœ¨Ubuntuä¸Šä¸å¯è¡Œçš„æ–¹æ³• ä¿®æ”¹/etc/default/dockerä¸­çš„DOCKER_OPTS 1DOCKER_OPTS='-H fd:// -H tcp://0.0.0.0:2375' ä¿®æ”¹/etc/init/docker.confä¸­çš„DOCKER_OPTS ç½‘ä¸Šæœ‰äººè¯´åœ¨Ubuntu14.04ä¸Šå¯ä»¥ç”Ÿæ•ˆ 123# modify these in /etc/default/$UPSTART_JOB (/etc/default/docker) DOCKERD=/usr/bin/dockerd DOCKER_OPTS='-H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375']]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨hexoæ­å»ºè‡ªå·±çš„åšå®¢â€”â€”åˆ›å»ºç«™ç‚¹]]></title>
    <url>%2Fpost%2F80ca9385.html</url>
    <content type="text"><![CDATA[å®‰è£…åŠé…ç½® ç®€ä»‹ Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€ä»‹ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ï¼Œå¯ä»¥ä½¿ç”¨Markdownè§£æžæ–‡ç« å¹¶ç”Ÿæˆç½‘ç«™ è¯´æ˜Ž ç«™ç‚¹é…ç½®æ–‡ä»¶ $site_dir/_config.xml ä¸»é¢˜é…ç½®æ–‡ä»¶$site_dir/theme/$theme_dir/_config å®‰è£…hexo å½“çŽ¯å¢ƒå‡†å¤‡å¥½gitä»¥åŠnodejsåŽä¾¿å¯ä»¥å®‰è£…hexo 1npm install hexo-cli -g å»ºç«™ å®‰è£…HexoåŽï¼Œåˆ›å»ºç«™ç‚¹æ–‡ä»¶å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼Œå¦‚blogï¼Œç„¶åŽæ‰§è¡Œ 123$ hexo init blog$ cd blog$ npm install å®ŒæˆåŽï¼Œblogç›®å½•ç»“æž„ 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes é…ç½® ä¿®æ”¹_config.yml 123456title: your site tilesubtitle: description: descriptionauthor: your namelanguage: zh-Hanstimezone: Asia/Shanghai å¸¸ç”¨å‘½ä»¤ æ¸…é™¤ç¼“å­˜æ–‡ä»¶åŠå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ 1$ hexo clean å¯åŠ¨æœåŠ¡å™¨ 1$ hexo server é»˜è®¤çŠ¶å†µä¸‹ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨4000ç«¯å£ã€‚å¯ä»¥é€šè¿‡hexo server -p 80æ¥å°†serverç»‘å®šè‡³80ç«¯å£ éƒ¨ç½²ç½‘ç«™ å¯å°†ç½‘ç«™æŒ‰ç…§_config.ymlä¸­çš„é…ç½®ç›´æŽ¥éƒ¨ç½²äºŽgithubç­‰ï¼ˆåŽç»­çœ‹å¿ƒæƒ…å†™æ­¥éª¤ï¼‰ 1$ hexo deploy ä¸»é¢˜ä¿®æ”¹ å¯è®¿é—®hexoå®˜æ–¹ä¸»é¢˜åº“é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œå¹¶ä¸‹è½½è‡³themeç›®å½•ä¸‹ ä¿®æ”¹_config.xmlä¸­çš„themeå­—æ®µ 1theme: landscape å†™ä½œ æœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºæ–‡ç«  åˆ›å»ºæ–‡ç«  hexoå‘½ä»¤è¡Œæ–¹å¼ 1$ hexo new &lt;layout&gt; title layoutä¸ºæ¨¡ç‰ˆ å‘½ä»¤æ‰§è¡ŒåŽï¼Œé»˜è®¤æ–‡ç« å°†ä½äºŽsource/_post/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶å†…å®¹ä¸ºï¼š 12345---title: testdate: 2018-03-25 23:10:04tags:--- ç›´æŽ¥åˆ›å»ºæ–‡ä»¶ 12$ cd source/_post/$ touch myfirstblog.md æ­¤æ—¶æ–‡ä»¶å†…å®¹ä¸ºç©ºï¼Œéœ€è¦è‡ªå·±æ·»åŠ ç›¸å…³å†…å®¹ åˆ›å»ºæ ‡ç­¾é¡µ é…ç½®ç¡®è®¤ ç¡®è®¤ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹å†…å®¹ 1tag_dir: tags ç¡®è®¤ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­tagsæ‰“å¼€ 123menu: ä¸»é¡µ: / || home æ ‡ç­¾: /tags/ || tags åˆ›å»ºæ ‡ç­¾é¡µ 1$ hexo new page tags ä¿®æ”¹tags/index.mdä¸­çš„typeä¸º&quot;tags&quot; 12345---title: Tagclouddate: 2018-03-23 01:18:00type: "tags"--- åˆ›å»ºåˆ†ç±»é¡µé¢ ä¸Žåˆ›å»ºæ ‡ç­¾é¡µç›¸ä¼¼ ç¡®è®¤é…ç½® ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æœ‰category_dir: categories ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„åˆ†ç±»: /categories/ || thå¼€å¯ åˆ›å»ºåˆ†ç±»ä¹Ÿ 1$ hexo new page categories]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>blog</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockeråŸºæœ¬æ“ä½œï¼ˆä¸€ï¼‰]]></title>
    <url>%2Fpost%2F493f285a.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä½œä¸ºdockerä½¿ç”¨ç¬”è®°ä¾›å°ä¼™ä¼´ä»¬å‚è€ƒ å‡†å¤‡å·¥ä½œ å®‰è£…æœ€æ–°ç‰ˆçš„docker-ceï¼Œä¼šå°†è‡ªåŠ¨å‘½ä»¤è¡Œè¡¥é½å®‰è£…åœ¨/usr/share/bash-completion/completions/dockerç›®å½• ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œåœ¨ubuntuä¸Šæ‰“å¼€dockerå‘½ä»¤è¡Œè‡ªåŠ¨è¡¥é½åŠŸèƒ½ ç¼–è¾‘/etc/bash.bashrcæ–‡ä»¶ï¼ŒæŸ¥æ‰¾completionæ®µï¼Œå°†è¯¥æ®µå†…å®¹å‰çš„#åˆ é™¤å³å¯ 12345678# enable bash completion in interactive shellsif ! shopt -oq posix; then if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; then . /etc/bash_completion fifi imageæ“ä½œ build image 1$ docker build -t mytest:latest . æŸ¥çœ‹image 12345$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx &lt;none&gt; 73acd1f0cfad 8 days ago 109MBmongo 3 5b1317f8158f 8 days ago 366MB$ dockeer image ls åˆ é™¤image 12$ docker image rm &lt;id/name&gt;$ docker rmi &lt;id/name&gt; ä»Ždocker hubä¸ŠèŽ·å–image å›½å†…è®¿é—®docker hubè¾ƒæ…¢ï¼Œå¯ä½¿ç”¨é˜¿é‡Œäº‘çš„dockeré•œåƒæœåŠ¡ 1$ docker pull nginx continerç›¸å…³ åˆ›å»ºdocker 1$ docker run -d --name mytest -p 80:80 mynginx å¸¸ç”¨å‚æ•°è¯´æ˜Ž â€“rm å½“è¿è¡Œç»“æŸï¼ˆå½“CMDæˆ–entrypointæˆ–docker runå‘½ä»¤è¡ŒæŒ‡å®šçš„å‘½ä»¤è¿è¡Œç»“æŸæ—¶ï¼Œå®¹å™¨åœæ­¢ï¼‰æ—¶è‡ªåŠ¨åˆ é™¤docker -it é‡å®šå‘dockerç»ˆç«¯ -d åœ¨åŽå°æ‰§è¡Œ -e æ·»åŠ è¿è¡Œæ—¶çš„å‚æ•°ï¼Œå¸¸è¢«ç”¨äºŽdocker CMDæ‰§è¡Œæ—¶å¢žåŠ å‚æ•° dockeræ”¯æŒé•¿idå’ŒçŸ­idæ–¹å¼ç´¢å¼•ï¼Œäº¦å¯é€šè¿‡åç§°è¿›è¡Œç´¢å¼• stop/start/restartå®¹å™¨ é€šè¿‡docker stopå¯ä»¥åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨docker killæ¥å¿«é€Ÿåœæ­¢ä¸€ä¸ªå®¹å™¨ docker startä¼šä¿ç•™å®¹å™¨çš„ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶çš„æ‰€æœ‰å‚æ•° docker restartå¯ä»¥é‡å¯å®¹å™¨ å¯ä»¥åœ¨å¯åŠ¨å®¹å™¨æ—¶è®¾ç½®â€“restartæ¥è‡ªåŠ¨é‡å¯å®¹å™¨ åˆ é™¤å®¹å™¨ å¯ä»¥ä½¿ç”¨docker psåˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ å®¹å™¨åœæ­¢è¿è¡Œä¸ä»£è¡¨å®¹å™¨å·²ç»è¢«åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨docker ps -a ä½¿ç”¨docker rmæ¥åˆ é™¤ä¸€ä¸ªå®¹å™¨ ä½¿ç”¨docker rmiåˆ™ä¼šåˆ é™¤dockerçš„image æŸ¥çœ‹åŠæ“ä½œ æŸ¥çœ‹å®¹å™¨çŠ¶æ€ 123$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES30c8e35f1292 portainer/portainer "/portainer" 10 days ago Up 2 days 0.0.0.0:9000-&gt;9000/tcp clever_murdock ä½¿ç”¨docker ps -aæŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…å«ä¼‘çœ çŠ¶æ€ï¼‰ 1234$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES30c8e35f1292 portainer/portainer "/portainer" 10 days ago Up 2 days 0.0.0.0:9000-&gt;9000/tcp clever_murdockef58155f9957 registry:2 "/entrypoint.sh /etcâ€¦" 2 days ago Exited (137) 41 hours ago sltregistry è¿žæŽ¥åˆ°å®¹å™¨çš„ç»ˆç«¯ å°½é‡ä½¿ç”¨execæ–¹æ³•ï¼Œattachè¿žå…¥åŽå¯æŸ¥çœ‹å½“å‰å®¹å™¨å‘½ä»¤è¿è¡Œçš„æ—¥å¿—ï¼Œä½†ä¸å½“çš„æ“ä½œå®¹æ˜“ä½¿è¿è¡Œä¸­çš„å®¹å™¨é€€å‡º ä½¿ç”¨attach 1$ docker attach &lt;id/name&gt; ä½¿ç”¨exec 1$ docker exec -it &lt;id/name&gt; /bin/sh æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„æ—¥å¿— å®¹å™¨ä»¥-då‚æ•°è¿è¡Œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨docker logsæŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿— 123$ docker logs mytest_haproxy[WARNING] 079/100555 (1) : [haproxy.main()] Cannot raise FD limit to 200000011, limit is 1048576.[WARNING] 079/100555 (1) : [haproxy.main()] FD limit (1048576) too low for maxconn=100000000/maxsock=200000011. Please raise 'ulimit-n' to 200000011 or more to avoid any trouble.]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨æ ‘èŽ“æ´¾ä¸Šéƒ¨ç½²nodejs]]></title>
    <url>%2Fpost%2F4fa2931e.html</url>
    <content type="text"><![CDATA[ç»ˆäºŽæœ‰æ—¶é—´åœ¨æ ‘èŽ“æ´¾ä¸Šéƒ¨ç½²ä¸€ä¸ªè‡ªå·±çš„å°åšå®¢äº†ï¼Œå¹³æ—¶ç”¨æƒ¯äº†ubuntuï¼Œåˆ°äº†æ ‘èŽ“æ´¾ä¸Šï¼Œå‘çŽ°å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚é¦–å…ˆå°±æ˜¯apt install nodejsï¼Œå®‰è£…å®Œæ²¡æœ‰npmã€‚ä¸è¿‡ï¼Œç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œä¾¿æœ‰äº†çŽ°åœ¨çš„å°ç«™ç‚¹ å®‰è£…nodejs nodejså¯ä»¥ä½¿ç”¨æºç ç¼–è¯‘å’ŒäºŒè¿›åˆ¶åŒ…æ¥å®‰è£…ã€‚è€ƒè™‘åˆ°æ ‘èŽ“æ´¾çš„å¤„ç†èƒ½åŠ›ï¼Œè¦ç¼–è¯‘ä¸€ä¸ªnodejsï¼Œå¤ªè¿‡è€—æ—¶ã€‚ç›´æŽ¥é€‰ç”¨å®˜ç½‘æä¾›çš„äºŒè¿›åˆ¶åŒ…å®Œæˆå®‰è£… å®‰è£…åŒ…èŽ·å– å®˜ç½‘ä¸ŠARMçš„binåŒ…æœ‰3ä¸ªï¼Œåˆ†åˆ«æ˜¯v6ï¼Œv7å’Œv8ã€‚è€Œæ ‘èŽ“æ´¾çš„ç‰ˆæœ¬æ˜¯v7 12$ uname -aLinux raspberrypi 4.9.80-v7+ #1098 SMP Fri Mar 9 19:11:42 GMT 2018 armv7l GNU/Linux èŽ·å–å®‰è£…åŒ… 1$ wget https://nodejs.org/dist/v8.10.0/node-v8.10.0-linux-armv7l.tar.xz å®‰è£…nodejs è§£åŽ‹ç¼© 1234567$ tar -Jxv -f node-v8.10.0-linux-armv7l.tar.xznode-v8.10.0-linux-armv7l/node-v8.10.0-linux-armv7l/README.mdnode-v8.10.0-linux-armv7l/bin/node-v8.10.0-linux-armv7l/bin/nodenode-v8.10.0-linux-armv7l/bin/npm... å¯æ ¹æ®ä¸ªäººå–œå¥½é‡å‘½åæ–‡ä»¶å¤¹ï¼Œæ­¤å¤„é‡å‘½åä¸ºnodeï¼Œåˆ†åˆ«éªŒè¯ç‰ˆæœ¬ä¿¡æ¯ 1234pi@raspberrypi:~/node $ ./bin/node -vv8.10.0pi@raspberrypi:~/node $ ./bin/npm -v5.6.0 é…ç½®nodeå’Œnpmä¸ºå…¨å±€å‘½ä»¤ 12pi@raspberrypi:~/node $ sudo ln /home/pi/node/bin/node /usr/local/bin/nodepi@raspberrypi:~/node $ sudo ln -s /home/pi/node/lib/node_modules/npm/bin/npm /usr/local/bin/npm æ­¤æ—¶æ‰§è¡Œnpmä¼šæŠ¥é”™ 123456pi@raspberrypi:~/node $ npm -vmodule.js:471 throw err; ^Error: Cannot find module '/usr/local/bin/node_modules/npm/bin/npm-cli.js' éœ€è¦ä¿®æ”¹/usr/local/bin/ç›®å½•ä¸‹çš„npmæ–‡ä»¶ï¼Œå°†$basediræ›¿æ¢ä¸ºç»å¯¹è·¯å¾„ï¼Œæ­¤å¤„ä¸º/home/pi/node/ 12345678910111213141516171819202122232425262728293031323334#!/bin/sh(set -o igncr) 2&gt;/dev/null &amp;&amp; set -o igncr; # cygwin encoding fixbasedir=`dirname "$0"`case `uname` in *CYGWIN*) basedir=`cygpath -w "$basedir"`;;esacNODE_EXE="/home/pi/node/bin/node.exe"if ! [ -x "$NODE_EXE" ]; then NODE_EXE=nodefiNPM_CLI_JS="/home/pi/node/lib/node_modules/npm/bin/npm-cli.js"case `uname` in *MINGW*) NPM_PREFIX=`"$NODE_EXE" "$NPM_CLI_JS" prefix -g` NPM_PREFIX_NPM_CLI_JS="$NPM_PREFIX/node_modules/npm/bin/npm-cli.js" if [ -f "$NPM_PREFIX_NPM_CLI_JS" ]; then NPM_CLI_JS="$NPM_PREFIX_NPM_CLI_JS" fi ;; *CYGWIN*) NPM_PREFIX=`"$NODE_EXE" "$NPM_CLI_JS" prefix -g` NPM_PREFIX_NPM_CLI_JS="$NPM_PREFIX/node_modules/npm/bin/npm-cli.js" if [ -f "$NPM_PREFIX_NPM_CLI_JS" ]; then NPM_CLI_JS="$NPM_PREFIX_NPM_CLI_JS" fi ;;esac"$NODE_EXE" "$NPM_CLI_JS" "$@" å†æ¬¡éªŒè¯ï¼Œnpmå·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œ]]></content>
      <categories>
        <category>æ ‘èŽ“æ´¾</category>
      </categories>
      <tags>
        <tag>æ ‘èŽ“æ´¾</tag>
        <tag>nodejs</tag>
        <tag>pi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fpost%2F4a17b156.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
