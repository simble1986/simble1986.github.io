<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Linuxè™šæ‹Ÿç½‘ç»œä¹‹è™šæ‹Ÿæœº]]></title>
    <url>%2Fpost%2F13a44dc5.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡å°†é€šè¿‡å®žéªŒæ¥ç†è§£Linuxä¸Šçš„è™šæ‹Ÿæœºå¦‚ä½•é€šè¿‡tapã€bridgeã€routerä»¥åŠiptableså®žçŽ°ç›¸å…³çš„ç½‘ç»œè®¿é—®åŠŸèƒ½ã€‚ çŽ¯å¢ƒå‡†å¤‡ ç³»ç»Ÿï¼š Ubuntu 16.04.6 LTS å®žéªŒtopo è½¯ä»¶åŒ… 1. qemu ç”±äºŽæ•´å¥—å®žéªŒçŽ¯å¢ƒéƒ½æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šå®Œæˆï¼Œåœ¨æ²¡æœ‰å¼€å¯è¯¸å¦‚Intel-VTxæŠ€æœ¯çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨qemuä½œä¸ºè™šæ‹Ÿæœºæ¨¡æ‹Ÿå™¨ 123$ apt install qemu$ apt install uml-utilities$ apt install bridge-utils 2. è™šæ‹Ÿæœºé•œåƒ æœ¬æ–‡ä½¿ç”¨cirros(å½“å‰ç‰ˆæœ¬ï¼š0.4.0)ä½œä¸ºè™šæ‹Ÿæœºé•œåƒ 12$ wget http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img$ cp cirros-0.4.0-x86_64-disk.img cirros.img 3. vncserver ä½¿ç”¨qemuå¯åŠ¨cirroséœ€è¦ç”¨åˆ°å›¾å½¢ç•Œé¢ï¼Œåœ¨çº¯å‘½ä»¤è¡Œæ¨¡å¼å¯åŠ¨ï¼Œéœ€è¦ä½¿ç”¨vncserver 1$ apt install tightvncserver 4. çŽ¯å¢ƒæ£€æŸ¥ å…ˆæ‹‰èµ·ä¸ªè™šæœºè¯•è¯• 1$ qemu-system-x86_64 -vnc 10.180.13.232:99 cirros-0.4.0-x86_64-disk.img 5. æµ‹è¯• ç”¨vnc viewerè¿žæŽ¥å½“å‰è™šæ‹Ÿæœº tapæŽ¥å£ä½¿ç”¨ 1. åˆ›å»ºè™šæ‹Ÿæœº 1(host)$ qemu-system-x86_64 -vnc 10.180.13.232:99 cirros-0.4.0-x86_64-disk.img -netdev tap,id=mynet0,ifname=tap1,script=no,downscript=no -device e1000,netdev=mynet0 åˆ›å»ºæˆåŠŸåŽï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªtap1çš„æŽ¥å£ï¼Œä½†æ²¡æœ‰up 123456789(host)$ ifconfig -a...tap1 Link encap:Ethernet HWaddr 7a:d1:ba:68:06:b2 BROADCAST MULTICAST MTU:1500 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)... 2. æµ‹è¯•è¿žé€šæ€§ é…ç½®hostçš„tap1æŽ¥å£IP 1(host)$ ifconfig tap1 192.168.1.1/24 up é…ç½®è™šæ‹Ÿæœºçš„IP 1(vm)$ sudo ifconfig eth0 192.168.1.2 ping 1234(vm)$ ping 192.168.1.2PING 192.168.1.2 (192.168.1.2) 56(84) bytes of data.64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=16.6 ms64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=1.51 ms 3. å°ç»“ ä½¿ç”¨tapç±»åž‹çš„netdevåˆ›å»ºqemuè™šæ‹Ÿæœºæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªtapæŽ¥å£ï¼Œè€Œè¿™ä¸ªtapæŽ¥å£ä¸ŽVMçš„æŽ¥å£ç›¸è¿žã€‚ è¿žæŽ¥å›¾å¦‚ä¸‹ï¼š è™šæ‹Ÿæœºé€šä¿¡ ç†è§£äº†è™šæ‹Ÿæœºä½¿ç”¨tapæŽ¥å£ä¹‹åŽï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç½‘æ¡¥æ–¹å¼è¿›è¡Œ2ä¸ªç”šè‡³å¤šä¸ªè™šæ‹Ÿæœºä¹‹é—´é€šä¿¡äº†ã€‚ 1. åˆ›å»ºè™šæ‹Ÿæœº å…ˆæ‹‰èµ·4ä¸ªVMï¼Œåˆ†åˆ«æŒ‡å®šç½‘ç»œ æ³¨æ„ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªè™šæœºæŒ‡å®šMACåœ°å€ï¼Œå¦åˆ™ï¼Œæ‹‰èµ·çš„è™šæœºå°†ä½¿ç”¨åŒæ ·çš„MACåœ°å€ 12(host)$ qemu-system-x86_64 -vnc 10.180.13.232:10 cirros.img -netdev tap,id=mynet0,ifname=tap0,script=no,downscript=no -device e1000,netdev=mynet0,mac=52:54:98:76:54:30 &amp;(host)$ qemu-system-x86_64 -vnc 10.180.13.232:11 cirros.img -netdev tap,id=mynet1,ifname=tap1,script=no,downscript=no -device e1000,netdev=mynet1,mac=52:54:98:76:54:31 &amp; æŸ¥çœ‹Hostç½‘å¡ 123456(host)$ ip link show...46: tap0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether 42:47:1b:de:8e:07 brd ff:ff:ff:ff:ff:ff47: tap1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether f2:23:b1:c5:55:d3 brd ff:ff:ff:ff:ff:ff å¯ä»¥çœ‹åˆ°éšè™šæ‹Ÿæœºå¯åŠ¨ï¼Œåˆ›å»ºäº†4ä¸ªtapæŽ¥å£ 2. é…ç½®IP VM1 1(vm1)$ sudo ifconfig eth0 192.168.1.10 VM2 1(vm2)$ sudo ifconfig eth0 192.168.1.11 3. åˆ›å»ºç½‘æ¡¥ Host 123456(host)$ brctl addbr br0(host)$ brctl addif br0 tap0(host)$ brctl addif br0 tap1(host)$ bridge name bridge id STP enabled interfaces br0 8000.42471bde8e07 no tap0 tap1 å°è¯•pingä¸€ä¸‹ï¼Œå‘çŽ°è¿˜æ˜¯pingä¸é€šã€‚å› ä¸ºå¯¹åº”çš„tapæŽ¥å£åŠbr0æ²¡æœ‰up 123(host)$ ifconfig br0 up(host)$ ifconfig tap0 up(host)$ ifconfig tap1 up çŽ°åœ¨ï¼Œå¯ä»¥ä¸¤ä¸ªVMç›¸äº’pingä¸€ä¸‹äº† 4. è®¿é—®å¤–éƒ¨PC è™šæ‹Ÿæœºéœ€è¦è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œåˆ™éœ€è¦æ·»åŠ ç‰©ç†æŽ¥å£ï¼Œå¦‚ä¸‹å›¾ Host 12(host)$ ifconfig ens192 up(host)$ brctl addif br0 ens192 VM1 1234(vm1)$ ping 192.168.1.3PING 192.168.1.3 (192.168.1.3): 56 data bytes64 bytes from 192.168.1.3: seq=0 ttl=64 time=29.700 ms... æŠ“ä¸ªåŒ…çœ‹çœ‹ - ens192 12345(host)$ tcpdump -i ens192tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on ens192, link-type EN10MB (Ethernet), capture size 262144 bytes11:15:02.317164 IP 192.168.1.11 &gt; 192.168.1.3: ICMP echo request, id 47873, seq 0, length 6411:15:02.317527 IP 192.168.1.3 &gt; 192.168.1.11: ICMP echo reply, id 47873, seq 0, length 64 5. å°ç»“ æœ¬èŠ‚ä¸»è¦å®žéªŒäº†è™šæ‹Ÿæœºé€šè¿‡ç½‘æ¡¥è¿›è¡Œç›¸äº’é€šä¿¡åŠè®¿é—®å¤–ç½‘ã€‚å¯¹åº”äº†qemuç½‘ç»œçš„åŸºäºŽç½‘æ¡¥çš„è™šæ‹Ÿç½‘å¡ NATæ¨¡å¼ Hostéœ€è¦å¼€å¯è½¬å‘åŠŸèƒ½ ä¸´æ—¶ä¿®æ”¹ï¼šecho &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward NATæ¨¡å¼ä¸»è¦é€šè¿‡iptablesæ¥å®žçŽ°ã€‚é€šè¿‡å°†è™šæ‹Ÿæœºå‘å‡ºçš„æŠ¥æ–‡çš„æºåœ°å€è½¬æ¢ä¸ºç‰©ç†æŽ¥å£çš„IPï¼Œå®žçŽ°ä¸Žå¤–ç½‘çš„é€šä¿¡ æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š 1. ä¸ºç½‘æ¡¥é…ç½®IPåœ°å€ ç”¨ç½‘æ¡¥çš„br0æŽ¥å£ä½œä¸º192.168.1.0/24ç½‘æ®µçš„ç½‘å…³ 1(host)$ ifconfig br0 192.168.1.1/24 æµ‹è¯•hostä¸Žå¤–éƒ¨ç½‘ç»œè¿žé€šæ€§ éœ€è¦ç¡®ä¿hostæœ‰é€šå¾€å¤–éƒ¨ç½‘ç»œçš„è·¯ç”± 123(host)$ ping 223.5.5.5PING 223.5.5.5 (223.5.5.5) 56(84) bytes of data.64 bytes from 223.5.5.5: icmp_seq=1 ttl=115 time=11.7 ms 2. é…ç½®iptables å°†192.168.1.0/24ç½‘æ®µè½¬æ¢ä¸ºå‘é€å‡ºåŽ»çš„æŽ¥å£IP MASQUERADE: ç”¨å‘é€æ•°æ®çš„ç½‘å¡ä¸Šçš„IPæ¥æ›¿æ¢æºIP 1(host)$ iptables -t nat -A POSTROUTING -s 192.168.1.0/24 ! -d 192.168.1.0/24 -j MASQUERADE 3. è™šæ‹Ÿæœºé…ç½®é»˜è®¤è·¯ç”± 1(vm1)$ route add -net 0.0.0.0/0 gw 192.168.1.1 4. æµ‹è¯•è¿žé€šæ€§ 1234(vm1)$ ping 223.5.5.5PING 223.5.5.5 (223.5.5.5): 56 data bytes64 bytes from 223.5.5.5: seq=0 ttl=114 time=14.161 ms... 5. æŠ“åŒ…çœ‹çœ‹ tap1 123456(host)$ tcpdump -i tap0 -ntcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on tap0, link-type EN10MB (Ethernet), capture size 262144 bytes14:33:41.158181 IP 192.168.1.10 &gt; 223.5.5.5: ICMP echo request, id 53761, seq 0, length 6414:33:41.332908 IP 223.5.5.5 &gt; 192.168.1.10: ICMP echo reply, id 53761, seq 0, length 64... tap1æŽ¥å£ä¸Šä½“çŽ°äº†è™šæ‹Ÿæœºçš„è¯·æ±‚ï¼š 192.168.1.10 - 223.5.5.5 br0 12345$ tcpdump -i br0 -ntcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on br0, link-type EN10MB (Ethernet), capture size 262144 bytes14:35:05.964841 IP 192.168.1.10 &gt; 223.5.5.5: ICMP echo request, id 54017, seq 0, length 6414:35:06.028936 IP 223.5.5.5 &gt; 192.168.1.10: ICMP echo reply, id 54017, seq 0, length 64 ç½‘æ¡¥æŽ¥å£br0ä¸Šçš„æŠ¥æ–‡äºŽtap0ç›¸åŒï¼Œæ—¢å½“å‰å¹¶æ²¡æœ‰ä¿®æ”¹æŠ¥æ–‡ ens160 12345$ tcpdump -i ens160 -n host 223.5.5.5tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on ens160, link-type EN10MB (Ethernet), capture size 262144 bytes14:36:22.762002 IP 10.180.13.232 &gt; 223.5.5.5: ICMP echo request, id 54273, seq 0, length 6414:36:22.775182 IP 223.5.5.5 &gt; 10.180.13.232: ICMP echo reply, id 54273, seq 0, length 64 å¯ä»¥çœ‹åˆ°åœ¨ens160æŽ¥å£ä¸Šï¼ŒIPåˆ™å˜æˆäº†10.180.13.232 - 223.5.5.5ä¹‹é—´çš„é€šä¿¡ 6. å°ç»“ åœ¨æœ¬èŠ‚ä¸­ï¼Œå½“è™šæ‹Ÿæœºè®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œä»Žè™šæ‹Ÿæœºå†…éƒ¨å‘å‡ºçš„æŠ¥æ–‡ï¼Œåœ¨ä¸»æœºä¸Šé€šè¿‡æŸ¥è·¯ç”±çš„æ–¹å¼è½¬å‘åˆ°å¤–éƒ¨ç½‘ç»œä¸­ã€‚è€Œåœ¨è½¬å‘å‡ºåŽ»ä¹‹å‰ï¼Œå°†æºIPåœ°å€ä¿®æ”¹ä¸ºå½“å‰ä¸»æœºçš„æŽ¥å£IP]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¥¿ç­ç‰™ç”³æ ¹ç­¾è¯å¿«é€Ÿæ”»ç•¥]]></title>
    <url>%2Fpost%2F29ce55ae.html</url>
    <content type="text"><![CDATA[é€‚ç”¨å¯¹è±¡ åŒ—äº¬é¢†åŒº åœ¨èŒäººå‘˜ æ—…æ¸¸ç­¾è¯ 2019å¹´ å°æé†’ ç­¾è¯ä¸­å¿ƒåªæ”¶çŽ°é‡‘ æ®ç­¾è¯ä¸­å¿ƒå·¥ä½œäººå‘˜ä»‹ç»ï¼Œå‘¨ä¸€å’Œå‘¨äº”äººæœ€å¤šï¼Œå…¶ä»–æ—¶é—´éƒ½è¿˜å¥½ åªéœ€ä¸€å¼ ç…§ç‰‡ï¼Œä½†å¤šå¸¦å‡ å¼ æ€»ä¸å æµæ°´ä½™é¢å–å†³äºŽæ—…è¡Œæ—¶é—´ï¼Œæœ€å°‘3Wå§ ä¸»è¦ç½‘ç«™ è¥¿ç­ç‰™ç­¾è¯ç”³è¯·ä¸­å¿ƒï¼šhttps://china.blsspainvisa.com/chinese/index.php æµç¨‹ å‡†å¤‡èµ„æ–™ é¢„çº¦ å‰å¾€ç­¾è¯ä¸­å¿ƒ åç­‰å¿«é€’ èµ„æ–™æ¸…å• å®˜ç½‘æ–‡ä»¶ æ¥æºï¼šè¥¿ç­ç‰™ç­¾è¯ç”³è¯·ä¸­å¿ƒå®˜ç½‘ èŽ·å–ï¼šé¦–é¡µ -&gt; ç­¾è¯ç±»åž‹ -&gt; çŸ­æœŸ -&gt; æ—…æ¸¸ã€‚æˆ–ç›´æŽ¥ç‚¹å‡»è¿™é‡Œ æ£€æŸ¥æ¸…å•ï¼ˆChecklistï¼‰ ç­¾è¯ç”³è¯·è¡¨ çŸ¥æ‚‰å£°æ˜Ž å‡†å¤‡æ–‡ä»¶ ç›¸å…³å¡«å†™åŠè¯´æ˜Žå‚çœ‹åŽç»­ç« èŠ‚ å‡†å¤‡æ–‡ä»¶å‡æ¥æºäºŽæ£€æŸ¥æ¸…å•ä¸­ å·¥ä½œç›¸å…³ï¼ˆå¿…é¡»ï¼‰ å…¬å¸è¥ä¸šæ‰§ç…§å¤åº”ä»¶ï¼Œéœ€ç›–ç«  åœ¨èŒè¯æ˜Žï¼ˆä¸­æ–‡ï¼Œè‹±æ–‡å„ä¸€ä»½ï¼‰ï¼Œå¯å‚çœ‹åœ¨èŒè¯æ˜Žæ¨¡ç‰ˆ ä»»èŒå…¬å¸çš„åœ°å€ã€ç”µè¯åŠä¼ çœŸå·ç  ä»»èŒå…¬å¸ç­¾å­—äººçš„å§“åå’ŒèŒåŠ¡ ç”³è¯·äººå§“åã€èŒåŠ¡ã€æ”¶å…¥åŠå·¥ä½œå¹´é™ æ—…è¡Œèµ„æ–™ï¼ˆå¿…é¡»ï¼‰ å®Œæ•´æ—…è¡Œè®¡åˆ’ å…¨éƒ¨æœºç¥¨é¢„è®¢å• æ‰€æœ‰ä½å®¿è¯æ˜Ž æ—…è¡Œä¿é™©ï¼ˆæŠ•ä¿é‡‘é¢è‡³å°‘30000 æ¬§å…ƒæˆ–ç­‰å€¼çš„äººæ°‘å¸ï¼‰ èº«ä»½è¯æ˜Žï¼ˆå¿…é¡»ï¼‰ æŠ¤ç…§åŽŸä»¶ï¼ˆå¦‚æœ‰æ—§æŠ¤ç…§ï¼Œä¸€å¹¶æä¾›ï¼‰ æ•´æœ¬æŠ¤ç…§å¤å°ä»¶ï¼ˆé¦–é¡µéœ€è¦å¤å°ä¸¤å¼ ï¼‰ æˆ·å£æœ¬åŽŸä»¶ æˆ·å£æœ¬æ‰€æœ‰é¡µå¤å°ä»¶ ç…§ç‰‡ æ”¶å…¥ç±»ï¼ˆå¿…é¡»ï¼‰ å·¥èµ„å¡3-6ä¸ªæœˆçš„æµæ°´ï¼Œæ— éœ€å­˜æ¬¾è¯æ˜Ž æ”¶å…¥è¯æ˜Žï¼ˆåŒ…å«äºŽåœ¨èŒè¯æ˜Žï¼‰ è¾…åŠ©èµ„æ–™ï¼ˆéžå¿…é¡»ï¼‰ æˆ¿äº§è¯åŠå¤å°ä»¶ æœºåŠ¨è½¦äº§æƒè¯ é¢„çº¦ åœ¨è¥¿ç­ç‰™ç­¾è¯ç”³è¯·ä¸­å¿ƒå®˜ç½‘ï¼š ç”³è¯·é¢„çº¦ -&gt; BLSç­¾è¯ä¸­å¿ƒ -&gt; ç½‘ä¸Šé¢„çº¦ï¼Œæˆ–ç›´æŽ¥ç‚¹å‡»è¿™é‡Œ é¢„çº¦è¡¨å•å¡«å†™ åŸºæœ¬ä¿¡æ¯ é¢„çº¦ç”³è¯·è¡¨ é¢„çº¦ç¡®è®¤ä¿¡ é¢„çº¦å®ŒæˆåŽï¼Œæ³¨æ„ä¿å­˜é¢„çº¦ç¡®è®¤ä¿¡ï¼Œå¯æ‰“å°ä¹Ÿå¯ä¿å­˜åœ¨æ‰‹æœºä¸Š å‰å¾€ç­¾è¯ä¸­å¿ƒ åœ°å€ ç­¾è¯ä¸­å¿ƒæ¥¼ä¸‹å¹¶æ²¡æœ‰æ˜Žæ˜¾çš„æ ‡ç¤º åŒ—äº¬å¸‚æœé˜³åŒºæ–°æºé‡Œ16å·ç¨èŽŽä¸­å¿ƒ 1å·æ¥¼1006å®¤ è´¹ç”¨ ç­¾è¯ä¸­å¿ƒå½“å‰åªæ”¶çŽ°é‡‘ ç­¾è¯è´¹ï¼š469 æœåŠ¡è´¹ï¼š121 å¿«é€’è´¹ï¼š60 æµç¨‹ æŽ’é˜Ÿ å‰å°æ£€æŸ¥èµ„æ–™ï¼Œå¡«å†™å¿«é€’å• æ‹¿å· é€’äº¤ææ–™ ç¼´è´¹ å½•æŒ‡çº¹+æ‹ç…§ å›žæ‰§ ç¦»å¼€ç­¾è¯ä¸­å¿ƒæ—¶ï¼Œä½ æ‰‹é‡Œåº”è¯¥æœ‰ï¼š ç¼´è´¹å›žæ‰§ï¼ˆä¸Šå«å—ç†å·ï¼‰ ä¸€å¼ æŠ¤ç…§é¦–é¡µå¤å°ä»¶ï¼ˆä¸Šå«å—ç†å·ï¼‰ å…¶ä»–æ–‡ä»¶åŽŸä»¶ï¼ˆå¦‚æˆ·å£æœ¬ã€æˆ¿äº§è¯ç­‰ï¼‰ å¿«é€’å•ç…§ç‰‡ï¼ˆæ²¡æœ‰åŽŸä»¶ï¼‰ åç­‰å¿«é€’ æäº¤å®Œæ‰€æœ‰èµ„æ–™åŽï¼Œä½ åªéœ€è¦åœ¨å®¶ç­‰å¾…ç­¾è¯çš„å¿«é€’ï¼Œæ˜¯å¦é€šè¿‡ï¼Œå·²ç»ç”±ä¸å¾—ä½ äº†ã€‚ æŸ¥è¯¢è¿›åº¦ å¯ä»¥ç™»é™†è¥¿ç­ç‰™ç­¾è¯ç”³è¯·ä¸­å¿ƒå®˜ç½‘ï¼Œé€šè¿‡å—ç†å·åœ¨çº¿æŸ¥è¯¢æ‚¨çš„ç”³è¯· åœ¨èŒè¯æ˜Žæ¨¡ç‰ˆ åœ¨èŒè¯æ˜Žéœ€è¦æœ‰å…¬å¸åç§°ã€åœ°å€ã€ç”µè¯å¹¶åŠ ç›–å…¬ç«  ä¸­æ–‡ å…¹è¯æ˜Žå¼ ä¸‰ï¼ŒæŠ¤ç…§å·ï¼šE12345678ï¼Œè‡ªxxxx/xx/xxæ—¥å…¥èŒè‡³ä»Šï¼ŒçŽ°åœ¨æˆ‘å¸ä»»èŒxxxï¼Œæœˆæ”¶å…¥ç¨Žå‰äººæ°‘å¸ï¼šxxxxå…ƒï¼Œå¤§å†™ï¼š xxxxã€‚ç»å…¬å¸æ‰¹å‡†ï¼Œä»–å°†äºŽxxxx/xx/xxè‡³xxxx/xx/xxä¼‘å‡ã€‚æ—…è¡ŒæœŸé—´çš„è´¹ç”¨ç”±ä»–æœ¬äººæ‰¿æ‹…ã€‚ ä»–çš„å‡æœŸæœŸé—´ï¼Œæˆ‘å…¬å¸å°†ä¿ç•™ä»–çš„èŒåŠ¡ã€‚è´µå¤„å¦‚éœ€è¦å…¶ä»–ä¿¡æ¯ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚å¦‚æžœä»–çš„ç­¾è¯ç”³è¯·èƒ½é¡ºåˆ©é€šè¿‡ï¼Œæˆ‘ä»¬å°†éžå¸¸æ„Ÿæ¿€ã€‚ è‹±æ–‡ Employment Certificate To Spain Visa Application Center: This is to certify that SAN ZHANG(Passport No.: E12345678) works for xxxxxxxx Co., Ltd. Since xxxx/xx/xx till present. He has been allowed for a leave from xxxx/xx/xx to xxxx/xx/xx. His position is xxxxxxxx and average monthly pre-tax salary is xxxxx RMB. All costs relating to his trip will be covered by himself. We will keep his position during his leave. Meanwhile, we guarantee that during this trip he will abide laws of your country and be back as scheduled. If any other information is needed, please feel free to contact us. It will be grateful if his visa is issued successfully. æœ€åŽï¼Œç¥å›å¥½è¿]]></content>
      <categories>
        <category>æ—…è¡Œ</category>
      </categories>
      <tags>
        <tag>æ—…è¡Œ</tag>
        <tag>visa</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openstackå®‰å…¨ç»„åŸºäºŽovsçš„å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fpost%2F9b8e4f01.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦ä»‹ç»Openstackçš„å®‰å…¨ç»„åœ¨è§„åˆ™åŠå…¶åœ¨ovsçš„æµè¡¨ä¸­çš„ä½“çŽ°ã€‚ å®žéªŒåŸºäºŽopenstackçš„steinç‰ˆæœ¬ï¼Œdevstackå®‰è£…ï¼Œé‡‡ç”¨äº†ovsä½œä¸ºè™šæ‹Ÿäº¤æ¢æœºã€‚æè¿°Openflowåœ¨Openstackå®‰å…¨ç»„ä¸­çš„åº”ç”¨åˆ†æžã€‚å®žéªŒçŽ¯å¢ƒä»¥Ubuntu 18.04.3 LTSæ­å»º Openstackå®‰å…¨ç»„ 1. å®‰å…¨ç»„ åœ¨Openstackä¸­ï¼Œå®‰å…¨ç»„æ˜¯åšå“¦é‚£ä¸ªåœ¨neutron portä¸Šçš„ä¸€ç»„ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥å¯ä»¥ç†è§£ä¸ºä¸€äº›é˜²ç«å¢™çš„è§„åˆ™é›†åˆã€‚ 2. å®‰å…¨ç»„çš„å®žçŽ° Openstackä¸­çš„å®‰å…¨ç»„çš„å®žçŽ°æœ‰ä»¥ä¸‹é›†ä¸­ï¼š ovs + iptables + connection track ovs + openflow + connection track linuxbridge + iptables + connection track ç”±äºŽæœ¬æ–‡å®žéªŒçŽ¯å¢ƒåŸºäºŽdevstackï¼ˆsteinï¼‰ï¼Œå› æ­¤ï¼Œä»…åŸºäºŽç¬¬äºŒç§æƒ…å†µè¿›è¡Œè¯´æ˜Ž å®žéªŒå‡†å¤‡ 1. åˆ›å»ºé¡¹ç›®åŠç”¨æˆ·ï¼ˆéžå¿…é¡»ï¼‰ åˆ›å»ºä¸€ä¸ªtestçš„projectå’Œuser 123$ openstack project create --domain default --description "Security Group Test Project" test$ openstack user create --domain default --password-prompt test$ openstack role add --project test --user test admin 2. æŸ¥çœ‹testç§Ÿæˆ·çš„é»˜è®¤å®‰å…¨ç»„ä¸‹çš„è§„åˆ™ ä»¥testç”¨æˆ·ç™»é™†openstackçš„dashboardï¼Œåœ¨ç½‘ç»œ &gt; å®‰å…¨ç»„ ä¸‹æ‰¾åˆ°defaultå®‰å…¨ç»„ï¼ŒæŸ¥çœ‹å¯¹åº”çš„è§„åˆ™ å®‰å…¨ç»„å®žéªŒ éœ€è¦äº‹å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºç¤ºä¾‹ï¼Œé»˜è®¤å…³è”defaultçš„å®‰å…¨ç»„ 0. èŽ·å–ä¸€äº›ä¿¡æ¯ ç«¯å£ID 123456$ openstack port list+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------------------------------+--------+| ID | Name | MAC Address | Fixed IP Addresses | Status |+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------------------------------+--------+| 41ca5359-2edc-4d74-8321-5883ecb618c5 | | fa:16:3e:fa:fd:13 | ip_address='192.168.233.49', subnet_id='ef4d1362-24b5-4d01-8748-ffe9cc2ca2e5' | ACTIVE |+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------------------------------+--------+ åˆ›å»ºäº†ä¸€ä¸ªIDä¸º41ca5359-2edc-4d74-8321-5883ecb618c5çš„portï¼Œåˆ†é…IPåœ°å€ä¸º192.168.233.49 æŽ¥å£åç§° 123456789101112$ ovs-vsctl show... Bridge br-int Controller "tcp:127.0.0.1:6633" is_connected: true ... Port "tap41ca5359-2e" tag: 3 Interface "tap41ca5359-2e" ... å¯¹åº”çš„åˆ›å»ºäº†ä¸€ä¸ªtap41ca5359-2eçš„æŽ¥å£ 1. åˆ›å»ºä¸€æ¡ingressçš„è§„åˆ™ é€šè¿‡Dashboardåœ¨defaultçš„å®‰å…¨ç»„ä¸‹åˆ›å»ºä¸€æ¡ingressçš„è§„åˆ™ï¼Œremote-ipä¸º199.0.0.0/24ï¼Œåè®®ä¸ºtcpï¼Œç›®çš„ç«¯å£ä¸º80 æŸ¥çœ‹br-intæµè¡¨ br-intä¸‹çš„æµè¡¨éžå¸¸çš„å¤šï¼Œå¯ä»¥ä½¿ç”¨è¿‡æ»¤è§„åˆ™è¿›è¡ŒåŒ¹é… 123$ ovs-ofctl dump-flows br-int | grep 199.0.0.0 cookie=0xd9177c011dbdf439, duration=98.493s, table=82, n_packets=0, n_bytes=0, idle_age=98, priority=77,ct_state=+est-rel-rpl,tcp,reg5=0xe,nw_src=199.0.0.0/24,tp_dst=80 actions=output:14 cookie=0xd9177c011dbdf439, duration=98.493s, table=82, n_packets=0, n_bytes=0, idle_age=98, priority=77,ct_state=+new-est,tcp,reg5=0xe,nw_src=199.0.0.0/24,tp_dst=80 actions=ct(commit,zone=NXM_NX_REG6[0..15]),output:14,resubmit(,92) å¯ä»¥çœ‹åˆ°ï¼Œå…±æ–°å¢žäº†ä¸¤æ¡æµè¡¨ 3. åˆ›å»ºä¸€æ¡egressçš„è§„åˆ™ åŒæ ·ä»¥remote-ipä¸º199.0.0.0/24ï¼Œåè®®ä¸ºtcpï¼Œç›®çš„ç«¯å£ä¸º80çš„å‚æ•°åˆ›å»ºegressè§„åˆ™ æŸ¥çœ‹æµè¡¨çœ‹åˆ°æ–°å¢žäº†å¦‚ä¸‹ä¸¤æ¡ï¼š 12cookie=0xd9177c011dbdf439, duration=19.261s, table=72, n_packets=0, n_bytes=0, idle_age=19, priority=77,ct_state=+est-rel-rpl,tcp,reg5=0xe,nw_dst=199.0.0.0/24,tp_dst=80 actions=resubmit(,73)cookie=0xd9177c011dbdf439, duration=19.261s, table=72, n_packets=0, n_bytes=0, idle_age=19, priority=77,ct_state=+new-est,tcp,reg5=0xe,nw_dst=199.0.0.0/24,tp_dst=80 actions=resubmit(,73) 4. æµè¡¨è§£è¯» 4.1 ingress stpe2ä¸­çš„æµè¡¨ï¼Œåˆ†åˆ«æŒ‡å®šäº†tcpåè®®ï¼Œnw_srcä¸º199.0.0.0/24ï¼Œtp_dstä¸º80 step2çš„actionï¼Œç¬¬ä¸€æ¡ä¸ºç›´æŽ¥ä»Ž14çš„æŽ¥å£é€å‡ºï¼Œç¬¬äºŒæ¡ä¸ºé‡å®šå‘åˆ°äº†92 å…ˆæ¥çœ‹çœ‹IDä¸º14çš„æŽ¥å£æ˜¯å“ªä¸ªï¼Ÿä¸å‡ºæ‰€æ–™ï¼Œè‡ªç„¶æ˜¯tap41ca5359-2eçš„æŽ¥å£ 123456789$ ovs-ofctl show br-int... 14(tap41ca5359-2e): addr:fe:16:3e:fa:fd:13 config: 0 state: 0 current: 10MB-FD COPPER speed: 10 Mbps now, 0 Mbps max ... table 92 ä¸¢å¼ƒ 1cookie=0xd9177c011dbdf439, duration=3197934.551s, table=92, n_packets=0, n_bytes=0, priority=0 actions=drop ä»¥ä¸Šå¯çœ‹åˆ°ï¼Œæºåœ°å€ä¸º199.0.0.0/24ï¼Œç›®çš„ç«¯å£ä¸º80çš„TCPæŠ¥æ–‡å¤§å¤šæ•°æƒ…å†µå°†é€å¾€tap41ca5359-2eçš„æŽ¥å£ 4.2 egress step3ä¸­çš„æµè¡¨ï¼Œåˆ™åˆ†åˆ«æŒ‡å®šäº†tcpåè®®ï¼Œnw_dstä¸º199.0.0.0/24ï¼Œtp_dstä¸º80 step3çš„actionåˆ™é€å¾€äº†73çš„tableï¼Œè€Œ73åˆ™éžå¸¸å¤æ‚ï¼Œåˆæ¶‰åŠåˆ°äº†81ï¼Œ91ï¼Œ94çš„table 123456789101112131415cookie=0xd9177c011dbdf439, duration=1305.051s, table=73, n_packets=10, n_bytes=1345, priority=100,reg6=0x3,dl_dst=fa:16:3e:fa:fd:13 actions=load:0xe-&gt;NXM_NX_REG5[],resubmit(,81)cookie=0xd9177c011dbdf439, duration=1305.051s, table=73, n_packets=5, n_bytes=438, priority=90,ct_state=+new-est,ip,reg5=0xe actions=ct(commit,zone=NXM_NX_REG6[0..15]),resubmit(,91)cookie=0xd9177c011dbdf439, duration=1305.051s, table=73, n_packets=0, n_bytes=0, priority=90,ct_state=+new-est,ipv6,reg5=0xe actions=ct(commit,zone=NXM_NX_REG6[0..15]),resubmit(,91)cookie=0xd9177c011dbdf439, duration=3197929.613s, table=73, n_packets=0, n_bytes=0, priority=80,reg5=0x6 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197929.613s, table=73, n_packets=0, n_bytes=0, priority=80,reg5=0x3 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197929.613s, table=73, n_packets=0, n_bytes=0, priority=80,reg5=0x4 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197929.613s, table=73, n_packets=0, n_bytes=0, priority=80,reg5=0x7 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197929.613s, table=73, n_packets=0, n_bytes=0, priority=80,reg5=0x5 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197849.617s, table=73, n_packets=5, n_bytes=446, priority=80,reg5=0x9 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197849.617s, table=73, n_packets=2, n_bytes=180, priority=80,reg5=0x8 actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197817.084s, table=73, n_packets=11, n_bytes=778, priority=80,reg5=0xa actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197815.612s, table=73, n_packets=49080, n_bytes=5791412, priority=80,reg5=0xb actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197815.612s, table=73, n_packets=8, n_bytes=648, priority=80,reg5=0xc actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=1305.051s, table=73, n_packets=6, n_bytes=1078, priority=80,reg5=0xe actions=resubmit(,94)cookie=0xd9177c011dbdf439, duration=3197934.616s, table=73, n_packets=0, n_bytes=0, priority=0 actions=drop table 91 é‡å®šå‘åˆ°äº†94 1cookie=0xd9177c011dbdf439, duration=3197934.561s, table=91, n_packets=10, n_bytes=876, priority=1 actions=resubmit(,94) table 94 æ­£å¸¸è½¬å‘ 1cookie=0xd9177c011dbdf439, duration=3197934.572s, table=94, n_packets=49280, n_bytes=5803120, priority=1 actions=NORMAL table 81 é€å¾€tap41ca5359-2eçš„æŽ¥å£ 12345678910cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=3, n_bytes=126, priority=100,arp,reg5=0xe actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=100,icmp6,reg5=0xe,icmp_type=130 actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=100,icmp6,reg5=0xe,icmp_type=135 actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=100,icmp6,reg5=0xe,icmp_type=136 actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=2, n_bytes=729, priority=95,udp,reg5=0xe,tp_src=67,tp_dst=68 actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=95,udp6,reg5=0xe,tp_src=547,tp_dst=546 actions=output:"tap41ca5359-2e"cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=5, n_bytes=490, priority=90,ct_state=-trk,ip,reg5=0xe actions=ct(table=82,zone=NXM_NX_REG6[0..15])cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=90,ct_state=-trk,ipv6,reg5=0xe actions=ct(table=82,zone=NXM_NX_REG6[0..15])cookie=0xd9177c011dbdf439, duration=1305.051s, table=81, n_packets=0, n_bytes=0, priority=80,ct_state=+trk,reg5=0xe actions=resubmit(,82)cookie=0xd9177c011dbdf439, duration=3197934.606s, table=81, n_packets=0, n_bytes=0, priority=0 actions=drop ç”±ä¸Šå¯çœ‹åˆ°ï¼Œé€å¾€199.0.0.0/24ï¼Œç›®çš„ç«¯å£ä¸º80çš„TCPæŠ¥æ–‡å¤§å¤šæ•°æƒ…å†µå°†æ­£å¸¸è½¬å‘å‡ºåŽ»]]></content>
      <categories>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>ovs</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxè™šæ‹Ÿç½‘ç»œå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fpost%2F575b6208.html</url>
    <content type="text"><![CDATA[Linuxè™šæ‹Ÿç½‘ç»œæ˜¯è¿‘å‡ å¹´è™šæ‹ŸåŒ–åŠå®¹å™¨ç­‰æŠ€æœ¯çš„åŸºç¡€ï¼ŒæŽŒæ¡äº†è¿™äº›åŸºç¡€ï¼Œå¯ä»¥æ›´æ·±å…¥çš„ç†è§£openstackã€dockerçš„ç½‘ç»œåŠŸèƒ½ï¼Œä»¥åŠæµ‹è¯•è¿‡ç¨‹ä¸­çš„é—®é¢˜å®šä½ã€‚ æœ¬æ–‡é€šè¿‡å®žéªŒçš„æ–¹å¼å­¦ä¹ è¿™äº›è™šæ‹Ÿç½‘ç»œåŠŸèƒ½ï¼ŒåŒ…æ‹¬tapè®¾å¤‡ï¼Œveth pairï¼Œ bridgeåŠrouter çŽ¯å¢ƒå‡†å¤‡ æ³¨ï¼šæœ¬å®žéªŒåŸºäºŽUbuntu16.04 12$ apt install uml-utilities$ apt install bridge-utils tapè®¾å¤‡ Linuxçš„tun/tapé©±åŠ¨å®žçŽ°äº†è™šæ‹Ÿç½‘å¡çš„åŠŸèƒ½ï¼Œtunè¡¨ç¤ºè™šæ‹Ÿçš„æ˜¯ç‚¹å¯¹ç‚¹è®¾å¤‡ï¼Œtapè¡¨ç¤ºè™šæ‹Ÿçš„æ˜¯ä»¥å¤ªç½‘è®¾å¤‡ tapä½äºŽç½‘ç»œOSIæ¨¡åž‹çš„äºŒå±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ï¼Œtunä½äºŽç½‘ç»œçš„ä¸‰å±‚ã€‚ 1. åˆ›å»ºtap 12$ tunctl -t tap_test$ ifconfig tap_test 192.168.100.1/24 2. åˆ›å»ºnamespace 1$ ip netns add ns_test 3. è¿ç§»ç½‘å£åˆ°namespace 1$ ip link set tap_test netns ns_test è¿ç§»åŽï¼Œå¯¹åº”çš„ipä¼šæ²¡æœ‰ 4. è¿›å…¥namespaceå¹¶æŸ¥çœ‹æŽ¥å£ä¿¡æ¯ 12345678910$ ip netns exec ns_test /bin/bash$ ifconfig tap_test 192.168.50.1/24$ ifconfigtap_test Link encap:Ethernet HWaddr 76:71:70:f2:ac:f6 inet addr:192.168.50.1 Bcast:192.168.50.255 Mask:255.255.255.0 UP BROADCAST MULTICAST MTU:1500 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) veth pair Veth pairæ˜¯ä¸€å¯¹è™šæ‹Ÿç½‘å¡ï¼Œä»Žä¸€ä¸ªvethç½‘å¡å‘å‡ºçš„æ•°æ®åŒ…å¯ä»¥ç›´æŽ¥åˆ°è¾¾å®ƒçš„peer vethã€‚ç›¸å½“äºŽä¸¤ä¸ªæŽ¥å£ä¹‹é—´æŽ¥ç€ä¸€æ ¹ç½‘çº¿ 1. åˆ›å»ºä¸¤ä¸ªns 12$ ip netns add ns1$ ip netns add ns2 2. åˆ›å»ºveth pair 1$ ip link add tap1 type veth peer name tap2 3. è¿ç§»ç½‘å£åˆ°namespace 12$ ip link set tap1 netns ns1$ ip link set tap2 netns ns2 4. åˆ†åˆ«ç»‘å®šIPåœ°å€ 12$ ip netns exec ns1 ifconfig tap1 192.168.40.1/24$ ip netns exec ns2 ifconfig tap2 192.168.40.2/24 5. æµ‹è¯•è¿žé€šæ€§ 1234$ ip netns exec ns1 ping 192.168.40.2PING 192.168.40.2 (192.168.40.2) 56(84) bytes of data.64 bytes from 192.168.40.2: icmp_seq=1 ttl=64 time=0.096 ms64 bytes from 192.168.40.2: icmp_seq=2 ttl=64 time=0.049 ms bridge ä¸¤ä¸ªnamespaceä¸­çš„ç½‘ç»œå¯ä»¥é€šè¿‡veth pairè®¿é—®ï¼Œä½†3ä¸ªä¹‹é—´ç”šè‡³å¤šä¸ªäº’é€šï¼Œveth pairå°±æ— æ³•èƒœä»»ï¼Œæ­¤æ—¶éœ€è¦ç”¨åˆ°bridge/switch ä¸‹é¢çš„å®žéªŒæ¨¡æ‹Ÿ4ä¸ªnamespaceä¸­çš„æŽ¥å£é€šè¿‡bridgeäº’é€š 1. åˆ›å»ºveth pair 1234$ ip link add tap1 type veth peer name tap1_peer$ ip link add tap2 type veth peer name tap2_peer$ ip link add tap3 type veth peer name tap3_peer$ ip link add tap4 type veth peer name tap4_peer 2. åˆ›å»ºnamespaceå¹¶è¿ç§»tapæŽ¥å£ 123456789$ ip netns add ns1$ ip netns add ns2$ ip netns add ns3$ ip netns add ns4# è¿ç§»tapæŽ¥å£$ ip link set tap1 netns ns1$ ip link set tap2 netns ns2$ ip link set tap3 netns ns3$ ip link set tap4 netns ns4 3. åˆ›å»ºbridge 1$ brctl addbr br1 4. å°†å¯¹åº”çš„tapæ·»åŠ åˆ°bridgeä¸­ 1234$ brctl addif br1 tap1_peer$ brctl addif br1 tap2_peer$ brctl addif br1 tap3_peer$ brctl addif br1 tap4_peer 5. é…ç½®IPåœ°å€ 1234$ ip netns exec ns1 ifconfig tap1 192.168.50.1/24$ ip netns exec ns2 ifconfig tap2 192.168.50.2/24$ ip netns exec ns3 ifconfig tap3 192.168.50.3/24$ ip netns exec ns4 ifconfig tap4 192.168.50.4/24 æ³¨ï¼š æ­¤æ—¶æ˜¯æ— æ³•ç›¸äº’è®¿é—® 6. è®¾ç½®ç½‘æ¡¥åŠå¯¹åº”æŽ¥å£çŠ¶æ€ä¸ºup 12345$ ifconfig br1 up$ ifconfig tap1_peer up$ ifconfig tap2_peer up$ ifconfig tap3_peer up$ ifconfig tap4_peer up 7. æµ‹è¯•è¿žé€šæ€§ 12345678910111213141516$ ip netns exec ns4 ping 192.168.50.1 -c 1PING 192.168.50.1 (192.168.50.1) 56(84) bytes of data.64 bytes from 192.168.50.1: icmp_seq=1 ttl=64 time=0.095 ms--- 192.168.50.1 ping statistics ---1 packets transmitted, 1 received, 0% packet loss, time 0msrtt min/avg/max/mdev = 0.095/0.095/0.095/0.000 ms$ ip netns exec ns4 ping 192.168.50.2 -c 1PING 192.168.50.2 (192.168.50.2) 56(84) bytes of data.64 bytes from 192.168.50.2: icmp_seq=1 ttl=64 time=0.106 ms--- 192.168.50.2 ping statistics ---1 packets transmitted, 1 received, 0% packet loss, time 0msrtt min/avg/max/mdev = 0.106/0.106/0.106/0.000 ms... router æ³¨ï¼šLinuxé»˜è®¤ä¸å¼€å¯è½¬å‘åŠŸèƒ½ï¼Œå®žéªŒå‰éœ€è¦å…ˆæ‰“å¼€ ä¿®æ”¹/etc/sysctl.confæ–‡ä»¶ï¼Œè®¾ç½®net.ipv4.ip_forward=1ï¼Œé‡å¯ç”Ÿæ•ˆ ä¸´æ—¶ä¿®æ”¹ï¼š echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward 1. åˆ›å»ºveth pair 12$ ip link add tap5 type veth peer name tap5_peer$ ip link add tap6 type veth peer name tap6_peer 2. åˆ›å»ºnamespaceå¹¶è¿ç§»tapæŽ¥å£ 1234$ ip netns add ns5$ ip netns add ns6$ ip link set tap5 netns ns5$ ip link set tap6 netns ns6 3. é…ç½®IPåœ°å€ 1234$ ifconfig tap5_peer 192.168.100.1/24$ ifconfig tap6_peer 192.168.200.1/24$ ip netns exec ns5 ifconfig tap5 192.168.100.2/24$ ip netns exec ns6 ifconfig tap6 192.168.200.2/24 4. ä¸ºnamespaceé…ç½®è·¯ç”± 12$ ip netns exec ns5 route add -net 192.168.200.0/24 gw 192.168.100.1$ ip netns exec ns6 route add -net 192.168.100.0/24 gw 192.168.200.1 5. æµ‹è¯• 1234$ ip netns exec ns5 ping 192.168.200.2PING 192.168.200.2 (192.168.200.2) 56(84) bytes of data.64 bytes from 192.168.200.2: icmp_seq=1 ttl=63 time=0.077 ms64 bytes from 192.168.200.2: icmp_seq=2 ttl=63 time=0.087 ms tun tunåº”è¯¥æ˜¯tunnelçš„ç¼©å†™ï¼Œå¯ç”¨äº†IPå±‚éš§é“åŠŸèƒ½ LinuxåŽŸç”Ÿæ”¯æŒ5ç§éš§é“{ ipip | gre | sit | isatap | vti } å¿½ç•¥ä¸Šå›¾ä¸­çš„tun1å’Œtun2åŽï¼Œæ•´ä¸ªtopoä¸Žrouterä¸­çš„ä¸€æ ·ã€‚é‚£ä¹ˆå…ˆæŒ‰ç…§routerç« èŠ‚åˆ›å»ºä¸¤ä¸ªnsåŠé…ç½® 1. åˆ›å»ºveth pairå¹¶åˆ†åˆ«è¿ç§»åˆ°å¯¹åº”çš„namespace 123456$ ip link add tap1 type veth peer name tap1_peer$ ip link add tap2 type veth peer name tap2_peer$ ip netns add ns1$ ip netns add ns2$ ip link set tap1 netns ns1$ ip link set tap2 netns ns2 2. é…ç½®IPå’Œè·¯ç”± 123456$ ifconfig tap1_peer 192.168.100.1/24$ ifconfig tap2_peer 192.168.200.1/24$ ip netns exec ns1 ifconfig tap1 192.168.100.2/24$ ip netns exec ns2 ifconfig tap2 192.168.200.2/24$ ip netns exec ns1 route add -net 192.168.200.0/24 gw 192.168.100.1$ ip netns exec ns2 route add -net 192.168.100.0/24 gw 192.168.200.1 3. åœ¨ns1ä¸­åˆ›å»ºtun1 1234567891011121314151617181920$ ip netns exec ns1 ip tunnel add tun1 mode ipip remote 192.168.200.2 local 192.168.100.2 ttl 255$ ip netns exec ns1 ip addr add 192.168.50.10 peer 192.168.60.10 dev tun1$ ip netns exec ns1 ifconfig tun1 up$ ip netns exec ns1 ifconfigtap1 Link encap:Ethernet HWaddr 46:a0:97:02:8c:07 inet addr:192.168.100.2 Bcast:192.168.100.255 Mask:255.255.255.0 inet6 addr: fe80::44a0:97ff:fe02:8c07/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:12 errors:0 dropped:0 overruns:0 frame:0 TX packets:12 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:928 (928.0 B) TX bytes:928 (928.0 B)tun1 Link encap:IPIP Tunnel HWaddr inet addr:192.168.50.10 P-t-P:192.168.60.10 Mask:255.255.255.255 UP POINTOPOINT RUNNING NOARP MTU:1480 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) 4. åœ¨ns2ä¸­åˆ›å»ºtun2 1234567891011121314151617181920$ ip netns exec ns2 ip tunnel add tun2 mode ipip remote 192.168.100.2 local 192.168.200.2 ttl 255$ ip netns exec ns2 ip addr add 192.168.60.10 peer 192.168.50.10 dev tun2$ ip netns exec ns2 ifconfig tun2 up$ ip netns exec ns2 ifconfigtap2 Link encap:Ethernet HWaddr aa:2e:e9:18:94:95 inet addr:192.168.200.2 Bcast:192.168.200.255 Mask:255.255.255.0 inet6 addr: fe80::a82e:e9ff:fe18:9495/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:12 errors:0 dropped:0 overruns:0 frame:0 TX packets:12 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:928 (928.0 B) TX bytes:928 (928.0 B)tun2 Link encap:IPIP Tunnel HWaddr inet addr:192.168.60.10 P-t-P:192.168.50.10 Mask:255.255.255.255 UP POINTOPOINT RUNNING NOARP MTU:1480 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) 5. æµ‹è¯•tunçš„è¿žé€šæ€§ 1234$ ip netns exec ns1 ping 192.168.60.10PING 192.168.60.10 (192.168.60.10) 56(84) bytes of data.64 bytes from 192.168.60.10: icmp_seq=1 ttl=64 time=0.333 ms... 6. æŠ“åŒ…çœ‹çœ‹ 123456789101112$ ip netns exec ns2 tcpdump -i tap2tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on tap2, link-type EN10MB (Ethernet), capture size 262144 bytes09:55:19.399964 IP 192.168.100.2 &gt; 192.168.200.2: IP 192.168.50.10 &gt; 192.168.60.10: ICMP echo request, id 17197, seq 1, length 64 (ipip-proto-4)09:55:19.400004 IP 192.168.200.2 &gt; 192.168.100.2: IP 192.168.60.10 &gt; 192.168.50.10: ICMP echo reply, id 17197, seq 1, length 64 (ipip-proto-4)...$ ip netns exec ns2 tcpdump -i tun2tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on tun2, link-type RAW (Raw IP), capture size 262144 bytes09:55:57.735663 IP 192.168.50.10 &gt; 192.168.60.10: ICMP echo request, id 17199, seq 1, length 6409:55:57.735685 IP 192.168.60.10 &gt; 192.168.50.10: ICMP echo reply, id 17199, seq 1, length 64... æ³¨ï¼šnamespaceä¸­æŠ“åŒ…å¯èƒ½ä¸ä¼šç«‹å³æ‰“å°åœ¨å±å¹•ä¸Š 7. æŸ¥çœ‹è·¯ç”±è¡¨é¡¹ 123456$ ip netns exec ns1 route -nKernel IP routing tableDestination Gateway Genmask Flags Metric Ref Use Iface192.168.60.10 0.0.0.0 255.255.255.255 UH 0 0 0 tun1192.168.100.0 0.0.0.0 255.255.255.0 U 0 0 0 tap1192.168.200.0 192.168.100.1 255.255.255.0 UG 0 0 0 tap1 å¯ä»¥çœ‹åˆ°ï¼Œns1ä¸­è‡ªåŠ¨åˆ›å»ºäº†ä¸€æ¡æŒ‡å‘192.168.60.10çš„è·¯ç”±ï¼Œä¸‹ä¸€è·³æ˜¯tun1 å°ç»“ Openstackçš„neutronç»„ä»¶æ­£æ˜¯åŸºäºŽè¿™äº›Linuxè™šæ‹Ÿç½‘ç»œåŠŸèƒ½å®žçŽ°äº†è™šæ‹Ÿæœºä¹‹é—´çš„ç½‘ç»œé€šé“ã€‚ å…¶ä¸­ï¼Œtapã€tunã€veth pairè¢«ç”¨äºŽbridgeä¹‹é—´çš„è¿žæŽ¥ã€bridgeä¸Žvmçš„è¿žæŽ¥ã€bridgeä¸Žrouterä¹‹é—´çš„è¿žæŽ¥ã€‚ è€Œbridgeæä¾›äºŒå±‚è½¬å‘åŠŸèƒ½ï¼Œrouteræä¾›ä¸‰å±‚è½¬å‘åŠŸèƒ½ã€‚]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker + ovsï¼ŒåŽŸæ¥å¦‚æ­¤ç®€å•]]></title>
    <url>%2Fpost%2F56e1f957.html</url>
    <content type="text"><![CDATA[ä¸€ç›´æ²¡æ•¢ä¸‹æ‰‹å°è¯•dockerçš„ç½‘ç»œä½¿ç”¨ovsï¼Œæ€»è§‰å¾—å¯èƒ½å¾ˆå¤æ‚ã€‚æ‰€ä»¥ï¼Œäººå¾€å¾€éƒ½æ˜¯è‡ªå·±æŠŠè‡ªå·±æ‹’ä¹‹é—¨å¤–çš„ã€‚ æˆ‘æ•´æ•´æŠ˜è…¾äº†ä¸€å¤©ï¼Œå®¹å™¨å†…ä»¥äºŒå±‚æ–¹å¼è®¿é—®å¤–éƒ¨çš„IPå§‹ç»ˆä¸é€šã€‚æœ€åŽå‘çŽ°åŽŸæ¥æ˜¯ç½‘å¡æ··æ‚æ¨¡å¼æƒ¹çš„ç¥¸ çŽ¯å¢ƒå‡†å¤‡ å®‰è£…docker åœ¨æˆ‘çš„å…¶ä»–åšæ–‡é‡Œæœ‰å›½å†…æºå®‰è£…dockerçš„å†…å®¹ï¼ŒåŽŸæ ·ç…§æ¬ 12345$ sudo apt-get update &amp;&amp; sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common$ curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -$ add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"$ apt update$ apt-get -y install docker-ce å®‰è£…ovs 1$ sudo apt-get install openvswitch-switch å®‰è£…ovs-docker ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œovs-dockerå®žé™…ä¸Šæ˜¯ä¸€ä¸ªshellè„šæœ¬ï¼Œå°è£…äº†ovså’Œdockerçš„ä¸€äº›æ“ä½œã€‚ 123$ cd /usr/bin$ wget https://raw.githubusercontent.com/openvswitch/ovs/master/utilities/ovs-docker$ chmod a+rwx ovs-docker å®žéªŒ ä¸¤ä¸ªdockerå®¹å™¨ç»è¿‡ovsç½‘æ¡¥è¿›è¡Œè®¿é—®åŠè®¿é—®å¤–éƒ¨ç½‘ç»œ å®¹å™¨äº’è®¿ åˆ›å»ºovsç½‘æ¡¥ 1$ ovs-vsctl add-br br0 åˆ›å»ºä¸¤ä¸ªå®¹å™¨ æ³¨ï¼šå®žéªŒä½¿ç”¨äº†busyboxçš„é•œåƒï¼Œéœ€è¦æå‰pullåˆ°æœ¬åœ° 12&gt; docker pull busybox&gt; 1$ docker run -it --net=none --privileged=true --name=h1 busybox åœ¨å¦å¤–ä¸€ä¸ªshellä¸­æ‰§è¡Œ 1$ docker run -it --net=none --privileged=true --name=h2 busybox æŸ¥çœ‹å½“å‰ç½‘ç»œ 12345678/ # ifconfiglo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) å¯ä»¥çœ‹åˆ°å½“å‰ä»…æœ‰ä¸€ä¸ªloopbackæŽ¥å£ è¿žæŽ¥å®¹å™¨åˆ°ç½‘æ¡¥ 12$ ovs-docker add-port br0 eth0 h1$ ovs-docker add-port br0 eth0 h2 é…ç½®IPåœ°å€ åˆ†åˆ«åœ¨ä¸¤ä¸ªdockerå®¹å™¨ä¸­é…ç½®eth0çš„IPåœ°å€ä¸ºåŒä¸€ä¸ªç½‘æ®µ h1 1$ ifconfig eth0 192.168.1.2 h2 1$ ifconfig eth0 192.168.1.3 æµ‹è¯•è¿žé€šæ€§ 1234$ ping 192.168.1.3PING 192.168.1.2 (192.168.1.3): 56 data bytes64 bytes from 192.168.1.3: seq=0 ttl=64 time=1.065 ms64 bytes from 192.168.1.3: seq=1 ttl=64 time=0.139 ms æ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å• è®¿é—®å¤–éƒ¨ç½‘ç»œ å½“æˆ‘è§£å†³äº†æ··æ‚æ¨¡å¼çš„é—®é¢˜ä¹‹åŽï¼ŒåŽŸæ¥ä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆç®€å• åœ¨å¤–éƒ¨å¦å¤–ä¸€ä¸ªPCä¸Šé…ç½®äº†192.168.1.1 ä¸ºbr0å¢žåŠ ç‰©ç†æŽ¥å£ 1$ ovs-vsctl add-port br0 ens192 æµ‹è¯• ä»Žå®¹å™¨ä¸­ping 192.168.1.1 1234$ ping 192.168.1.1PING 192.168.1.1 (192.168.1.1): 56 data bytes64 bytes from 192.168.1.1: seq=30 ttl=64 time=1.319 ms64 bytes from 192.168.1.1: seq=31 ttl=64 time=0.461 ms å¤§åŠŸå‘Šæˆ]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ovs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[k8sçŽ¯å¢ƒå®‰è£…ä¹‹å·®ç‚¹å„¿æˆ‘å°±æ”¾å¼ƒäº†]]></title>
    <url>%2Fpost%2Fd0b629f4.html</url>
    <content type="text"><![CDATA[å°è¯•äº†å¥½å‡ ç§æ–¹å¼ï¼Œæƒ³è¦å‡†å¤‡ä¸€ä¸ªk8sçš„å®žéªŒé›†ç¾¤ï¼Œéƒ½æˆ–å¤šæˆ–å°‘çš„é‡åˆ°äº†äº›é—®é¢˜ã€‚ä¸»è¦æ˜¯å› ä¸ºè¦å…¥é—¨ï¼Œæ‰€ä»¥è¦æ­ä¸€å¥—çŽ¯å¢ƒï¼Œä½†å› ä¸ºè¿˜æ²¡æœ‰å…¥é—¨ï¼Œæ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå°±ä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹ã€‚ åœ¨è¡Œå°†æ”¾å¼ƒä¹‹é™…ï¼ŒkubeaszæŒ½æ•‘äº†æˆ‘ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•å¦‚ä½•ç”¨kubeaszæ­å»ºä¸€ä¸ªallinoneçš„çŽ¯å¢ƒ çŽ¯å¢ƒå‡†å¤‡ å…¶å®žkubeaszçš„æ–‡æ¡£å†™çš„éžå¸¸ç®€å•ï¼Œå› ä¸ºæœ¬èº«æ­å»ºè¿‡ç¨‹å°±æ˜¯å¾ˆç®€å•ï¼Œå¯å‚çœ‹å®˜æ–¹æ–‡æ¡£ ä¸€å°Linuxè™šæ‹Ÿæœº(Ubuntu16.04 serveræˆ–CentOS 7 Minimal) å†…å­˜éœ€è¦2G ç¡¬ç›˜30G å®‰è£… ä¸‹è½½æ–‡ä»¶ githubçš„è¯´æ˜Žæ–‡æ¡£æä¾›çš„ä¸‹è½½æ–¹å¼ï¼Œæˆ‘å…¶å®žéƒ½ç–‘æƒ‘äº†ï¼Œå› ä¸ºæœ‰ä¸€ä¸ª${release}ï¼Œå¹¶éžå¼€ç®±å³é£Ÿã€‚å¯ä»¥è¿™æ ·åš 1git clone https://github.com/easzlab/kubeasz.git éšåŽï¼Œè¿›å…¥kubeaszç›®å½•ï¼Œä½¿ç”¨å·¥å…·è„šæœ¬ä¸‹è½½ 12$ cd kubeasz$ bash tools/easzup -D å®‰è£… ä¸‹é¢å°±æ˜¯æŒ‰éƒ¨å°±ç­çš„è¿è¡Œäº†ï¼Œæ³¨æ„ï¼Œä½ ä¹Ÿä¸éœ€è¦æå‰å®‰è£…dockerï¼Œæ‰€æœ‰çš„éƒ½æ˜¯è‡ªåŠ¨ä¸‹è½½åŠå®‰è£…çš„ å®¹å™¨åŒ–è¿è¡Œ kubeasz 1$ bash tools/easzup -S ä½¿ç”¨é»˜è®¤é…ç½®å®‰è£… aio é›†ç¾¤ 1$ docker exec -it kubeasz easzctl start-aio å¦‚é‡åˆ°å¤±è´¥ï¼Œå¯å†æ¬¡å°è¯•æ‰§è¡Œ éªŒè¯å®‰è£… 12345$ kubectl version # éªŒè¯é›†ç¾¤ç‰ˆæœ¬ $ kubectl get componentstatus # éªŒè¯ scheduler/controller-manager/etcdç­‰ç»„ä»¶çŠ¶æ€$ kubectl get node # éªŒè¯èŠ‚ç‚¹å°±ç»ª (Ready) çŠ¶æ€$ kubectl get pod --all-namespaces # éªŒè¯é›†ç¾¤podçŠ¶æ€ï¼Œé»˜è®¤å·²å®‰è£…ç½‘ç»œæ’ä»¶ã€corednsã€metrics-serverç­‰$ kubectl get svc --all-namespaces # éªŒè¯é›†ç¾¤æœåŠ¡çŠ¶æ€ ç™»é™†dashboard å®‰è£…å®ŒæˆåŽï¼Œdashboardå·²ç»å‡†å¤‡å¥½äº†ï¼Œåªéœ€è¦èŽ·å–ç™»é™†æ–¹å¼å³å¯ã€‚ æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ï¼Œç™»é™†dashboardæœ‰å¥½å‡ ç§æ–¹å¼ï¼Œé€‰æ‹©ä¸€ç§å³å¯ã€‚å¦‚tokenæ–¹å¼ èŽ·å–port æŒ‰ç…§ä»¥ä¸Šæ–¹å¼å®‰è£…å®ŒæˆåŽï¼Œé»˜è®¤çš„portåº”è¯¥æ˜¯34980ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥è®¿é—®https://å½“å‰IP:34980ï¼Œå³å¯ç™»é™†dashboard ä¹Ÿå¯ä»¥æŸ¥çœ‹dashboardçš„ç«¯å£å¼€æ”¾çŠ¶å†µ 12345678kubectl get svc --all-namespacesNAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEdefault kubernetes ClusterIP 10.68.0.1 &lt;none&gt; 443/TCP 30mkube-system heapster ClusterIP 10.68.91.148 &lt;none&gt; 80/TCP 114skube-system kube-dns ClusterIP 10.68.0.2 &lt;none&gt; 53/UDP,53/TCP,9153/TCP 2m20skube-system kubernetes-dashboard NodePort 10.68.23.76 &lt;none&gt; 443:34980/TCP 118skube-system metrics-server ClusterIP 10.68.29.183 &lt;none&gt; 443/TCP 2m13skube-system traefik-ingress-service NodePort 10.68.226.239 &lt;none&gt; 80:23456/TCP,8080:38858/TCP 105s èŽ·å–token æŸ¥çœ‹å¦‚ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ 1$ ls /etc/ansible/manifests/dashboard/admin-user-sa-rbac.yaml èŽ·å–token 1234567$ kubectl apply -f /etc/ansible/manifests/dashboard/admin-user-sa-rbac.yaml...====ca.crt: 1350 bytesnamespace: 11 bytestoken: eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLWRoNjYyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJmZDdjZjc4Mi1hOTM0LTExZTktOTA1Zi0wMDBjMjlhMzc1YmYiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.KXFNuuibxRpF7AJHZBRkGgvpiVl4axfGA0A8haLIR3coX0HHPrQph8sO9GKl7C0KP6YXN-43VIxlpDXy-i_UkimxDJRVS08IW4r39Z4HhD-rKFYafQJROMrFG9lcbn1pZWTLBRGsO3lFCI1DyRDC7W_HSb63mgO2IoiQXGhgdhEWc7OnyNfxovkbtQA5xfsVqWqeWE-Dn4Jeo0lFe630I-iREMXPQvF5I7UNJFMJLCgFV0fG8J7__MYBf8xVnYL3ryaMBwKjQxQVsD3IOGS6TAk7RLZzjevySl-pXE1CcE8fosQQwJsOjOoKn5u1LGK3XUkIJR2rOf3jVMoQYYqe1Q è¸©è¿‡çš„å‘ nodeå‡ºäºŽNotReadyçŠ¶æ€ æŽ’æŸ¥æ€è·¯ æŸ¥çœ‹æœåŠ¡çŠ¶æ€åŠç›¸å…³é”™è¯¯ä¿¡æ¯ 1$ journalctl -f -u kubelet æœ€ç»ˆå‘çŽ°æˆ‘çš„å†…å­˜å› ä¸ºæ˜¯1Gå¯¼è‡´è¿è¡Œå¤±è´¥]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>Kubernetes</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pyenvä½¿ç”¨ç¬”è®°]]></title>
    <url>%2Fpost%2F72a09cbb.html</url>
    <content type="text"><![CDATA[OSXä¸Šçš„pythonç‰ˆæœ¬çº·ç¹å¤æ‚ã€‚ æœ‰ç³»ç»Ÿè‡ªå¸¦çš„: /System/Library/Frameworks/Python.framework/Versions/ æœ‰åŽæ¥å®‰è£…çš„: /Library/Frameworks/Python.framework/Versions/ ç»å¸¸æžä¸æ¸…æ¥šç”¨çš„æ˜¯å“ªé‡Œçš„pythonã€‚é‡åˆ°è¦å‡çº§pythonç‰ˆæœ¬ï¼Œåˆæå¿ƒåŠèƒ†çš„æ€•æŠŠç³»ç»Ÿçš„é‚£ä¸ªç»™æžæŒ‚äº†ã€‚äºŽæ˜¯ï¼Œä¾¿è¯•ç€ç”¨pyenvæ¥ç®¡ç†ç‰ˆæœ¬ å…³äºŽPyenv pyenvæ˜¯Pythonç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œèƒ½å¤Ÿä½¿ä½ è½»æ¾çš„åœ¨å¤šä¸ªpythonç‰ˆæœ¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢ pyenvå½“å‰åœ¨githubä¸Šæœ‰14kçš„å…³æ³¨é‡ å®‰è£…è¯´æ˜Žå‚çœ‹githubä¸Šçš„å®‰è£…æ–‡æ¡£ å¸¸ç”¨å‘½ä»¤ ä½¿ç”¨pyenv commandså¯ä»¥æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤æˆ–è€…é€šè¿‡pyenv -hæ¥æŸ¥çœ‹å¸¸ç”¨å‘½ä»¤ ç‰ˆæœ¬ç®¡ç† æŸ¥çœ‹å·²å®‰è£…çš„pythonç‰ˆæœ¬ 123$ pyenv versions* system (set by /Users/xxx/.pyenv/version) 3.7.0 æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬ 123456$ pyenv install -lAvailable versions: 2.1.3 2.2.3 ... stackless-3.5.4 å¯ä»¥çœ‹åˆ°ï¼Œå¯å®‰è£…çš„ç‰ˆæœ¬æœ‰python2, python3, activepython, anaconda, ironpython, jython, pypy, stackless, etc. å®‰è£…æŒ‡å®šç‰ˆæœ¬ 123456$ pyenv install 2.7.15python-build: use openssl from homebrewpython-build: use readline from homebrewInstalling Python-2.7.15...python-build: use readline from homebrewInstalled Python-2.7.15 to /Users/xxx/.pyenv/versions/2.7.15 æ³¨ï¼šMacä¸Šå®‰è£…å¯èƒ½ä¼šé‡åˆ°The Python zlib extension was not compiled. Missing the zlib?çš„é”™è¯¯ï¼Œå¯ä»¥å°è¯•CFLAGS=&quot;-I$(xcrun --show-sdk-path)/usr/include&quot; pyenv install 2.7.15 æ›´å¤šé”™è¯¯ï¼Œå¯æŸ¥çœ‹é¡¹ç›®çš„wikiä¸­çš„å¸¸è§é—®é¢˜ å®‰è£…å®Œæ¯•ä¸€ä¸ªpythonç‰ˆæœ¬åŽï¼Œéœ€è¦æ‰§è¡Œpyenv rehashæ¥æ›´æ–°åŽï¼Œæ‰èƒ½çœ‹åˆ°å·²å®‰è£…çš„ç‰ˆæœ¬ ä¼˜å…ˆçº§ å¯ä»¥ä¸ºå½“å‰ç›®å½•ã€å½“å‰shellä»¥åŠå…¨å±€è¿›è¡Œä¸åŒçš„pythonç‰ˆæœ¬å®šä¹‰ éµå¾ªshell&gt;local&gt;globalçš„ä¼˜å…ˆçº§é¡ºåº è®¾ç½®ç‰ˆæœ¬ 12$ pyenv global 2.7.15 #è®¾ç½®å…¨å±€ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¿¡æ¯è®°å½•åœ¨~/.pyenv/version$ pyenv local 3.7.0 #è®¾ç½®å½“å‰ç›®å½•çš„pythonç‰ˆæœ¬ï¼Œå°†åœ¨å½“å‰ç›®å½•ç”Ÿæˆ.python-versionæ–‡ä»¶ å½“éœ€è¦ä¸ºä¸€ä¸ªç›®å½•è®¾ç½®ç‰¹å®šçš„pythonç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥å…ˆè¿›å…¥è¯¥ç›®å½•ä¸‹æ‰§è¡Œpyenv local xxx å½“éœ€è¦ä¸ºè¯¥ç›®å½•ä¸‹çš„ä¸€ä¸ªå­ç›®å½•è®¾ç½®ç‰¹å®šçš„pythonç‰ˆæœ¬ï¼Œå¯è¿›å…¥è¯¥å­ç›®å½•è®¾ç½®local è®¾ç½®å®Œæ¯•åŽï¼Œä¼šåœ¨å“åº”çš„ç›®å½•ä¸‹ç”Ÿæˆ.python-versionçš„æ–‡ä»¶ ä½¿ç”¨æ—¶ï¼Œå°†ä»Žå½“å‰ç›®å½•å¼€å§‹æŸ¥æ‰¾ï¼Œå¦‚æžœä¸å­˜åœ¨.python-versionæ–‡ä»¶ï¼Œåˆ™å‘ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸ºæ­¢ å¦‚æžœåˆ°è·Ÿç›®å½•ä»»ç„¶æ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨globalçš„è®¾ç½® 1234$ pyenv shell 3.6.0 #ä¸ºå½“å‰shellè®¾ç½®pythonç‰ˆæœ¬ï¼Œå°†é€šè¿‡çŽ¯å¢ƒå˜é‡çš„æ–¹å¼è®¾ç½®$ env | grep PYENV_VERSIONPYENV_VERSION=2.7.15$ pyenv shell --unset # virtualenv é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…pyenvåŽä¼šå®‰è£…pyenv-virtualenvçš„æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡pyenv virtualenvåˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ æŸ¥çœ‹å·²æœ‰çš„virtualenv 123$ pyenv virtualenvs 3.7.0/envs/common3 (created from /Users/abc/.pyenv/versions/3.7.0) common3 (created from /Users/abc/.pyenv/versions/3.7.0) åˆ›å»ºvirtualenv 12345678910111213141516171819$ pyenv virtualenv 2.7.15 my2.7.15Collecting virtualenv Downloading https://files.pythonhosted.org/packages/8f/f1/c0b069ca6cb44f9681715232e6d3d65c75866dd231c5e4a88e80a46634bb/virtualenv-16.3.0-py2.py3-none-any.whl (2.0MB) 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2.0MB 117kB/sRequirement already satisfied: setuptools&gt;=18.0.0 in ./.pyenv/versions/2.7.15/lib/python2.7/site-packages (from virtualenv) (39.0.1)Installing collected packages: virtualenvSuccessfully installed virtualenv-16.3.0New python executable in /Users/abc/.pyenv/versions/2.7.15/envs/my2.7.15/bin/python2.7Also creating executable in /Users/abc/.pyenv/versions/2.7.15/envs/my2.7.15/bin/pythonInstalling setuptools, pip, wheel...done.Requirement already satisfied: setuptools in /Users/abc/.pyenv/versions/2.7.15/envs/my2.7.15/lib/python2.7/site-packagesRequirement already satisfied: pip in /Users/abc/.pyenv/versions/2.7.15/envs/my2.7.15/lib/python2.7/site-packages$ pyenv virtualenvs 2.7.15/envs/my2.7.15 (created from /Users/abc/.pyenv/versions/2.7.15) 3.7.0/envs/common3 (created from /Users/abc/.pyenv/versions/3.7.0) common3 (created from /Users/abc/.pyenv/versions/3.7.0) my2.7.15 (created from /Users/abc/.pyenv/versions/2.7.15) active &amp; deactive 123$ pyenv activate my2.7.15(my2.7.15) $(my2.7.15) $ pyenv deactivate åˆ é™¤virtualenv 12$ pyenv uninstall my2.7.15pyenv-virtualenv: remove /Users/abc/.pyenv/versions/2.7.15/envs/my2.7.15? Y Have Fun ðŸ˜„]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨å›½å†…èµ„æºï¼ˆå¤‡å¿˜ï¼‰]]></title>
    <url>%2Fpost%2F612ebe35.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒå®‰è£…Docker-CE docker.comè¶Šæ¥è¶Šéš¾è®¿é—®äº† å®‰è£…å¿…è¦å·¥å…· 1$ sudo apt-get update sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common å®‰è£…é˜¿é‡Œäº‘çš„GPGè¯ä¹¦ 1$ curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - æ·»åŠ è½¯ä»¶æº 1$ add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable" æ‹‰å–æ›´æ–° 1$ apt update å®‰è£…docker-ce 1$ apt-get -y install docker-ce ä½¿ç”¨é˜¿é‡Œäº‘çš„pipæº å®‰è£…pip 12$ curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py$ python get-pip.py ä¿®æ”¹pipæºä¸ºé˜¿é‡Œäº‘ï¼ˆæ°¸ä¹…ä¿®æ”¹ï¼‰ åœ¨ç”¨æˆ·æ ¹ç›®å½•åˆ›å»º .pip/pip.conf 12345[global]index-url = http://mirrors.aliyun.com/pypi/simple[install]trusted-host=mirrors.aliyun.com MACä½¿ç”¨æ¸…åŽhomebrewæº å¯ç›´æŽ¥è®¿é—®æ¸…åŽå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™èŽ·å– æ›¿æ¢çŽ°æœ‰çš„git 1234567$ cd "$(brew --repo)"$ git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git$ cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"$ git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git$ brew update]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>docker</tag>
        <tag>Linux</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04 VPPçŽ¯å¢ƒæ­å»º]]></title>
    <url>%2Fpost%2Fc80fffe0.html</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒ çŽ¯å¢ƒå‡†å¤‡ VmWareè™šæ‹ŸçŽ¯å¢ƒ Hostéœ€æ±‚ï¼š2cpuï¼Œ4Gå†…å­˜ï¼Œ3å—ç½‘å¡ Ubuntu16.04 æ‹“æ‰‘ æ­å»ºå…¸åž‹çš„c2sæ‹“æ‰‘ é€šè¿‡vsphereåˆ›å»ºä¸¤ä¸ªè™šæ‹Ÿäº¤æ¢æœº host1çš„ç¬¬äºŒä¸ªæŽ¥å£ä¸Žvppçš„ç¬¬äºŒä¸ªæŽ¥å£è¿žåœ¨åŒä¸€ä¸ªäº¤æ¢æœºä¸Š host2çš„ç¬¬äºŒä¸ªæŽ¥å£ä¸Žvppçš„ç¬¬ä¸‰ä¸ªæŽ¥å£è¿žåœ¨åŒä¸€ä¸ªäº¤æ¢æœºä¸Š VPPå®‰è£…å…ˆå†³æ¡ä»¶ Ubuntuå®‰è£…gitï¼ˆgité»˜è®¤å®‰è£…ï¼‰ Ubuntuå®‰è£…dpdkï¼Œå¹¶ç»‘å®šPCIçš„å¦å¤–ä¸¤ä¸ªæŽ¥å£åˆ°dpdk å®‰è£… å®˜æ–¹æ–‡æ¡£æä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼Œå¹¶ä¸”æŽ¨èä½¿ç”¨vagrantåŒ…ï¼Œç”±äºŽè¿™é‡Œä½¿ç”¨çš„æ˜¯è™šæ‹ŸçŽ¯å¢ƒï¼Œåˆ™ä½¿ç”¨ç›´æŽ¥å®‰è£…çš„æ–¹å¼ èŽ·å–æºç  1$ git clone https://gerrit.fd.io/r/vpp å®‰è£…vpp 1$ cd vpp Step1 å¯ä»¥å…ˆæ‰§è¡Œä¸€ä¸‹makeæŸ¥çœ‹å¯ä»¥æ‰§è¡Œå“ªäº›æ“ä½œ Step2 - make 12345678$ make build-release...by executing "make install-dep"Makefile:262: recipe for target '/root/vpp/build-root/.deps.ok' failedmake: *** [/root/vpp/build-root/.deps.ok] Error 1 å¦‚æžœé‡åˆ°ä»¥ä¸Šé”™è¯¯ï¼Œåˆ™æ„å‘³ç€ç¼ºå°‘ä¾èµ–åŒ… 1$ make install-dep ä¾èµ–åŒ…å®‰è£…å®ŒæˆåŽï¼Œå†æ¬¡æ‰§è¡Œmake build-release Step3 - Build debåŒ… 1$ make pkg-deb Step4 - å®‰è£…VPP packages 1$ dpkg -i /vpp/build-root/*.deb ä¸­é—´å¯èƒ½ä¼šé‡åˆ°vpp-api-pythonçš„é”™è¯¯ï¼Œä½¿ç”¨aptå®‰è£…åŽé‡æ–°å®‰è£…packages 1$ apt install vpp-api-python é…ç½® 123mkdir -p /etc/vppcp ./build-root/deb/debian/vpp/etc/vpp/startup.conf /etc/vpp/cp ./build-root/deb/debian/vpp/etc/sysctl.d/80-vpp.conf /etc/sysctl.d/ ä¿®æ”¹/etc/vpp/startup.conf 123456789101112131415161718192021222324252627282930313233343536unix &#123; nodaemon log /var/log/vpp/vpp.log full-coredump #cli-listen /run/vpp/cli.sock cli-listen 0.0.0.0:5002 gid vpp&#125;api-trace &#123; on&#125;api-segment &#123; gid vpp&#125;socksvr &#123; default&#125;cpu &#123; main-core 0 workers 2&#125;dpdk &#123; dev 0000:0b:00.0 &#123;num-rx-queues 2&#125; dev 0000:13:00.0 &#123;num-rx-queues 2&#125; num-mbufs 128000 socket-mem 1024,1024 &#125;plugins &#123; path /root/vpp/build-root/install-vpp-native/vpp/lib/vpp_plugins&#125; å¯åŠ¨VPP 1$ service vpp start æŸ¥çœ‹çŠ¶æ€ 123456789101112131415161718192021222324$ systemctl status vpp.serviceâ— vpp.service - vector packet processing engine Loaded: loaded (/lib/systemd/system/vpp.service; enabled; vendor preset: enabled) Active: active (running) since Thu 2018-11-15 16:00:09 CST; 4min 52s ago Process: 19959 ExecStopPost=/bin/rm -f /dev/shm/db /dev/shm/global_vm /dev/shm/vpe-api (code=exited, status=0/SUCCESS) Process: 19985 ExecStartPre=/sbin/modprobe uio_pci_generic (code=exited, status=0/SUCCESS) Process: 19981 ExecStartPre=/bin/rm -f /dev/shm/db /dev/shm/global_vm /dev/shm/vpe-api (code=exited, status=0/SUCCESS) Main PID: 19989 (vpp_main) Tasks: 6 Memory: 55.9M CPU: 9min 46.890s CGroup: /system.slice/vpp.service â””â”€19989 /usr/bin/vpp -c /etc/vpp/startup.confNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: nat_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: lb_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: gtpu_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: avf_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: acl_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: memif_test_plugin.soNov 15 16:00:09 fdio /usr/bin/vpp[19989]: load_one_vat_plugin:67: Loaded plugin: stn_test_plugin.soNov 15 16:00:09 fdio vpp[19989]: /usr/bin/vpp[19989]: dpdk: EAL init args: -c 7 -n 4 --huge-dir /run/vpp/hugepages --file-prefix vpp -w 0000:0b:00.0 -w 0000:13:00.0 --master-lcorNov 15 16:00:09 fdio /usr/bin/vpp[19989]: dpdk: EAL init args: -c 7 -n 4 --huge-dir /run/vpp/hugepages --file-prefix vpp -w 0000:0b:00.0 -w 0000:13:00.0 --master-lcore 0 --socketNov 15 16:00:10 fdio vnet[19989]: dpdk_ipsec_process:1015: not enough DPDK crypto resources, default to OpenSSL è™½ç„¶æœ‰è­¦å‘Šä¿¡æ¯ï¼Œä½†ä¼¼ä¹Žä¸å½±å“ä½¿ç”¨ æµ‹è¯• æ ¹æ®startup.confä¸­çš„é…ç½®ä¸åŒï¼Œé€‰æ‹©ä¸åŒçš„è¿žæŽ¥vppæ–¹å¼ ç™»é™†VPP CLI 123456789101112131415$ telnet 127.0.0.1 5002Trying 127.0.0.1...Connected to 127.0.0.1.Escape character is '^]'. _______ _ _ _____ ___ __/ __/ _ \ (_)__ | | / / _ \/ _ \ _/ _// // / / / _ \ | |/ / ___/ ___/ /_/ /____(_)_/\___/ |___/_/ /_/vpp# show interface Name Idx State MTU (L3/IP4/IP6/MPLS) Counter CountGigabitEthernet13/0/0 2 down 9000/0/0/0GigabitEthernetb/0/0 1 down 9000/0/0/0local0 0 down 0/0/0/0vpp# å¼€å¯ç«¯å£ 1234567891011121314vpp# set interface state GigabitEthernet13/0/0 upvpp# set interface state GigabitEthernetb/0/0 upvpp# show interface Name Idx State MTU (L3/IP4/IP6/MPLS) Counter CountGigabitEthernet13/0/0 2 up 9000/0/0/0 rx packets 1 rx bytes 60 drops 1 ip4 1GigabitEthernetb/0/0 1 up 9000/0/0/0 rx packets 4 rx bytes 240 drops 4 ip4 1local0 0 down 0/0/0/0vpp# é…ç½®ä¸ºswitchæ¨¡å¼ 12345vpp# set interface l2 bridge GigabitEthernet13/0/0 1vpp# set interface l2 bridge GigabitEthernetb/0/0 1vpp# show bridge-domain BD-ID Index BSN Age(min) Learning U-Forwrd UU-Flood Flooding ARP-Term BVI-Intf 1 1 0 off on on flood on off N/A æµ‹è¯•è¿žé€šæ€§ c2s Host1: 192.168.0.2/24 Host2: 192.168.0.3/24 é€šè¿‡host1 ping host2 é…ç½®loopbackå£æµ‹è¯•è¿žé€šæ€§ 123456789101112131415vpp# create loopback interfaceloop0vpp# set interface ip address loop0 192.168.0.1/24vpp# set interface state loop0 upvpp# set interface l2 bridge loop0 1 bvivpp# show bridge-domain BD-ID Index BSN Age(min) Learning U-Forwrd UU-Flood Flooding ARP-Term BVI-Intf 1 1 0 off on on flood on off loop0vpp# ping 192.168.0.2116 bytes from 192.168.0.2: icmp_seq=2 ttl=64 time=.8704 ms116 bytes from 192.168.0.2: icmp_seq=3 ttl=64 time=.2564 ms116 bytes from 192.168.0.2: icmp_seq=4 ttl=64 time=.2653 ms116 bytes from 192.168.0.2: icmp_seq=5 ttl=64 time=.3413 msStatistics: 5 sent, 4 received, 20% packet loss set interface l2 bridge loop0 1 bviä¸­çš„bviæ„å‘³ç€è¿™ä¸ªæŽ¥å£å°†ç”¨æ¥æŽ¥æ”¶ã€å‘é€ä»¥åŠè½¬å‘è¯¥bridge domainçš„æŠ¥æ–‡]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>vpp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04ä¸Šå®‰è£…DPDK]]></title>
    <url>%2Fpost%2F879abefb.html</url>
    <content type="text"><![CDATA[DPDKå®‰è£… DPDKï¼ˆData Plane Development Kitï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥è¿›è¡ŒåŒ…æ•°æ®å¤„ç†åŠ é€Ÿçš„è½¯ä»¶åº“ ä»ŽgitèŽ·å–æºç  1$ git clone git://dpdk.org/dpdk åˆ›å»ºçŽ¯å¢ƒå˜é‡ 1234$ cd ~/dpdk$ export RTE_SDK=`pwd`$ export DESTDIR=`pwd`$ export RTE_TARGET=x86_64-default-linuxapp-gcc å› ä¸ºè¿™äº›çŽ¯å¢ƒå˜é‡æ€»æ˜¯ä¼šç”¨åˆ°ï¼Œå¯ä»¥å°†å…¶æ”¾å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚env.sourceï¼Œä½¿ç”¨source env.source 123456$ cd ~/dpdk$ more env.sourceexport RTE_SDK=`pwd`export DESTDIR=`pwd`export RTE_TARGET=x86_64-default-linuxapp-gcc$ source env.source å¼€å§‹å®‰è£… ä½¿ç”¨dpdk-setup.shè„šæœ¬è¿›è¡Œå®‰è£… 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061./usertools/dpdk-setup.sh------------------------------------------------------------------------------ RTE_SDK exported as /root/dpdk---------------------------------------------------------------------------------------------------------------------------------------- Step 1: Select the DPDK environment to build----------------------------------------------------------[1] arm64-armv8a-linuxapp-clang[2] arm64-armv8a-linuxapp-gcc[3] arm64-dpaa2-linuxapp-gcc[4] arm64-dpaa-linuxapp-gcc[5] arm64-stingray-linuxapp-gcc[6] arm64-thunderx-linuxapp-gcc[7] arm64-xgene1-linuxapp-gcc[8] arm-armv7a-linuxapp-gcc[9] i686-native-linuxapp-gcc[10] i686-native-linuxapp-icc[11] ppc_64-power8-linuxapp-gcc[12] x86_64-native-bsdapp-clang[13] x86_64-native-bsdapp-gcc[14] x86_64-native-linuxapp-clang[15] x86_64-native-linuxapp-gcc[16] x86_64-native-linuxapp-icc[17] x86_x32-native-linuxapp-gcc---------------------------------------------------------- Step 2: Setup linuxapp environment----------------------------------------------------------[18] Insert IGB UIO module[19] Insert VFIO module[20] Insert KNI module[21] Setup hugepage mappings for non-NUMA systems[22] Setup hugepage mappings for NUMA systems[23] Display current Ethernet/Crypto device settings[24] Bind Ethernet/Crypto device to IGB UIO module[25] Bind Ethernet/Crypto device to VFIO module[26] Setup VFIO permissions---------------------------------------------------------- Step 3: Run test application for linuxapp environment----------------------------------------------------------[27] Run test application ($RTE_TARGET/app/test)[28] Run testpmd application in interactive mode ($RTE_TARGET/app/testpmd)---------------------------------------------------------- Step 4: Other tools----------------------------------------------------------[29] List hugepage info from /proc/meminfo---------------------------------------------------------- Step 5: Uninstall and system cleanup----------------------------------------------------------[30] Unbind devices from IGB UIO or VFIO driver[31] Remove IGB UIO module[32] Remove VFIO module[33] Remove KNI module[34] Remove hugepage mappings[35] Exit ScriptOption: Step1 æ ¹æ®è‡ªå·±çŽ¯å¢ƒé€‰æ‹©ç›¸åº”çš„buildï¼Œå¦‚æˆ‘æ˜¯64ä½çš„Intelæž¶æž„çš„çŽ¯å¢ƒï¼Œåˆ™é€‰æ‹©**[15]** 12345678...Installation in /root/dpdk/ complete------------------------------------------------------------------------------ RTE_TARGET exported as x86_64-native-linuxapp-gcc------------------------------------------------------------------------------Press enter to continue ... Step2 é€‰æ‹©**[18]**æ¥å®¶åœ¨å“ªé‡Œigb_uioæ¨¡å— é€‰æ‹©**[21]**æ¥åˆ›å»ºHugepageï¼Œè¿™é‡Œæˆ‘è¾“å…¥äº†128 é€‰æ‹©**[24]**æ¥ç»‘å®šPCIç½‘å¡ 123456789101112131415161718192021222324252627282930Option: 21Removing currently reserved hugepagesUnmounting /mnt/huge and removing directory Input the number of 2048kB hugepages Example: to have 128MB of hugepages available in a 2MB huge page system, enter '64' to reserve 64 * 2MB pagesNumber of pages: 128Reserving hugepagesCreating /mnt/huge and mounting as hugetlbfsPress enter to continue .........Option: 24......Other Compress devices======================&lt;none&gt;Enter PCI address of device to bind to IGB UIO driver: 0b:00.0Network devices using DPDK-compatible driver============================================0000:0b:00.0 'VMXNET3 Ethernet Controller 07b0' drv=igb_uio unused=vmxnet3,uio_pci_generic0000:13:00.0 'VMXNET3 Ethernet Controller 07b0' drv=igb_uio unused=vmxnet3,uio_pci_generic ç¡®è®¤éœ€è¦ä½¿ç”¨çš„PCIç½‘å¡ä¸ºdrv=igb_uioåˆ™è¯´æ˜Žç»‘å®šæˆåŠŸ Step3 - æµ‹è¯• 123456789101112131415161718192021Option: 27 Enter hex bitmask of cores to execute test app on Example: to execute app on cores 0 to 7, enter 0xffbitmask: 0x3Launching appsudo: x86_64-default-linuxapp-gcc/app/test: command not foundPress enter to continue ......Option: 28 Enter hex bitmask of cores to execute testpmd app on Example: to execute app on cores 0 to 7, enter 0xffbitmask: 0x3Launching appsudo: x86_64-default-linuxapp-gcc/app/testpmd: command not found æ‰§è¡Œ27å’Œ28éƒ½æœ‰å¯èƒ½æŠ¥é”™ï¼Œæç¤ºcommand not foundï¼Œæ­¤æ—¶ï¼Œå¯ä»¥å…ˆé€€å‡ºå®‰è£…è„šæœ¬ è¿›å…¥/dpdk/x86_64-native-linuxapp-gcc/appç›®å½•ï¼Œä¼šçœ‹åˆ°testpmdå­˜åœ¨äºŽç›®å½•ä¸‹ï¼Œè¿è¡Œæµ‹è¯•ï¼Œæ­£å¸¸çŠ¶å†µæ—¶ï¼Œä¼šå¦‚ä¸‹æ˜¾ç¤º 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859$ ./testpmdEAL: Detected 8 lcore(s)EAL: Detected 1 NUMA nodesEAL: Multi-process socket /var/run/dpdk/rte/mp_socketEAL: Probing VFIO support...EAL: PCI device 0000:03:00.0 on NUMA socket -1EAL: Invalid NUMA socket, default to 0EAL: probe driver: 15ad:7b0 net_vmxnet3EAL: PCI device 0000:0b:00.0 on NUMA socket -1EAL: Invalid NUMA socket, default to 0EAL: probe driver: 15ad:7b0 net_vmxnet3EAL: PCI device 0000:13:00.0 on NUMA socket -1EAL: Invalid NUMA socket, default to 0EAL: probe driver: 15ad:7b0 net_vmxnet3testpmd: create a new mbuf pool &lt;mbuf_pool_socket_0&gt;: n=203456, size=2176, socket=0testpmd: preferred mempool ops selected: ring_mp_mcConfiguring Port 0 (socket 0)...... TX queue: 0 TX desc=0 - TX free threshold=0 TX threshold registers: pthresh=0 hthresh=0 wthresh=0 TX offloads=0x0 - TX RS bit threshold=0Press enter to exitTelling cores to stop...Waiting for lcores to finish... ---------------------- Forward statistics for port 0 ---------------------- RX-packets: 57 RX-dropped: 0 RX-total: 57 TX-packets: 57 TX-dropped: 0 TX-total: 57 ---------------------------------------------------------------------------- ---------------------- Forward statistics for port 1 ---------------------- RX-packets: 57 RX-dropped: 0 RX-total: 57 TX-packets: 57 TX-dropped: 0 TX-total: 57 ---------------------------------------------------------------------------- +++++++++++++++ Accumulated forward statistics for all ports+++++++++++++++ RX-packets: 114 RX-dropped: 0 RX-total: 114 TX-packets: 114 TX-dropped: 0 TX-total: 114 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++Done.Shutting down port 0...Stopping ports...DoneClosing ports...DoneShutting down port 1...Stopping ports...DoneClosing ports...DoneBye... HugePageé—®é¢˜è§£å†³ é—®é¢˜ å½“è¿è¡Œæµ‹è¯•æ—¶æˆ–è€…testpmdï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ 12345678910111213141516$ ./testpmdEAL: Detected 8 lcore(s)EAL: Detected 1 NUMA nodesEAL: Multi-process socket /var/run/dpdk/rte/mp_socketEAL: No free hugepages reported in hugepages-2048kBEAL: No free hugepages reported in hugepages-2048kBEAL: FATAL: Cannot get hugepage information.EAL: Cannot get hugepage information.PANIC in main():Cannot init EAL5: [./testpmd(_start+0x29) [0x498829]]4: [/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7f8a0fee0830]]3: [./testpmd(main+0xc48) [0x48f528]]2: [./testpmd(__rte_panic+0xbb) [0x47eb09]]1: [./testpmd(rte_dump_stack+0x2b) [0x5c8a1b]]Aborted (core dumped) é—®é¢˜åŽŸå› åŠè§£å†³ è¿™è¯´æ˜ŽHugepageä¸å¤Ÿç”¨ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹ç³»ç»Ÿå†…å­˜çŠ¶å†µ 1234567$ cat /proc/meminfo | grep HugeAnonHugePages: 0 kBHugePages_Total: 665HugePages_Free: 0HugePages_Rsvd: 0HugePages_Surp: 537Hugepagesize: 2048 kB å¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œæ€»å…±æœ‰665ï¼Œå¤ªå°äº†ï¼Œä¸å¤Ÿç”¨ï¼Œéœ€è¦ä¿®æ”¹ç³»ç»Ÿç›¸å…³å†…å®¹ 12345678$ echo 2048 &gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages$ cat /proc/meminfo | grep HugeAnonHugePages: 0 kBHugePages_Total: 2048HugePages_Free: 1080HugePages_Rsvd: 0HugePages_Surp: 0Hugepagesize: 2048 kB æ³¨ å¦‚æžœç³»ç»Ÿé‡å¯æˆ–è€…é‡æ–°ç¼–è¯‘ï¼Œåˆ™è¯¥å€¼ä¼šè¢«é‡æ–°åˆ·æ–°ä¸ºé»˜è®¤å€¼ï¼Œéœ€è¦é‡æ–°è®¾ç½®]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>dpdk</tag>
        <tag>network</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OVSå­¦ä¹ ç¬”è®°â€”â€”å¸¸ç”¨å‘½ä»¤ç»ƒä¹ ]]></title>
    <url>%2Fpost%2F4c6bf73b.html</url>
    <content type="text"><![CDATA[æŽ§åˆ¶ç®¡ç† åˆ›å»ºç½‘æ¡¥ 1$ ovs-vsctl add-br testbr æŸ¥çœ‹ç½‘æ¡¥å’Œç«¯å£ 1234567$ ovs-vsctl showb66c0897-27c9-441a-9486-42cfb65a4649 Bridge testbr Port testbr Interface testbr type: internal ovs_version: "2.5.5" ç½‘æ¡¥ç«¯å£æ“ä½œ 12$ ovs-vsctl add-port br0 eth1$ ovs-vsctl del-port br0 eth1 æŸ¥çœ‹æµè¡¨ 123$ ovs-ofctl dump-flows testbrNXST_FLOW reply (xid=0x4): cookie=0x0, duration=364.789s, table=0, n_packets=0, n_bytes=0, idle_age=364, priority=0 actions=NORMAL æŽ§åˆ¶å™¨è®¾ç½® 123456789101112131415161718192021222324252627282930# è®¾ç½®æŽ§åˆ¶å™¨$ ovs-vsctl set-controller testbr tcp:10.180.9.62:6633$ ovs-vsctl showb66c0897-27c9-441a-9486-42cfb65a4649 Bridge testbr Controller "tcp:10.180.9.62:6633" Port testbr Interface testbr type: internal ovs_version: "2.5.5"# æŸ¥çœ‹æŽ§åˆ¶å™¨åˆ—è¡¨$ ovs-vsctl list controller_uuid : 2fe35662-3f4f-446b-9296-6f1eae38ba5econnection_mode : []controller_burst_limit: []controller_rate_limit: []enable_async_messages: []external_ids : &#123;&#125;inactivity_probe : []is_connected : truelocal_gateway : []local_ip : []local_netmask : []max_backoff : []other_config : &#123;&#125;role : otherstatus : &#123;sec_since_connect="4", state=ACTIVE&#125;target : "tcp:10.180.9.62:6633"# åˆ é™¤æŽ§åˆ¶å™¨$ ovs-vsctl del-controller testbr æŽ¥å£ç›¸å…³ 1234567891011121314$ ovs-ofctl dump-ports s1OFPST_PORT reply (xid=0x2): 3 ports port LOCAL: rx pkts=0, bytes=0, drop=94, errs=0, frame=0, over=0, crc=0 tx pkts=0, bytes=0, drop=0, errs=0, coll=0 port 1: rx pkts=124, bytes=8418, drop=0, errs=0, frame=0, over=0, crc=0 tx pkts=130, bytes=8898, drop=0, errs=0, coll=0 port 2: rx pkts=123, bytes=8340, drop=0, errs=0, frame=0, over=0, crc=0 tx pkts=130, bytes=8886, drop=0, errs=0, coll=0$ ovs-appctl dpif/showsystem@ovs-system: hit:318465 missed:735 s1: s1 65534/3: (internal) s1-eth1 1/2: (system) s1-eth2 2/1: (system) æµè¡¨ç±» æµè¡¨æ“ä½œ æŸ¥çœ‹æµè¡¨ 1234$ ovs-ofctl dump-flows s1NXST_FLOW reply (xid=0x4): cookie=0x0, duration=356.689s, table=0, n_packets=708, n_bytes=42480, idle_age=0, priority=65535,dl_dst=01:80:c2:00:00:0e,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x0, duration=356.699s, table=0, n_packets=94, n_bytes=7488, idle_age=346, priority=0 actions=CONTROLLER:65535 æ·»åŠ æ™®é€šæµè¡¨ 123456$ ovs-ofctl add-flow s1 in_port=1,actions=drop$ ovs-ofctl dump-flows s1NXST_FLOW reply (xid=0x4): cookie=0x0, duration=441.879s, table=0, n_packets=878, n_bytes=52680, idle_age=0, priority=65535,dl_dst=01:80:c2:00:00:0e,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x0, duration=2.861s, table=0, n_packets=0, n_bytes=0, idle_age=2, in_port=1 actions=drop cookie=0x0, duration=441.889s, table=0, n_packets=94, n_bytes=7488, idle_age=432, priority=0 actions=CONTROLLER:65535 æŒ‰ç…§åŒ¹é…åˆ é™¤æµè¡¨ 12345$ ovs-ofctl del-flows s1 "in_port=1"mininet&gt; sh ovs-ofctl dump-flows s1NXST_FLOW reply (xid=0x4): cookie=0x0, duration=521.249s, table=0, n_packets=1036, n_bytes=62160, idle_age=0, priority=65535,dl_dst=01:80:c2:00:00:0e,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x0, duration=521.259s, table=0, n_packets=94, n_bytes=7488, idle_age=511, priority=0 actions=CONTROLLER:65535 å¸¸ç”¨åŒ¹é…é¡¹ VLAN Tag 123456$ vs-ofctl add-flow s1 priority=401,in_port=1,dl_vlan=777,actions=output:2$ ovs-ofctl dump-flows s1NXST_FLOW reply (xid=0x4): cookie=0x0, duration=663.043s, table=0, n_packets=1318, n_bytes=79080, idle_age=0, priority=65535,dl_dst=01:80:c2:00:00:0e,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x0, duration=3.022s, table=0, n_packets=0, n_bytes=0, idle_age=3, priority=401,in_port=1,dl_vlan=777 actions=output:2 cookie=0x0, duration=663.053s, table=0, n_packets=94, n_bytes=7488, idle_age=653, priority=0 actions=CONTROLLER:65535 MAC 123456$ ovs-ofctl add-flow s3 in_port=1,dl_src=0a:f6:95:7e:c6:4a/0a:f6:95:7e:c6:4a,action=output:3$ ovs-ofctl add-flow s3 in_port=1,dl_dst=be:7c:6a:e9:e6:b1/be:7c:6a:e9:e6:b1,action=output:2$ sh ovs-ofctl dump-flows s3NXST_FLOW reply (xid=0x4): cookie=0x0, duration=69.067s, table=0, n_packets=0, n_bytes=0, idle_age=69, in_port=1,dl_src=0a:f6:95:7e:c6:4a/0a:f6:95:7e:c6:4a actions=output:3 cookie=0x0, duration=14.496s, table=0, n_packets=0, n_bytes=0, idle_age=14, in_port=1,dl_dst=be:7c:6a:e9:e6:b1/be:7c:6a:e9:e6:b1 actions=output:2 IP 12345678$ ovs-ofctl add-flow s3 ip,in_port=1,nw_src=192.168.0.0/16,action=drop$ ovs-ofctl add-flow s3 ip,in_port=1,nw_dst=192.168.0.0/16,action=drop$ ovs-ofctl dump-flows s3NXST_FLOW reply (xid=0x4): cookie=0x0, duration=119.033s, table=0, n_packets=119, n_bytes=7140, idle_age=0, priority=65535,dl_dst=01:80:c2:00:00:0e,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x0, duration=28.864s, table=0, n_packets=0, n_bytes=0, idle_age=28, ip,in_port=1,nw_src=192.168.0.0/16 actions=drop cookie=0x0, duration=10.036s, table=0, n_packets=0, n_bytes=0, idle_age=10, ip,in_port=1,nw_dst=192.168.0.0/16 actions=drop cookie=0x0, duration=119.057s, table=0, n_packets=90, n_bytes=7164, idle_age=109, priority=0 actions=CONTROLLER:65535 å…¶ä»– åŒ¹é…é¡¹ å…³é”®å­— æ¡ä»¶ ä¸¾ä¾‹ ä»¥å¤ªç½‘ç±»åž‹ dl_type in_port=1,dl_type=0x0806,actions=output:2 åè®®å· nw_proto æŒ‡å®šdl_type=0x0800æˆ–è€…ip ip,in_port=1,nw_proto=1,actions=output:2 TCP flags tcp_flags æŒ‡å®šTCP tcp,tcp_flags=ack,actions=output:2 ä¸€äº›é€Ÿè®°ç¬¦ é€Ÿè®°ç¬¦ åŒ¹é…é¡¹ ip dl_type=0x800 ipv6 dl_type=0x86dd icmp dl_type=0x0800,nw_proto=1 icmp6 dl_type=0x86dd,nw_proto=58 tcp dl_type=0x0800,nw_proto=6 tcp6 dl_type=0x86dd,nw_proto=6 udp dl_type=0x0800,nw_proto=17 udp6 dl_type=0x86dd,nw_proto=17 arp dl_type=0x0806 æŒ‡ä»¤åŠ¨ä½œï¼ˆactionsï¼‰ åŸºç¡€åŠ¨ä½œ åŠ¨ä½œ è¯´æ˜Ž ä¸¾ä¾‹ normal L2/L3å¤„ç† actions=normal output å‡ºæŽ¥å£ actions=output:2 group æŒ‡å®šçš„group actions=group:1 flood ä»Žæ‰€æœ‰ç‰©ç†æŽ¥å£è½¬å‘å‡ºåŽ»ï¼Œé™¤äº†å…¥æŽ¥å£å’Œå·²å…³é—­floodingçš„æŽ¥å£ actions=flood all ä»Žæ‰€æœ‰ç‰©ç†æŽ¥å£è½¬å‘å‡ºåŽ»ï¼Œé™¤äº†å…¥æŽ¥å£ actions=all local è½¬å‘ç»™æœ¬åœ°ç½‘æ¡¥ actions=local in_port ä»Žå…¥æŽ¥å£è½¬å‘å‡ºåŽ» actions=in_port controller ä»¥packet-inæ¶ˆæ¯ä¸Šé€ç»™æŽ§åˆ¶å™¨ actions=controller drop ä¸¢å¼ƒæ•°æ®åŒ… actions=drop ä¿®æ”¹VLAN ID å…³é”®å­—ï¼š mod_vlan_vid ä¸¾ä¾‹ 1$ ovs-ofctl add-flow s1 in_port=1,actions=mod_vlan_vid:1034,output:2 å‰¥é™¤VLAN å…³é”®å­—ï¼š strip_vlan ä¸¾ä¾‹ 1$ ovs-ofctl add-flow s1 in_port=1,actions=strip_vlan,output:2 å¼¹å‡ºæœ€å¤–å±‚VLAN å…³é”®å­—ï¼š pop_vlan ä¸¾ä¾‹ 1$ ovs-ofctl add-flow br0 in_port=1,dl_type=0x8100,dl_vlan=777,actions=pop_vlan,output:2 ä¿®æ”¹æº/ç›®çš„MAC å…³é”®å­—ï¼šmod_dl_src / mod_dl_dst ä¸¾ä¾‹ 12$ ovs-ofctl add-flow s1 in_port=1,actions=mod_dl_src:01:80:c2:00:00:0e,output:2$ ovs-ofctl add-flow s1 in_port=1,actions=mod_dl_dst:01:80:c2:00:00:0e,output:2 ä¿®æ”¹æº/ç›®çš„IP å…³é”®å­—ï¼š mod_nw_src/mod_nw_dst ä¸¾ä¾‹ 12$ ovs-ofctl add-flow s1 in_port=1,actions=mod_nw_src:192.168.0.10,output:2$ ovs-ofctl add-flow s1 in_port=1,actions=mod_nw_dst:192.168.0.10,output:2 ä¿®æ”¹TCP/UDPç«¯å£ å…³é”®å­—ï¼šmod_tp_src/mod_tp_dst ä¸¾ä¾‹ 1234$ ovs-ofctl add-flow s1 tcp,in_port=1,actions=mod_tp_src:1039,output:2$ ovs-ofctl add-flow s1 tcp,in_port=1,actions=mod_tp_dst:21,output:2$ ovs-ofctl add-flow s1 udp,in_port=1,actions=mod_tp_src:1039,output:2$ ovs-ofctl add-flow s1 udp,in_port=1,actions=mod_tp_dst:53,output:2 VxLan åˆ›å»ºVxLANæŽ¥å£ 12345678910111213141516171819$ ovs-vsctl add-port s3 vxlan1 -- set Interface vxlan1 type=vxlan options:remote_ip=1.1.1.1 ofport_request=2000$ ovs-vsctl show Bridge "s3" Controller "tcp:10.180.9.62:6633" Controller "ptcp:6636" fail_mode: secure Port "s3-eth2" Interface "s3-eth2" Port "vxlan1" Interface "vxlan1" type: vxlan options: &#123;remote_ip="1.1.1.1"&#125; Port "s3-eth3" Interface "s3-eth3" Port "s3-eth1" Interface "s3-eth1" Port "s3" Interface "s3" type: internal VxLANæµè¡¨ 123456$ ovs-ofctl add-flow s3 ip,in_port=1,nw_dst=192.168.0.0/16,actions=output:2000$ ovs-ofctl add-flow s3 in_port=2000,actions=output:1$ ovs-ofctl dump-flows s3NXST_FLOW reply (xid=0x4): cookie=0x0, duration=35.227s, table=0, n_packets=0, n_bytes=0, idle_age=35, ip,in_port=1,nw_dst=192.168.0.0/16 actions=output:2000 cookie=0x0, duration=2.469s, table=0, n_packets=0, n_bytes=0, idle_age=2, in_port=2000 actions=output:1 å®žéªŒ æ‹“æ‰‘ 12345678910111213 +------------+ | s2 | +---+----+---+ | | +----------+ +----------+ | |+--------+--------+ +--------+--------+| s3 | | s4 |+---+---------+---+ +---+---------+---+ | | | |+---+--+ +--+---+ +---+--+ +--+---+| h1 | | h2 | | h3 | | h4 |+------+ +------+ +------+ +------+ å®žéªŒè¦æ±‚ h1å¯ä»¥ä¸Žh3é€šä¿¡ï¼Œä½†ä¸å¯ä»¥ä¸Žh2å’Œh4é€šä¿¡ h2å¯ä»¥ä¸Žh4é€šä¿¡ï¼Œä½†ä¸å¯ä»¥ä¸Žh1å’Œh3é€šä¿¡ å…·ä½“æ“ä½œ ç”±h1é€å‡ºçš„æŠ¥æ–‡ï¼Œåœ¨s3ä¸Šæ‰“ä¸Švlan tag 1000 éšåŽs3å°†æŠ¥æ–‡é€å¾€s2 s2æ”¶åˆ°s3çš„vlan1000çš„æŠ¥æ–‡ï¼Œç›´æŽ¥è½¬é€s4 s4æ”¶åˆ°vlan1000çš„æŠ¥æ–‡åŽï¼Œå‰¥ç¦»vlanï¼Œé€åˆ°h3 h3æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åŽï¼Œè¿”å›žå“åº”æŠ¥æ–‡ï¼Œé€å¾€s4 s4æ”¶åˆ°h3çš„æŠ¥æ–‡åŽï¼Œæ‰“ä¸Švlan tag 1000 éšåŽs4å°†æŠ¥æ–‡é€å¾€s2 s2æ”¶åˆ°s4çš„vlan1000çš„æŠ¥æ–‡ï¼Œç›´æŽ¥é€å¾€s3 s3æ”¶åˆ°s2çš„vlan1000æŠ¥æ–‡åŽï¼Œå‰¥ç¦»vlanï¼Œé€å¾€h1 h1-h3æµè¡¨ 1234567891011121314$ ovs-ofctl dump-flows s2NXST_FLOW reply (xid=0x4): cookie=0x0, duration=1664.027s, table=0, n_packets=79, n_bytes=4026, idle_age=803, in_port=1,dl_vlan=1000 actions=output:2 cookie=0x0, duration=1642.112s, table=0, n_packets=10, n_bytes=852, idle_age=803, in_port=2,dl_vlan=1000 actions=output:1$ ovs-ofctl dump-flows s3NXST_FLOW reply (xid=0x4): cookie=0x0, duration=2826.459s, table=0, n_packets=330, n_bytes=14700, idle_age=807, in_port=1 actions=mod_vlan_vid:1000,output:3 cookie=0x0, duration=1895.062s, table=0, n_packets=10, n_bytes=852, idle_age=807, in_port=3,dl_vlan=1000 actions=strip_vlan,output:1$ ovs-ofctl dump-flows s4NXST_FLOW reply (xid=0x4): cookie=0x0, duration=2776.175s, table=0, n_packets=229, n_bytes=10010, idle_age=810, in_port=1 actions=mod_vlan_vid:1000,output:3 cookie=0x0, duration=1507.500s, table=0, n_packets=10, n_bytes=852, idle_age=810, in_port=3,dl_vlan=1000 actions=strip_vlan,output:1 h2-h4æµè¡¨ 1234567891011121314$ ovs-ofctl dump-flows s2NXST_FLOW reply (xid=0x4): cookie=0x0, duration=827.167s, table=0, n_packets=60, n_bytes=2816, idle_age=698, in_port=2,dl_vlan=2000 actions=output:1 cookie=0x0, duration=812.342s, table=0, n_packets=60, n_bytes=2816, idle_age=698, in_port=1,dl_vlan=2000 actions=output:2 $ ovs-ofctl dump-flows s3NXST_FLOW reply (xid=0x4): cookie=0x0, duration=1347.703s, table=0, n_packets=60, n_bytes=2576, idle_age=702, in_port=2 actions=mod_vlan_vid:2000,output:3 cookie=0x0, duration=710.639s, table=0, n_packets=3, n_bytes=194, idle_age=702, in_port=3,dl_vlan=2000 actions=strip_vlan,output:2 $ ovs-ofctl dump-flows s4NXST_FLOW reply (xid=0x4): cookie=0x0, duration=1133.570s, table=0, n_packets=60, n_bytes=2576, idle_age=705, in_port=2 actions=mod_vlan_vid:2000,output:3 cookie=0x0, duration=1088.590s, table=0, n_packets=60, n_bytes=2816, idle_age=705, in_port=3,dl_vlan=2000 actions=strip_vlan,output:2 å‘½ä»¤åˆ—è¡¨ h1-h3 123456ovs-ofctl add-flow s2 in_port=1,dl_vlan=1000,actions=output:2ovs-ofctl add-flow s2 in_port=2,dl_vlan=1000,actions=output:1ovs-ofctl add-flow s3 in_port=1,actions=mod_vlan_vid:1000,output:3ovs-ofctl add-flow s3 in_port=3,dl_vlan=1000,actions=strip_vlan,output:1ovs-ofctl add-flow s4 in_port=1,actions=mod_vlan_vid:1000,output:3ovs-ofctl add-flow s4 in_port=3,dl_vlan=1000,actions=strip_vlan,output:1 h2-h4 123456ovs-ofctl add-flow s2 in_port=2,dl_vlan=2000,actions=output:1ovs-ofctl add-flow s2 in_port=1,dl_vlan=2000,actions=output:2ovs-ofctl add-flow s3 in_port=2,actions=mod_vlan_vid:2000,output:3ovs-ofctl add-flow s3 in_port=3,dl_vlan=2000,actions=strip_vlan,output:2ovs-ofctl add-flow s4 in_port=2,actions=mod_vlan_vid:2000,output:3ovs-ofctl add-flow s4 in_port=3,dl_vlan=2000,actions=strip_vlan,output:2]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>ovs</tag>
        <tag>network</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mininetè‡ªå®šä¹‰topo]]></title>
    <url>%2Fpost%2Fdd7d5c81.html</url>
    <content type="text"><![CDATA[mininetè‡ªå¸¦topo é€šè¿‡mn -hå¯ä»¥çœ‹åˆ°Mininetè‡ªå¸¦çš„å‡ ç§topoç±»åž‹ï¼Œåˆ†åˆ«æœ‰Linear, minimal, reversed, single, toruså’Œtreeç±»åž‹ï¼Œä½†æœ‰æ—¶å€™è¿™äº›ç±»åž‹æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦è‡ªå®šä¹‰topo 12345678910$ mn --helpUsage: mn [options](type mn -h for details)... --topo=TOPO linear|minimal|reversed|single|torus|tree[,param=value ...] linear=LinearTopo torus=TorusTopo tree=TreeTopo single=SingleSwitchTopo reversed=SingleSwitchReversedTopo minimal=MinimalTopo èŽ·å–ç¤ºä¾‹ Mininetæä¾›äº†topo-2sw-2hostçš„ç¤ºä¾‹ï¼Œå¯ä»¥é€šè¿‡Mininet githubçš„customç›®å½•ä¸‹èŽ·å– 12345678910111213141516171819202122232425262728293031"""Custom topology exampleTwo directly connected switches plus a host for each switch: host --- switch --- switch --- hostAdding the 'topos' dict with a key/value pair to generate our newly definedtopology enables one to pass in '--topo=mytopo' from the command line."""from mininet.topo import Topoclass MyTopo( Topo ): "Simple topology example." def __init__( self ): "Create custom topo." # Initialize topology Topo.__init__( self ) # Add hosts and switches leftHost = self.addHost( 'h1' ) rightHost = self.addHost( 'h2' ) leftSwitch = self.addSwitch( 's3' ) rightSwitch = self.addSwitch( 's4' ) # Add links self.addLink( leftHost, leftSwitch ) self.addLink( leftSwitch, rightSwitch ) self.addLink( rightSwitch, rightHost )topos = &#123; 'mytopo': ( lambda: MyTopo() ) &#125; è‡ªå®šä¹‰topo å¦‚è¦åˆ›å»ºå¦‚ä¸‹topo 1234567891011 +------------+ +----------+ s3 +---------+ | +------------+ | | | +----+----+ +----+----+ +-----+ s1 +-----+ +-----+ s2 +-----+ | +---------+ | | +---------+ | | | | |+--+--+ +--+--+ +--+--+ +--+--+| h1 | | h2 | | h3 | | h4 |+-----+ +-----+ +-----+ +-----+ ä»£ç  123456789101112131415161718192021222324252627282930from mininet.topo import Topoclass MyTopo( Topo ): "Simple topology example." def __init__( self ): "Create custom topo." # Initialize topology Topo.__init__( self ) # Add hosts and switches h1 = self.addHost( 'h1' ) h2 = self.addHost( 'h2' ) h3 = self.addHost( 'h3' ) h4 = self.addHost( 'h4' ) s1 = self.addSwitch( 's1' ) s2 = self.addSwitch( 's2' ) s3 = self.addSwitch( 's3' ) # Add links self.addLink( h1, s1 ) self.addLink( s1, h2 ) self.addLink( s1, s3 ) self.addLink( s3, s2 ) self.addLink( h3, s2 ) self.addLink( s2, h4 )topos = &#123; 'mytopo': ( lambda: MyTopo() ) &#125; ä½¿ç”¨è‡ªå®šä¹‰topo 1234567891011121314151617root@mininet:~# mn --custom ./testtopo.py --topo mytopo --controller=remote,ip=127.0.0.1,port=6633*** Creating network*** Adding controller*** Adding hosts:h1 h2 h3 h4*** Adding switches:s1 s2 s3*** Adding links:(h1, s1) (h3, s2) (s1, h2) (s1, s3) (s2, h4) (s3, s2)*** Configuring hostsh1 h2 h3 h4*** Starting controllerc0*** Starting 3 switchess1 s2 s3 ...*** Starting CLI:mininet&gt; æŸ¥çœ‹è¿žæŽ¥çŠ¶æ€ 123456789101112131415mininet&gt; linksh1-eth0&lt;-&gt;s1-eth1 (OK OK)h3-eth0&lt;-&gt;s2-eth2 (OK OK)s1-eth2&lt;-&gt;h2-eth0 (OK OK)s1-eth3&lt;-&gt;s3-eth1 (OK OK)s2-eth3&lt;-&gt;h4-eth0 (OK OK)s3-eth2&lt;-&gt;s2-eth1 (OK OK)mininet&gt; pingall*** Ping: testing ping reachabilityh1 -&gt; h2 h3 h4h2 -&gt; h1 h3 h4h3 -&gt; h1 h2 h4h4 -&gt; h1 h2 h3*** Results: 0% dropped (12/12 received)mininet&gt;]]></content>
      <categories>
        <category>sdn</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>sdn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Opendaylight OxygençŽ¯å¢ƒå‡†å¤‡]]></title>
    <url>%2Fpost%2F5594d322.html</url>
    <content type="text"><![CDATA[å®‰è£…Opendaylight çŽ¯å¢ƒå‡†å¤‡ åŸºç¡€åŒ… 1$ apt-get install unzip lrzsz å®‰è£…jdk 1$ apt-get install openjdk-8-jdk è®¾ç½®JAVA_HOME åœ¨/etc/environmentçš„æœ«å°¾æ·»åŠ JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64&quot;ï¼Œéœ€è¦é€€å‡ºå½“å‰ç»ˆç«¯é‡æ–°ç™»é™† èŽ·å–å®‰è£…åŒ… https://docs.opendaylight.org/en/latest/downloads.html è¿è¡Œkaraf 123456789101112131415161718192021$ unzip karaf-0.8.3.zip ...$ cd karaf-0.8.3/$ ./bin/karafApache Karaf starting up. Press Enter to open the shell now...100% [========================================================================]Karaf started in 1s. Bundle stats: 54 active, 55 total ________ ________ .__ .__ .__ __ \_____ \ ______ ____ ____ \______ \ _____ ___.__.| | |__| ____ | |___/ |_ / | \\____ \_/ __ \ / \ | | \\__ \&lt; | || | | |/ ___\| | \ __\ / | \ |_&gt; &gt; ___/| | \| ` \/ __ \\___ || |_| / /_/ &gt; Y \ | \_______ / __/ \___ &gt;___| /_______ (____ / ____||____/__\___ /|___| /__| \/|__| \/ \/ \/ \/\/ /_____/ \/Hit '&lt;tab&gt;' for a list of available commandsand '[cmd] --help' for help on a specific command.Hit '&lt;ctrl-d&gt;' or type 'system:shutdown' or 'logout' to shutdown OpenDaylight.opendaylight-user@root&gt; å®‰è£…feature è¯´èµ·æ¥ï¼Œè¿™çœŸçš„æ˜¯ä¸€ä»¶è®©äººå´©æºƒçš„äº‹æƒ…ï¼Œä¸åŒçš„ç‰ˆæœ¬ï¼Œå®‰è£…featureä¸åŒï¼Œåœ¨ä»€ä¹ˆéƒ½è¿˜ä¸æ‡‚çš„æƒ…å†µä¸‹å®‰è£…featureï¼Œé‡åˆ°äº†æ— æ•°çš„é—®é¢˜ï¼Œç»ˆäºŽå½“æˆ‘å°†è¦æ¢åˆ°æ›´è€çš„ç‰ˆæœ¬ä¹‹å‰ï¼ˆ0.7.3ï¼‰ï¼Œè®©æˆ‘æ‰¾åˆ°äº†**Oxygenï¼ˆ0.8.3ï¼‰**çš„feature 1opendaylight-user@root&gt;feature:install odl-restconf odl-l2switch-switch odl-dlux-core odl-dluxapps-nodes odl-dluxapps-topology odl-dluxapps-yangui odl-dluxapps-yangvisualizer odl-dluxapps-yangman æˆ‘æœ‰å¿…è¦æŠŠè¿™äº›featureå†æ¬¡åˆ—å‡ºæ¥ 12345678feature:install odl-restconffeature:install odl-l2switch-switch feature:install odl-dlux-core feature:install odl-dluxapps-nodes feature:install odl-dluxapps-topology feature:install odl-dluxapps-yangui feature:install odl-dluxapps-yangvisualizer feature:install odl-dluxapps-yangman åŠ¡å¿…æŒ‰ç…§é¡ºåºå®‰è£…ï¼Œå¦‚æžœå‡ºçŽ°é”™è¯¯ï¼Œåˆ äº†ç›®å½•é‡æ–°æ¥è¿‡å§ ç™»é™†Web ä½¿ç”¨admin:adminç™»é™†å³å¯]]></content>
      <categories>
        <category>sdn</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>sdn</tag>
        <tag>opendaylight</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MininetåŸºç¡€ä½¿ç”¨]]></title>
    <url>%2Fpost%2F46d30180.html</url>
    <content type="text"><![CDATA[Mininetæ˜¯ä»€ä¹ˆ Mininetæ˜¯ä¸€ä¸ªç½‘ç»œæ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥åˆ›å»ºè™šæ‹Ÿä¸»æœºï¼Œäº¤æ¢æœºï¼ŒæŽ§åˆ¶å™¨å’Œé“¾æŽ¥çš„ç½‘ç»œã€‚ Mininetçš„äº¤æ¢æœºæ”¯æŒOpenFlowï¼Œå¯å®žçŽ°é«˜åº¦çµæ´»çš„è‡ªå®šä¹‰è·¯ç”±å’ŒSDNï¼Œä¸ºå¼€å‘å’Œæµ‹è¯•SDNæä¾›å®žéªŒçŽ¯å¢ƒ Mininetç”¨é€” ä¸ºå¼€å‘OpenFlowåº”ç”¨ç¨‹åºæä¾›ç®€å•è€Œå»‰ä»·çš„ç½‘ç»œæµ‹è¯•å¹³å° å…è®¸å¤šä¸ªå¹¶å‘å¼€å‘äººå‘˜åœ¨åŒä¸€æ‹“æ‰‘ä¸Šç‹¬ç«‹å·¥ä½œ æ”¯æŒç³»ç»Ÿçº§å›žå½’æµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•å¯é‡å¤ä¸”æ˜“äºŽæ‰“åŒ… æ”¯æŒå¤æ‚çš„æ‹“æ‰‘æµ‹è¯•ï¼Œæ— éœ€è¿žæŽ¥ç‰©ç†ç½‘ç»œ åŒ…æ‹¬å…·æœ‰æ‹“æ‰‘æ„ŸçŸ¥å’ŒOpenFlowæ„ŸçŸ¥çš„CLIï¼Œç”¨äºŽè°ƒè¯•æˆ–è¿è¡Œç½‘ç»œèŒƒå›´çš„æµ‹è¯• æ”¯æŒä»»æ„è‡ªå®šä¹‰æ‹“æ‰‘ï¼Œå¹¶åŒ…æ‹¬ä¸€ç»„åŸºæœ¬çš„å‚æ•°åŒ–æ‹“æ‰‘ å¯ä»¥åœ¨æ²¡æœ‰ç¼–ç¨‹çš„æƒ…å†µä¸‹å¼€ç®±å³ç”¨ æä¾›äº†ä¸€ä¸ªç®€å•æ˜“ç”¨çš„**Python APIï¼Œ**ç”¨äºŽç½‘ç»œåˆ›å»ºå’Œå®žéªŒ å®‰è£… Ubuntu16.04 1apt install mininet æµ‹è¯• 1sudo mn --test pingall ä½¿ç”¨ å¸¸ç”¨å‘½ä»¤ è¿›å…¥mininetå‘½ä»¤è¡Œæ¨¡å¼ 12345678910111213141516171819root@mininet:~# mn*** No default OpenFlow controller found for default switch!*** Falling back to OVS Bridge*** Creating network*** Adding controller*** Adding hosts:h1 h2*** Adding switches:s1*** Adding links:(h1, s1) (h2, s1)*** Configuring hostsh1 h2*** Starting controller*** Starting 1 switchess1 ...*** Starting CLI:mininet&gt; æŸ¥çœ‹èŠ‚ç‚¹ 1234mininet&gt; nodesavailable nodes are:h1 h2 s1mininet&gt; å¯ä»¥çœ‹åˆ°å½“å‰åŒ…å«3ä¸ªèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªhostï¼Œä¸€ä¸ªswitch æŸ¥çœ‹è¿žæŽ¥çŠ¶å†µ 12345mininet&gt; neth1 h1-eth0:s1-eth1h2 h2-eth0:s1-eth2s1 lo: s1-eth1:h1-eth0 s1-eth2:h2-eth0mininet&gt; h1çš„eth0ä¸Žs1çš„eth1ç›¸è¿ž h2çš„eth0ä¸Žs1çš„eth2ç›¸è¿ž æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ 12345mininet&gt; dump&lt;Host h1: h1-eth0:10.0.0.1 pid=6896&gt;&lt;Host h2: h2-eth0:10.0.0.2 pid=6899&gt;&lt;OVSBridge s1: lo:127.0.0.1,s1-eth1:None,s1-eth2:None pid=6905&gt;mininet&gt; çŽ¯å¢ƒæ¸…ç† 123456789101112131415161718192021222324# mn -c*** Removing excess controllers/ofprotocols/ofdatapaths/pings/noxeskillall controller ofprotocol ofdatapath ping nox_core lt-nox_core ovs-openflowd ovs-controller udpbwtest mnexec ivs 2&gt; /dev/nullkillall -9 controller ofprotocol ofdatapath ping nox_core lt-nox_core ovs-openflowd ovs-controller udpbwtest mnexec ivs 2&gt; /dev/nullpkill -9 -f "sudo mnexec"*** Removing junk from /tmprm -f /tmp/vconn* /tmp/vlogs* /tmp/*.out /tmp/*.log*** Removing old X11 tunnels*** Removing excess kernel datapathsps ax | egrep -o 'dp[0-9]+' | sed 's/dp/nl:/'*** Removing OVS datapathsovs-vsctl --timeout=1 list-brovs-vsctl --timeout=1 list-br*** Removing all links of the pattern foo-ethXip link show | egrep -o '([-_.[:alnum:]]+-eth[[:digit:]]+)'ip link show*** Killing stale mininet node processespkill -9 -f mininet:*** Shutting down stale tunnelspkill -9 -f Tunnel=Ethernetpkill -9 -f .ssh/mnrm -f ~/.ssh/mn/**** Cleanup complete.root@mininet:~# èŠ‚ç‚¹å‘½ä»¤ 1234567891011121314151617181920mininet&gt; h1 ifconfigh1-eth0 Link encap:Ethernet HWaddr a2:5f:da:ed:6a:74 inet addr:10.0.0.1 Bcast:10.255.255.255 Mask:255.0.0.0 inet6 addr: fe80::a05f:daff:feed:6a74/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:15 errors:0 dropped:0 overruns:0 frame:0 TX packets:8 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:1206 (1.2 KB) TX bytes:648 (648.0 B)lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)mininet&gt; Run http server 1mininet&gt; h1 python -m SimpleHTTPServer 80 &amp; Http client 123456789101112mininet&gt; h2 wget h1--2018-11-07 10:52:29-- http://10.0.0.1/Connecting to 10.0.0.1:80... connected.HTTP request sent, awaiting response... 200 OKLength: 370 [text/html]Saving to: 'index.html'index.html 100%[===================&gt;] 370 --.-KB/s in 0s2018-11-07 10:52:29 (62.3 MB/s) - 'index.html' saved [370/370]mininet&gt;]]></content>
      <categories>
        <category>sdn</category>
      </categories>
      <tags>
        <tag>network</tag>
        <tag>sdn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OpenvSwitchå­¦ä¹ ç¬”è®°1]]></title>
    <url>%2Fpost%2F775edb62.html</url>
    <content type="text"><![CDATA[åŠŸèƒ½æ”¯æŒ VLAN with trunk and access ports ç»‘å®šNIC(with/without LAC) å¯è§æ€§ï¼šNetFlow, sFlowÂ®, and mirroring QoS Geneve, GRE, VXLAN, STT, and LISP éš§é“ è¿žæŽ¥æ•…éšœç®¡ç† openflow 1.0åŠå…¶æ‰©å±• ä½¿ç”¨Linuxå†…æ ¸è¿›è¡Œé«˜æ€§èƒ½è½¬å‘ ä¸»è¦ç»„æˆéƒ¨åˆ† ovs-vswitchd: å®žçŽ°äº¤æ¢åŠŸèƒ½çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œä¸ŽLinuxå†…æ ¸æ¨¡å—å®žçŽ°flow-based switching ovsdb-server: ç”¨ä»¥ä¿å­˜ovsé…ç½®ä¿¡æ¯çš„è½»é‡çº§çš„æ•°æ®åº“ ovs-dpctl: ç”¨ä»¥é…ç½®äº¤æ¢æœºå†…æ ¸æ¨¡å—çš„å·¥å…· ovs-vsctl: æŸ¥çœ‹å’Œæ›´æ–°ovsé…ç½®ä¿¡æ¯çš„å·¥å…· ovs-ofctl: é…ç½®å’ŒæŸ¥çœ‹OpenFlowçš„æŽ§åˆ¶å’Œäº¤æ¢ã€‚ä¸»è¦ç”¨æ¥æ“ä½œOpenFlowæµè¡¨ åœºæ™¯ å¤šæœåŠ¡å™¨è™šæ‹ŸåŒ–éƒ¨ç½²åœºæ™¯ é«˜åŠ¨æ€çš„end-points ç»´æŠ¤çš„æ˜¯é€»è¾‘æŠ½è±¡ çŠ¶æ€è¿ç§» å“åº”ç½‘ç»œåŠ¨æ€ä¿®æ”¹ ç»´æŠ¤é€»è¾‘æ ‡ç­¾ åŒ…å¤„ç†æµç¨‹ å¦‚ä¸Šå›¾ å½“åŒ…è¢«ä»Žç‰©ç†ç½‘å¡ä¸Šæ”¶åˆ°ä¹‹åŽï¼Œå¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡æ”¶åˆ°åŒ…ï¼Œovsçš„kernel datapathä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†ï¼ŒäºŽæ˜¯ï¼Œå°†å…¶é€å¾€ovs-vswitchdã€‚ ovs-vswitchdå†³å®šè¿™ä¸ªåŒ…è¯¥å¦‚ä½•å¤„ç†ä¹‹åŽï¼Œå›žé€åˆ°kernel datapath kernel datapathæ ¹æ®ovs-vswitchdæ‰§è¡Œç›¸åº”çš„åŠ¨ä½œï¼Œå¹¶ç¼“å­˜è¿™ä¸ªåŠ¨ä½œ å½“å†æ¬¡æ”¶åˆ°ç›¸å…³åŒ…ä¹‹åŽï¼Œkernel datapathå·²ç»å­˜åœ¨ä¹‹å‰ç¼“å­˜å¥½çš„åŠ¨ä½œï¼Œåˆ™ç›´æŽ¥æ‰§è¡Œè¯¥åŠ¨ä½œ åŒ…å¤„ç†æµç¨‹ å› ä¸ºFlow tableåœ¨å†…æ ¸ä¸­æœ‰ä¸€ä»½ï¼Œå½“ä»Žç‰©ç†ç½‘å¡æ”¶åˆ°åŒ…åŽï¼Œé€šè¿‡keyæŸ¥æ‰¾å†…æ ¸ä¸­çš„flow tableï¼Œå³å¯ä»¥å¾—åˆ°actionï¼Œç„¶åŽæ‰§è¡Œaction å¦‚æžœæ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œåˆ™é€šè¿‡upcallè°ƒç”¨ï¼Œå°†æ•°æ®åŒ…ä»¥netlinkåè®®ä¸Šä¼ åˆ°vswitchd vswitchdå°†æ•°æ®åŒ…åœ¨ovsdbä¸­è¿›è¡ŒæŸ¥è¡¨åŒ¹é…ï¼Œè‹¥èƒ½åŒ¹é…ï¼Œåˆ™è½¬åˆ°ç¬¬äº”æ­¥ è‹¥ä¸èƒ½åŒ¹é…ï¼Œåˆ™é€šè¿‡ OpenFlowåè®®ä¸ŽæŽ§åˆ¶å™¨é€šä¿¡ï¼ŒæŽ§åˆ¶å™¨ä¸‹å‘æµè¡¨é¡¹ï¼ŒVswitchdè§£æžæµè¡¨é¡¹å¾—åˆ°ç›¸åº”çš„åŠ¨ä½œï¼ŒåŒæ—¶å°†æµè¡¨å­˜å…¥ovsdbã€‚ å°†åŒ¹é…çš„æµè¡¨é¡¹é€šè¿‡netlinkä¸‹å‘åˆ°å†…æ ¸çš„Flow-tableä¸­ é€šè¿‡reinjectï¼Œä½¿ç”¨netlinkå°†åŒ…é‡æ–°é€å›žå†…æ ¸ åŒ¹é…æµè¡¨é¡¹å¹¶æ ¹æ®ç›¸åº”çš„åŠ¨ä½œæ‰§è¡Œ]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>ovs</tag>
        <tag>network</tag>
        <tag>openvswitch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoå¼€å¯disqusè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2Fpost%2Fc4780247.html</url>
    <content type="text"><![CDATA[ä¹‹å‰ä¸€ç›´ä½¿ç”¨Hexoçš„Nextä¸»é¢˜ï¼Œå¼€å¯çš„æ˜¯Valineè¯„è®ºç³»ç»Ÿã€‚æœ‰åšæ–‡æ¥è¯´æ˜Žé…ç½®è¿‡ç¨‹ã€‚ç„¶è€Œï¼Œä¸€ä¸ªä¸»é¢˜å†å¥½ï¼Œçœ‹çš„æ—¶é—´ä¹…äº†ï¼Œè¿˜æ˜¯æƒ³è¦æ¢æ¢ã€‚äºŽæ˜¯ä½¿ç”¨äº†çŽ°åœ¨çš„MaterialFlowï¼Œåˆšå¥½ä¹Ÿæ¢æ¢è¯„è®ºç³»ç»Ÿ ç›¸æ¯”Valineï¼Œdisquså¼€å¯çœŸçš„æ˜¯å¤ªç®€å•äº† æ³¨å†Œdisqusè´¦å· å…¶å®žæˆ‘å¾ˆæ—©ä¹‹å‰å°±æ³¨å†Œäº†è´¦å·ï¼Œç›´æŽ¥ä½¿ç”¨facebookå…³è”è¿‡åŽ»çš„. ç½‘ç«™ä¸Šå¼€å¯ ç™»é™†disqusåŽï¼Œåœ¨é¦–é¡µç‚¹å‡»å³ä¾§è®¾ç½®-Add Disqus To Site åœ¨éšåŽå¼¹å‡ºçš„é¡µé¢ç‚¹å‡»Start - I want to install Disqus on my site é…ç½®Hexo ä¿®æ”¹hexoçš„_config.ymlï¼Œå¢žåŠ disqus_shortname 1disqus_shortname: your_shortname å¤§åŠŸå‘Šæˆ æ¬¢è¿Žå¤§å®¶ç•™è¨€]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[openstackæŽ¥å£çŠ¶æ€å¼‚å¸¸]]></title>
    <url>%2Fpost%2F257b0787.html</url>
    <content type="text"><![CDATA[é”™è¯¯ä¿¡æ¯ neutroné”™è¯¯æ—¥å¿—Exit code: 2; Stdin: ; Stdout: ; Stderr: sudo: unable to resolve host pxea4badb2 é—®é¢˜çŽ°è±¡ openstackçš„routerä¸­åˆ›å»ºäº†ä¸€ä¸ªè”é€šä¸¤ä¸ªvlançš„è·¯ç”±å™¨ï¼Œå‘çŽ°ä¸¤ä¸ªæŽ¥å£è½®æµå¤„äºŽbuildçŠ¶æ€ æŸ¥çœ‹æ—¥å¿— /var/log/neutron/neutron-linuxbridge-agent.log 1234567891011121314151617181920212223242526115265 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py", line 196, in force_reraise115266 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent six.reraise(self.type_, self.value, self.tb)115267 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 419, in add_tap_interface115268 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent tap_device_name, device_owner)115269 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 451, in _add_tap_interface115270 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent segmentation_id)115271 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 403, in ensure_physical_in_bridge115272 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent physical_interface)115273 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 221, in ensure_flat_bridge115274 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent gateway):115275 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 362, in ensure_bridge115276 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent self.update_interface_ip_details(bridge_name, interface, ips, gateway)115277 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neut ron_agent.py", line 301, in update_interface_ip_details115278 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent dst_device.addr.add(cidr=ip['cidr'])115279 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 597, in add115280 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent self._as_root([net.version], tuple(args))115281 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 384, in _as_root115282 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent use_root_namespace=use_root_namespace)115283 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 96, in _as_root115284 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent log_fail_as_error=self.log_fail_as_error)115285 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/ip_lib.py", line 105, in _execute115286 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent log_fail_as_error=log_fail_as_error)115287 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent File "/usr/lib/python2.7/dist-packages/neutron/agent/linux/utils.py", line 146, in execute115288 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent raise ProcessExecutionError(msg, returncode=returncode)115289 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent ProcessExecutionError: Exit code: 2; Stdin: ; Stdout: ; Stderr: sudo: unable to resolve host pxea4badb2 17413115290 2018-09-11 16:59:59.274 1553 ERROR neutron.plugins.ml2.drivers.agent._common_agent RTNETLINK answers: File exists é—®é¢˜åŽŸå›  sudo: unable to resolve host pxea4badb2 æ— æ³•è§£æžä¸»æœºå æŸ¥çœ‹/etc/hostsä¸­ç¼ºå°‘äº†æœ¬åœ°hostnameçš„IPåœ°å€æ˜ å°„ Exit code: 2; Stdin: ; Stdout: ; Stderr: é—®é¢˜æ¯”è¾ƒä¸ç›´è§‚ï¼Œgoogleä¹‹åŽï¼Œæœ‰äººè¯´æ˜¯å› ä¸ºbridgeä¸Šé…ç½®äº†IPï¼Œå¯¼è‡´å†²çªäº† ç»æŸ¥çœ‹controllerä¸Šï¼Œå‘çŽ°ä¸€ä¸ªbridgeå’Œä¸€ä¸ªæ— åŠ›ç½‘å¡é…ç½®äº†åŒæ ·çš„IPï¼Œå¯èƒ½æ˜¯å› ä¸ºä¹‹å‰ä½¿ç”¨flatç½‘ç»œåŽåˆ‡æ¢ä¸ºvlanç½‘ç»œï¼Œæ²¡æœ‰æ¸…ç†openstackä¸­åˆ›å»ºçš„é…ç½®å¯¼è‡´ã€‚ å°†bridgeä¸Šçš„IPåœ°å€åˆ é™¤åŽï¼Œæ¢å¤æ­£å¸¸]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuåœ¨Openstackä¸­å¯åŠ¨å¯†ç æ³¨å…¥ä¸ç”Ÿæ•ˆé—®é¢˜å®šä½1]]></title>
    <url>%2Fpost%2Fc2a7a06a.html</url>
    <content type="text"><![CDATA[é—®é¢˜è¯´æ˜Ž ä½¿ç”¨Ubuntuçš„cloudé•œåƒåˆ›å»ºå®žä¾‹ï¼Œåœ¨åˆ›å»ºæ—¶ä½¿ç”¨è„šæœ¬ä¿®æ”¹å¯†ç  12345#!/bin/bashpasswd ubuntu&lt;&lt;EOFubuntuubuntuEOF ç³»ç»Ÿå¯åŠ¨åŽï¼Œå‘çŽ°å¯†ç ä¿®æ”¹æœªæˆåŠŸ å®šä½æ€è·¯ æŸ¥çœ‹å®žä¾‹å¯åŠ¨æ—¥å¿— âž¡ï¸ æŸ¥çœ‹openstackçš„neutron agentçŠ¶æ€ âž¡ï¸ æŸ¥çœ‹meta-dataæœåŠ¡æ—¥å¿— step by step æŸ¥çœ‹å®žä¾‹å¯åŠ¨æ—¥å¿— 123[ 731.435163] cloud-init[845]: 2018-09-11 01:42:24,574 - url_helper.py[WARNING]: Calling 'http://169.254.169.254/2009-04-04/meta-data/instance-id' failed [119/120s]: request error [HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /2009-04-04/meta-data/instance-id (Caused by NewConnectionError('&lt;requests.packages.urllib3.connection.HTTPConnection object at 0x7fa26f1eb6d8&gt;: Failed to establish a new connection: [Errno 101] Network is unreachable',))][ 738.460169] cloud-init[845]: 2018-09-11 01:42:31,597 - DataSourceEc2.py[CRITICAL]: Giving up on md from ['http://169.254.169.254/2009-04-04/meta-data/instance-id'] after 126 seconds[ 738.470572] cloud-init[845]: 2018-09-11 01:42:31,608 - util.py[WARNING]: Getting data from &lt;class 'cloudinit.sources.DataSourceCloudStack.DataSourceCloudStack'&gt; failed ä»¥ä¸Šæ—¥å¿—è¯´æ˜Žcloud-initåœ¨å‘meta-data serverèŽ·å–meta-dataæ—¶å¤±è´¥ æŸ¥çœ‹neutron agentçŠ¶æ€ 123456789101112root@pxea4badb217413:~# neutron agent-list+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+| id | agent_type | host | availability_zone | alive | admin_state_up | binary |+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+| 459740a7-b60c-4db7-9ee0-3b45d6c3b2de | Linux bridge agent | pxe1418773526e5 | | :-) | True | neutron-linuxbridge-agent || 4ec74c6a-c392-4216-bddd-789ec5aa3d86 | DHCP agent | pxea4badb217413 | nova | :-) | True | neutron-dhcp-agent || 6d992669-fbe6-412c-a717-5c2b61a2b901 | Metadata agent | pxea4badb217413 | | :-) | True | neutron-metadata-agent || 77dc04a5-0e43-4907-be3a-6f165e77807c | Linux bridge agent | pxe74867aee16bc | | :-) | True | neutron-linuxbridge-agent || c54c7593-5973-41ed-86c8-7e22ac1e95ec | Linux bridge agent | pxea4badb217413 | | :-) | True | neutron-linuxbridge-agent || e882e27d-45de-4cb3-9284-7e9101e2b39b | L3 agent | pxea4badb217413 | nova | :-) | True | neutron-l3-agent |+--------------------------------------+--------------------+-----------------+-------------------+-------+----------------+---------------------------+root@pxea4badb217413:~# æ£€æŸ¥neutron-metadataæ—¥å¿— 123456789101112131415161718192021222018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent [-] Failed reporting state!2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent Traceback (most recent call last):2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/neutron/agent/metadata/agent.py", line 266, in _report_state2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent use_call=self.agent_state.get('start_flag'))2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/neutron/agent/rpc.py", line 87, in report_state2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent return method(context, 'report_state', **kwargs)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py", line 158, in call2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent retry=self.retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/transport.py", line 90, in _send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent timeout=timeout, retry=retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 470, in send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent retry=retry)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 459, in _send2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent result = self._waiter.wait(msg_id, timeout)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 342, in wait2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent message = self.waiters.get(msg_id, timeout=timeout)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent File "/usr/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py", line 244, in get2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent 'to message ID %s' % msg_id)2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent MessagingTimeout: Timed out waiting for a reply to message ID 5b145001c0a34d37a68337821e64908f2018-09-05 19:07:06.404 10617 ERROR neutron.agent.metadata.agent2018-09-05 19:07:06.405 10617 WARNING oslo.service.loopingcall [-] Function 'neutron.agent.metadata.agent.UnixDomainMetadataProxy._report_state' run outlasted interval by 30.00 sec 12342018-09-06 16:23:48.658 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 1 seconds.2018-09-06 16:23:49.752 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 2 seconds.2018-09-06 16:23:51.766 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 4 seconds.2018-09-06 16:23:55.779 1238 ERROR oslo.messaging._drivers.impl_rabbit [-] AMQP server on controller:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 6 seconds. ä»¥ä¸Šæ˜¾ç¤ºä¸ºAMQP serverè¿žæŽ¥ä¸åˆ° æ£€æŸ¥meta-dataçš„é…ç½® 123456789 /etc/neutron/metadata_agent.ini # IP address used by Nova metadata server. (string value)#nova_metadata_ip = 127.0.0.1nova_metadata_ip = controller# TCP Port used by Nova metadata server. (port value)# Minimum value: 0# Maximum value: 65535#nova_metadata_port = 8775 æŸ¥çœ‹controllerä¸Šç«¯å£ç›‘å¬çŠ¶å†µ 1234567891011121314151617181920212223242526272829303132root@pxea4badb217413:~# netstat -lnpActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program nametcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 1149/sshdtcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 2316/exim4tcp 0 0 127.0.0.1:6010 0.0.0.0:* LISTEN 18284/12tcp 0 0 127.0.0.1:6011 0.0.0.0:* LISTEN 18861/20tcp 0 0 0.0.0.0:9696 0.0.0.0:* LISTEN 1243/pythontcp 0 0 0.0.0.0:6080 0.0.0.0:* LISTEN 1247/pythontcp 0 0 0.0.0.0:8774 0.0.0.0:* LISTEN 1237/pythontcp 0 0 0.0.0.0:8775 0.0.0.0:* LISTEN 1237/pythontcp 0 0 0.0.0.0:9191 0.0.0.0:* LISTEN 1242/pythontcp 0 0 0.0.0.0:25672 0.0.0.0:* LISTEN 2922/beam.smptcp 0 0 0.0.0.0:8776 0.0.0.0:* LISTEN 1235/pythontcp 0 0 10.160.17.196:3306 0.0.0.0:* LISTEN 1769/mysqldtcp 0 0 10.160.17.196:11211 0.0.0.0:* LISTEN 2443/memcachedtcp 0 0 0.0.0.0:9292 0.0.0.0:* LISTEN 1246/pythontcp6 0 0 :::21 :::* LISTEN 833/vsftpdtcp6 0 0 :::22 :::* LISTEN 1149/sshdtcp6 0 0 ::1:25 :::* LISTEN 2316/exim4tcp6 0 0 ::1:6010 :::* LISTEN 18284/12tcp6 0 0 ::1:6011 :::* LISTEN 18861/20tcp6 0 0 :::35357 :::* LISTEN 3904/apache2tcp6 0 0 :::5000 :::* LISTEN 3904/apache2tcp6 0 0 :::80 :::* LISTEN 3904/apache2tcp6 0 0 :::8081 :::* LISTEN 4749/cmatcp6 0 0 :::4369 :::* LISTEN 2586/epmdudp 0 0 0.0.0.0:123 0.0.0.0:* 3218/chronydudp 0 0 0.0.0.0:161 0.0.0.0:* 3189/snmpdudp 0 0 0.0.0.0:323 0.0.0.0:* 3218/chronydudp6 0 0 :::123 :::* 3218/chronydudp6 0 0 :::323 :::* 3218/chronyd ä»¥ä¸Šï¼Œå‘çŽ°5762ç«¯å£æœªç›‘å¬ å°è¯•å¯åŠ¨rabbitmq-server 123service rabbitmq-server start * Starting RabbitMQ Messaging Server rabbitmq-server * RabbitMQ Messaging Server already running [ OK ] å†æ¬¡æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€ 1tcp6 0 0 :::5672 :::* LISTEN 2922/beam.smp é‡å¯meta-dataçš„serviceï¼Œå‘çŽ°æ—¥å¿—å·²ç»ä¸å†æŠ¥é”™äº† ç„¶è€Œï¼Œè¿™ç«Ÿç„¶ä¸æ˜¯æœ€ç»ˆåŽŸå› ï¼Œæœ€ç»ˆçš„é—®é¢˜å‘çŽ°æ˜¯ç½‘ç»œé—®é¢˜]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqlalchemyè¿žæŽ¥dockerçš„mysqlé—®é¢˜è®°å½•]]></title>
    <url>%2Fpost%2F6e2fcf3d.html</url>
    <content type="text"><![CDATA[åˆå¼€å§‹é¼“æ£flask+mysqläº† ðŸ‘¶ ä¸æˆæƒ³ï¼Œåˆä¸€æ¬¡è¸©äº†å¥½å¤šé›· ðŸ˜‚ æœ‰ä¸€ç§æ‰“æ€ªå‡çº§çš„æ„Ÿè§‰ çŽ¯å¢ƒè¯´æ˜Ž Mac+flask docker+mysql é—®é¢˜1 create_engineæŠ¥é”™ é”™è¯¯ä¿¡æ¯ 1234567891011&gt;&gt;&gt; from sqlalchemy import create_engine&gt;&gt;&gt; engine = create_engine('mysql+mysqldb://root:123456@localhost/beta_monitor')Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 424, in create_engine return strategy.create(*args, **kwargs) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 81, in create dbapi = dialect_cls.dbapi(**dbapi_args) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/dialects/mysql/mysqldb.py", line 102, in dbapi return __import__('MySQLdb')ImportError: No module named MySQLdb é—®é¢˜åŽŸå›  æ²¡æœ‰å®‰è£…pythonçš„mysqlåŒ…ï¼Œéœ€è¦å®‰è£…mysql-pythonå’Œ/æˆ–mysqlclientï¼Œç„¶åŽå°±é‡åˆ°äº†ç¬¬äºŒä¸ªé—®é¢˜ é—®é¢˜2 pip install mysql-pythonå¤±è´¥ é”™è¯¯ä¿¡æ¯ 123456789101112131415161718â‡’ pip install mysql-pythonCollecting mysql-python Downloading https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip (108kB) 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 112kB 153kB/s Complete output from command python setup.py egg_info: sh: mysql_config: command not found Traceback (most recent call last): File "&lt;string&gt;", line 1, in &lt;module&gt; File "/private/var/folders/3z/tqw46wwj7xb1d2ftp578x5vm0000gn/T/pip-install-ViJMnc/mysql-python/setup.py", line 17, in &lt;module&gt; metadata, options = get_config() File "setup_posix.py", line 43, in get_config libs = mysql_config("libs_r") File "setup_posix.py", line 25, in mysql_config raise EnvironmentError("%s not found" % (mysql_config.path,)) EnvironmentError: mysql_config not found ----------------------------------------Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/3z/tqw46wwj7xb1d2ftp578x5vm0000gn/T/pip-install-ViJMnc/mysql-python/ é—®é¢˜åŽŸå›  mysql_configä¸å­˜åœ¨ï¼ŒåŽŸæ¥æ˜¯ç³»ç»Ÿå¿…é¡»å®‰è£…mysqlå®¢æˆ·ç«¯ è§£å†³æ–¹æ³• brew install mysql 123456â‡’ brew install mysqlUpdating Homebrew...==&gt; Downloading https://homebrew.bintray.com/bottles/mysql-5.7.22.high_sierra.bottle.tar.gz######################################################################## 100.0%==&gt; Pouring mysql-5.7.22.high_sierra.bottle.tar.gz... é—®é¢˜3 è¿žæŽ¥mysqlæœåŠ¡å™¨å¤±è´¥ é”™è¯¯ä¿¡æ¯ Authentication plugin 'caching_sha2_password' cannot be loaded 1234567891011121314&gt;&gt;&gt; engine = create_engine('mysql+mysqldb://root:123456@127.0.0.1/beta_monitor')&gt;&gt;&gt; connection = engine.connect()Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 2102, in connect return self._connection_cls(self, **kwargs)... File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect return Connection(*args, **kwargs) File "/Users/bqi/venv/beta-monitor/lib/python2.7/site-packages/MySQLdb/connections.py", line 193, in __init__ super(Connection, self).__init__(*args, **kwargs2)sqlalchemy.exc.OperationalError: (_mysql_exceptions.OperationalError) (2059, "Authentication plugin 'caching_sha2_password' cannot be loaded: dlopen(/usr/local/Cellar/mysql/5.7.22/lib/plugin/caching_sha2_password.so, 2): image not found") (Background on this error at: http://sqlalche.me/e/e3q8) é—®é¢˜åŽŸå›  ä¸Šç½‘æŸ¥äº†ä¸€é€šï¼Œä¼¼ä¹Žè¯´ä»ŽæŸä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œmysqlç”¨äº†ä¸€ç§è®¤è¯æ–¹å¼å¯¼è‡´é—®é¢˜ã€‚æ ¹æ®è§£å†³æ–¹æ³•çœ‹ï¼Œæ›´æ¢äº†è®¤è¯æ–¹å¼å°±å¯ä»¥äº† è§£å†³æ–¹æ³• ç”¨dockerå¯åŠ¨mysqlæ—¶å¢žåŠ å‚æ•° --default-authentication-plugin=mysql_native_password 12~|â‡’ docker run -p 3306:3306 -d -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=beta_monitor -e MYSQL_USER=test -e MYSQL_PASSWORD=123456 mysql --default-authentication-plugin=mysql_native_passwordd8f5e623dc595df19b9d6cce52780381b625c1565622f5867f2ad3aeafdca499 å¦‚æžœå®‰è£…åœ¨æœåŠ¡å™¨ä¸Šï¼Œåˆ™åœ¨my.cnfä¸­ä¿®æ”¹ç›¸å…³é…ç½® æµ‹è¯• æœ¬åœ°è¿žæŽ¥æµ‹è¯• 123456789101112131415161718~|â‡’ mysql -utest -p123456 -h 127.0.0.1mysql: [Warning] Using a password on the command line interface can be insecure.ERROR 2013 (HY000): Lost connection to MySQL server at &apos;reading initial communication packet&apos;, system error: 0~|â‡’ mysql -utest -p -h 127.0.0.1Enter password:Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 8Server version: 8.0.12 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; quit é€šè¿‡connection = engine.connect()æ— å¼‚å¸¸ ä½œä¸ºä¸€ä¸ªæš—å¤œç²¾çµçŽ©å®¶ï¼Œå¼ºçƒˆè°´è´£å¸Œå°”ç“¦çº³æ–¯çƒ§äº†æˆ‘è€å®¶çš„å‘åŠ£è¡Œå¾„ï¼Œæš´é›ªæ€Žä¹ˆæ´—ä¹Ÿæ²¡ç”¨]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>sqlalchemy</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¾Žç­¾è®°å½•]]></title>
    <url>%2Fpost%2Ffbe9394a.html</url>
    <content type="text"><![CDATA[è®°ç¬¬ä¸€æ¬¡æ‹¿åˆ°åå¹´ç¾Žç­¾ æ—¶é—´ æäº¤DS160: 2018-07-08 é¢„çº¦é¢ç­¾æ—¶é—´: 2018-07-27 å‰é¢æŽ’é˜Ÿäººå¤ªå¤š Issued: 2018-07-30 æŠ¤ç…§å·²ä»Žé¢†äº‹é¦†é‚£è¾¹æ”¶å›žï¼Œç›®å‰æ­£åœ¨å®‰æŽ’è¿é€: 2018-07-30 æ”¶åˆ°æŠ¤ç…§: 2018-08-02 æŒç»­æ—¶é—´ é¢ç­¾æŒç»­æ—¶é—´ï¼š1åˆ†é’Ÿä¸åˆ° APæŒç»­æ—¶é—´ï¼š2ä¸ªå·¥ä½œæ—¥ Issuedåˆ°é€åˆ°è‹å·žï¼š3ä¸ªå·¥ä½œæ—¥ é¢ç­¾é—®é¢˜ ä½ åŽ»ç¾Žå›½å¹²ä»€ä¹ˆï¼Ÿ è¦åŽ»ç¾Žå›½å¤šä¹…ï¼Ÿ ä½ æ˜¯åšä»€ä¹ˆå·¥ä½œçš„ï¼Ÿ ä½ ä»¬å…¬å¸æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ ä½ æ˜¯ä¸€ä¸ªäººåŽ»ä¹ˆï¼Ÿ â€œä½ é€šè¿‡äº†ï¼â€]]></content>
      <categories>
        <category>æ—…è¡Œ</category>
      </categories>
      <tags>
        <tag>visa</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openstackå­¦ä¹ ç¬”è®°1]]></title>
    <url>%2Fpost%2F9b5fb1d1.html</url>
    <content type="text"><![CDATA[è¯¥ç³»åˆ—ç”¨æ¥è®°å½•æœ¬äººä½¿ç”¨Openstackçš„ä¸€äº›ç¬”è®°å’Œå¿ƒå¾— Openstackä¸€äº›ç†è§£ æœåŠ¡è¯´æ˜Ž keystone - å¿…é€‰ è®¤è¯æœåŠ¡ï¼Œæ˜¯å…¶ä»–æ‰€æœ‰æœåŠ¡çš„åŸºç¡€ glance - å¿…é€‰ é•œåƒæœåŠ¡ï¼Œç”¨æ¥å­˜å‚¨é•œåƒæ–‡ä»¶ï¼Œå¦‚iso, vmdk, qcow2ç­‰ nova - å¿…é€‰ è®¡ç®—æœåŠ¡ï¼ŒåŒ…æ‹¬è®¡ç®—ï¼Œè°ƒåº¦ï¼Œç®¡ç†ï¼Œapiç­‰ï¼Œæ˜¯openstackçš„æ ¸å¿ƒæœåŠ¡ neutron - å¿…é€‰ ç½‘ç»œæœåŠ¡ horizon - å¯é€‰ï¼ˆæŽ¨èé€‰æ‹©ï¼‰ ç®¡ç†ç•Œé¢ï¼Œå›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿ä½¿ç”¨ cinder - å¯é€‰ å—å­˜å‚¨æœåŠ¡ï¼Œç”¨æ¥åˆ›å»ºè™šæ‹Ÿæœºçš„ç£ç›˜ ä¸€äº›ç†è§£ openstackå¯ä»¥ç†è§£ä¸ºæ’ä»¶åž‹çš„ï¼Œçµæ´»å°±ä½“çŽ°äºŽæ­¤ã€‚ è®¡ç®—æœåŠ¡ï¼ŒæŽ§åˆ¶èŠ‚ç‚¹å¯ä»¥åªåšè®¡ç®—çš„è°ƒåº¦ï¼Œç®¡ç†ï¼Œä¹Ÿå¯ä»¥åœ¨æŽ§åˆ¶èŠ‚ç‚¹ä¸Šå¯åŠ¨è®¡ç®—æœåŠ¡ åŒæ ·ï¼Œå¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šèµ·å—å­˜å‚¨æœåŠ¡ å…³äºŽç½‘ç»œ åˆšå¼€å§‹çš„æ—¶å€™å¾ˆç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆæ¯ä¸ªè®¡ç®—èŠ‚ç‚¹ä¸Šéƒ½è¦é…ç½®ä¸€ä¸ªé¢å¤–çš„ç½‘å¡ï¼Œå¹¶å°†å…¶è¿žåœ¨ä¸€èµ· éœ€è¦è¯´æ˜Žçš„æ˜¯ï¼š è™šæ‹Ÿæœºçš„ç¬¬ä¸€ä¸ªç½‘å£æ˜¯openstackçš„å„ä¸ªèŠ‚ç‚¹ç”¨æ¥é€šä¿¡çš„ç½‘å¡ ç¬¬äºŒä¸ªç½‘å£æ˜¯ç”¨æ¥å®žçŽ°åœ¨openstackä¸Šå¯åŠ¨çš„å®žä¾‹å½¼æ­¤é€šä¿¡çš„ï¼ˆå³ä¸œè¥¿å‘æµé‡ï¼‰ ä¹Ÿå¯ä»¥ä¸ç”¨ç¬¬äºŒä¸ªç½‘å£ï¼Œè¿™æ—¶ï¼Œä¸¤ä¸ªå®žä¾‹å¯ä»¥é€šè¿‡åŸºäºŽç¬¬ä¸€ä¸ªç½‘å£ä¹‹é—´å»ºç«‹çš„éš§é“è¿›è¡Œé€šä¿¡ å¦‚æžœè¦è®©å®žä¾‹å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œåˆ™éœ€è¦ä¸ºå…¶åˆ†é…ä¸“é—¨çš„è®¿é—®å¤–ç½‘çš„ç½‘å£ openstackå¹¶ä¸ç›´æŽ¥ç®¡ç†ç½‘å£æˆ–ç½‘æ¡¥ï¼Œè¦ä¹ˆé€šè¿‡linux bridgeï¼Œæˆ–è€…æ˜¯openvSwitch åœ¨openstackçš„UIä¸Šçœ‹åˆ°çš„ç½‘å£ï¼Œéƒ½æ˜¯ä»£å· æµ‹è¯•çŽ¯å¢ƒå‡†å¤‡ ä¸¤å°è™šæ‹Ÿæœºï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥all in oneï¼‰ ç¡¬ä»¶å‡†å¤‡ æ¯å°è™šæ‹Ÿæœºåº”åŒ…å« è™šæœºå¯ä¸Šç½‘ å¦å¤–åŒ…å«ä¸€å¼ é¢å¤–çš„ç½‘å¡ å†…å­˜å°½é‡å¤šï¼ˆ8Gï¼‰ CPUå°½é‡å¤šï¼ˆ8 cpusï¼‰ controllerç¡¬ç›˜ç¨å¾®å¤§ä¸€äº› åŸºæœ¬å‡†å¤‡ Ubuntu16.04 + Qç‰ˆæœ¬ï¼ˆQueensï¼‰ é…ç½®NTP å®‰è£…OpenstackåŸºç¡€åŒ… å‡†å¤‡ä»“åº“ 12# apt install software-properties-common# add-apt-repository cloud-archive:queens å®‰è£…openstackåŒ… 123$ apt update$ apt upgrade #ç»å®žé™…æµ‹è¯•ï¼Œå¦‚æžœç”¨apt dist-upgradeå¯èƒ½ä¼šå‡ºçŽ°é—®é¢˜ï¼Œå®‰è£…çš„ä¸æ˜¯æœ€æ–°çš„åŒ…$ apt install python-openstackclient controller controllerä¸Šéœ€è¦å®‰è£…çš„ä¸œè¥¿æœ€å¤š ä¾èµ– æ•°æ®åº“: MariaDB æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ æœåŠ¡åŠèº«ä»½è®¤è¯: Memcached etcd openstackæœåŠ¡ è®¤è¯æœåŠ¡: keystone é•œåƒæœåŠ¡: glance è®¡ç®—æœåŠ¡ï¼ˆæŒ‡è®¡ç®—çš„è°ƒåº¦ï¼Œç®¡ç†ï¼Œapiç­‰æœåŠ¡ï¼‰: nova ç½‘ç»œæœåŠ¡ï¼ˆç½‘ç»œç®¡ç†ï¼Œè°ƒåº¦ç­‰æœåŠ¡ï¼‰: neutron ç®¡ç†ç•Œé¢: horizon å—å­˜å‚¨æœåŠ¡ï¼ˆå¯é€‰ï¼‰: cinder compute è®¡ç®—èŠ‚ç‚¹ç›¸å¯¹æ¥è¯´ç®€å•äº†å¾ˆå¤š openstackæœåŠ¡ è®¡ç®—æœåŠ¡ï¼ˆä¸“æŒ‡è®¡ç®—æœåŠ¡ï¼‰: nova-compute ç½‘ç»œæœåŠ¡: neutron å¯åœ¨controllerä¸ŠåŒæ ·èµ·è®¡ç®—æœåŠ¡ è¯¦ç»†å®‰è£…è¿‡ç¨‹å¯å‚çœ‹å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨markdownå†™PPT]]></title>
    <url>%2Fpost%2F4f712e63.html</url>
    <content type="text"><![CDATA[è‡ªæ‰“æŽ¥è§¦Markdownä»¥æ¥ï¼Œæ·±æ·±çš„çˆ±ä¸Šäº†è¿™ç§æ ¼å¼çš„ä¹¦å†™ï¼Œå…ˆæ˜¯å¼„ç½‘ç«™ï¼Œç„¶åŽåˆå¼„ç”µå­ä¹¦ã€‚æœ€è¿‘è¦ç»™æ–°å‘˜å·¥åŸ¹è®­ï¼Œè¦å‡†å¤‡4ä¸ªPPTï¼ŒäºŽæ˜¯å°±æƒ³æœ‰æ²¡æœ‰ç›´æŽ¥ç”¨mdæ¥å†™PPTçš„å‘¢ï¼Ÿä¸Šç½‘ä¸€æœï¼Œè¿˜çœŸæœ‰ã€‚ æœ‰Reveal.js, LandSlide, GitPitchç­‰ï¼Œä½†ä¹Ÿè®¸æ˜¯æˆ‘ç ”ç©¶çš„ä¸æ·±å§ï¼Œgitpitchæ˜¯åœ¨çº¿çš„ï¼ŒLandSlideè¦ç”¨pipæ¥å®‰è£…ã€‚Reveal.jså€’æ˜¯ä¹‹å‰è§teamé‡Œçš„å¤§ç¥žæœ‰å†™è¿‡ï¼Œä½†çŽ°åœ¨å¥½åƒå˜æˆäº†slidesäº†ï¼Œä¹Ÿæ˜¯åœ¨çº¿çš„ã€‚æœ€ç»ˆï¼Œä¸»è§’å‡ºåœºï¼Œæˆ‘é€‰æ‹©äº†Marpã€‚ ä¼˜ç‚¹ ä¹¦å†™ç®€å• æä¾›ä¸¤å¥—æ¨¡ç‰ˆ å¯å®žæ—¶é¢„è§ˆ åªéœ€è¦ä¸€ä¸ªmdæ–‡ä»¶å³å¯ï¼Œä¸éœ€è¦å…¶ä»–è¯¸å¦‚yamlä¹‹ç±»çš„ä¸œè¥¿ æ”¯æŒMacï¼ŒWinå’ŒLinux ç¼ºç‚¹ æ²¡æœ‰åŠ¨ç”» åªèƒ½å¯¼å‡ºä¸ºpdfæ ¼å¼ï¼Œä¸èƒ½ç”ŸæˆPPTæ ¼å¼ ä»…æ”¯æŒåŸºç¡€çš„markdownè¯­æ³• è™½ç„¶æœ‰ç€ä¸Šé¢çš„ç¼ºç‚¹ï¼Œç„¶è€Œï¼Œå¯¹äºŽå†™æŠ€æœ¯ç±»PPTï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨äº† ç”¨æ³• Marpæä¾›ä¸¤å¥—ä¸»é¢˜ï¼Œéƒ½è¯´ä¸“æ²»é€‰æ‹©éšœç¢ã€‚ç‰¹åˆ«æ˜¯é»˜è®¤ä¸»é¢˜ï¼Œç®€ç›´æ˜¯é€‰æ‹©éšœç¢æ‚£è€…çš„ç¦éŸ³ã€‚ ä¸‹è½½å®Œå®‰è£…åŽï¼Œä¸¤ä¸ªä¾‹å­ä¸­å·²ç»æœ‰æ¯”è¾ƒåŸºæœ¬çš„è¯´æ˜Žäº†ã€‚ä½†æœ‰ä¸€äº›ä¸œè¥¿è¿˜æ˜¯å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚ è®¾ç½®é¡µç  é¡µç æ˜¯å¯ä»¥éšæ—¶å¼€å¯ï¼Œéšæ—¶å…³é—­çš„ã€‚ 1&lt;!-- page_number: true --&gt; åœ¨ä»»æ„é¡µè¾“å…¥ä»¥ä¸Šä»£ç å°±å¯ä»¥å¼€å¯ï¼Œä½†å¦‚æžœä½ è¦åœ¨å“ªé¡µå…³é—­æ˜¾ç¤ºé¡µç ï¼Œå¯ä»¥ç”¨false èƒŒæ™¯è®¾ç½® å› ä¸ºåªæœ‰ä¸¤å¥—æ¨¡ç‰ˆï¼Œæ‰€ä»¥ï¼Œæƒ³è¦å¥½çœ‹ç‚¹ï¼Œè¿˜æ˜¯éœ€è¦ä¸€äº›èƒŒæ™¯å›¾ç‰‡çš„ã€‚åˆšå¼€å§‹æˆ‘åªçŸ¥é“ç”¨![bg](aaa.png)çš„æ–¹å¼å¼•å…¥èƒŒæ™¯ï¼Œä½†åŽæ¥å‘çŽ°èƒŒæ™¯å›¾ç‰‡å…¶å®žæ˜¯å’ŒèƒŒæ™¯ä¸»é¢˜å åŠ äº†çš„ã€‚ åŽæ¥ç»†ç»†çœ‹äº†æ–‡æ¡£æ‰å‘çŽ°ï¼ŒåŽŸæ¥å¯ä»¥ç”¨å¼€å…³å¼€å¯ï¼Œè¿˜å¯ä»¥è®¾ç½®èƒŒæ™¯çš„å¤§å° 1![bg original 70%](aaa.png) ä½¿ç”¨äº†originalä¹‹åŽï¼ŒèƒŒæ™¯å°±å˜æˆäº†çº¯å›¾ç‰‡ï¼Œè€Œ70%åˆ™å¯ä»¥æŒ‡å®šå›¾ç‰‡å¤§å°ã€‚ å½“ç„¶ï¼Œæ›´æœ‰è¶£çš„æ˜¯ï¼Œå¯ä»¥ç”¨å¤šä¸ªèƒŒæ™¯å¹¶æŽ’çš„æ–¹å¼æ¥å®Œæˆéƒ¨åˆ†æ¤å…¥ã€‚ æ¯”å¦‚ï¼š åˆ™æ˜¯ç”¨å¦‚ä¸‹ä»£ç å®Œæˆ 123456![bg 450% original](robot2.png)![bg]()![bg]()![bg]()![bg]()![bg 450% original](robot2.png) è¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„æ˜¯ï¼Œå¦‚æžœä¸è®¾ç½®å›¾ç‰‡çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§æ‰©å……æ»¡æ•´ä¸ªå±å¹•æ¥è®¾ç½®ï¼Œä½†å¦‚æžœè®¾ç½®æ¯”ä¾‹ï¼Œå¦‚ä¸Šé¢çš„ä»£ç ï¼Œåˆ™100%æ˜¯æ•´ä¸ªé¡µé¢å®½åº¦/6ä¹‹åŽçš„å›¾ç‰‡å¤§å°ã€‚ å½“ç„¶ï¼Œçµæ´»è¿ç”¨è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œä¹Ÿèƒ½å¸¦æ¥å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„æ•ˆæžœã€‚ emoji å€¼å¾—ä¸€æçš„æ˜¯Marpçš„emojiè¡¨æƒ…é€‰æ‹©çš„å¾ˆæ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§ï¼Œè€Œä¸”å¯ä»¥æŒ‰ç…§æ®µè½æ¥è°ƒæ•´å¤§å° æ¯”å¦‚ï¼š 1234# :cat:## :fish:### :tiger:#### :bird: è¡¨æƒ…çš„å¤§å°ä¼šéšç€æ®µè½æ¯”è¾ƒè€Œå˜åŒ–ã€‚è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚ å¦å¤–ï¼Œä¼¼ä¹Žè½¯ä»¶çš„ä½œè€…æ­£åœ¨å¼€å‘æ–°çš„è½¯ä»¶ï¼Œå¾ˆæ˜¯æœŸå¾… ðŸ±]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04å®‰è£…Open vSwitch]]></title>
    <url>%2Fpost%2Fb2c6ed30.html</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒå‡†å¤‡ èŽ·å–å®‰è£…åŒ… 1git clone https://github.com/openvswitch/ovs.git å®‰è£…å¿…è¦çš„ä¾èµ– 1apt install autoconf libtool make libssl-dev libcap-ng-dev å®‰è£… å½“ä½¿ç”¨æºä»£ç æ—¶ï¼Œéœ€è¦è‡ªå·±åˆ›å»ºconfigureè„šæœ¬ 1$ ./boot.sh é…ç½®å¹¶å¼€å¯å†…æ ¸æ¨¡å— 1$ ./configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc --with-linux=/lib/modules/$(uname -r)/build å®‰è£… 12$ make$ make install å®‰è£…å†…æ ¸æ¨¡å— è¯¥æ­¥éª¤å¯èƒ½ä¼šæŠ¥é”™ï¼Œè¯·å‚çœ‹åŽæ–‡ 1$ make modules_install å®˜æ–¹å®‰è£…æ–‡æ¡£ä¸­æåˆ°ï¼Œä½ æœ‰å¯èƒ½ä¹‹å‰å·²ç»å®‰è£…äº†ovsçš„æ¨¡å—ï¼Œä¸ºäº†ç¡®ä¿ä½¿ç”¨çš„æ˜¯ä½ åˆšæ‰ç¼–è¯‘çš„ï¼Œåˆ™éœ€è¦åœ¨/etc/depmod.d/ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ 1234567$ config_file=&quot;/etc/depmod.d/openvswitch.conf&quot;$ for module in datapath/linux/*.ko; do modname=&quot;$(basename $&#123;module&#125;)&quot; echo &quot;override $&#123;modname%.ko&#125; * extra&quot; &gt;&gt; &quot;$config_file&quot; echo &quot;override $&#123;modname%.ko&#125; * weak-updates&quot; &gt;&gt; &quot;$config_file&quot; done$ depmod -a åŠ è½½å†…æ ¸æ¨¡å— 1$ /sbin/modprobe openvswitch éªŒè¯ 123456789$ /sbin/lsmod | grep openvswitchopenvswitch 303104 0tunnel6 16384 1 openvswitchnf_nat_ipv6 16384 1 openvswitchnf_defrag_ipv6 36864 2 openvswitch,nf_conntrack_ipv6nf_nat_ipv4 16384 2 openvswitch,iptable_natnf_nat 28672 6 nf_nat_redirect,openvswitch,nf_nat_ipv4,nf_nat_ipv6,xt_nat,nf_nat_masquerade_ipv4nf_conntrack 106496 11 xt_CT,openvswitch,nf_nat,nf_nat_ipv4,nf_nat_ipv6,xt_conntrack,nf_nat_masquerade_ipv4,nf_conntrack_netlink,xt_connmark,nf_conntrack_ipv4,nf_conntrack_ipv6libcrc32c 16384 2 raid456,openvswitch å¯åŠ¨æœåŠ¡ å®˜æ–¹è¯´æ˜Žä¸­æåˆ°æœ‰ä¸€ä¸ªovs-ctlçš„å‘½ä»¤ï¼Œç„¶è€Œï¼Œæˆ‘å®‰è£…å®Œä¹‹åŽå¹¶æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ã€‚å¯èƒ½å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒè€äº†å§ã€‚ åˆ›å»ºå¿…è¦çš„ç›®å½• 123$ mkdir -p /etc/openvswitch$ mkdir -p /var/log/openvswitch$ mkdir -p /var/run/openvswitch é…ç½®ovsdb-server ä»Žæºæ–‡ä»¶ç›®å½•åˆ›å»ºconf.db 12ovs$ ovsdb-tool create /etc/openvswitch/conf.db \ vswitchd/vswitch.ovsschema é…ç½® 123456ovsdb-server --remote=punix:/var/run/openvswitch/db.sock \ --remote=db:Open_vSwitch,Open_vSwitch,manager_options \ --private-key=db:Open_vSwitch,SSL,private_key \ --certificate=db:Open_vSwitch,SSL,certificate \ --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert \ --pidfile --detach --log-file åˆå§‹åŒ–æ•°æ®åº“ 1ovs-vsctl --no-wait init å¯åŠ¨ovsè¿›ç¨‹ 1ovs-vswitchd --pidfile --detach --log-file éªŒè¯ åˆ›å»ºbridge 1$ ovs-vsctl add-br br0 ä¸ºbr0æ·»åŠ æŽ¥å£ 1$ ovs-vsctl add-port br0 eth1 æŸ¥çœ‹é…ç½® 1$ ovs-vsctl show é—®é¢˜åŠè§£å†³ å®‰è£…å†…æ ¸æ¨¡å—æ—¶å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼Œå¿½ç•¥å³å¯ï¼ˆæˆ‘è¿˜ä»¥ä¸ºå¾ˆä¸¥é‡ï¼Œæœäº†ä¸€é˜µï¼Œå‘çŽ°ä¸ç”¨ç®¡ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839$ make modules_installcd datapath/linux &amp;&amp; make modules_installmake[1]: Entering directory &apos;/root/ovs/datapath/linux&apos;make -C /lib/modules/4.4.0-127-generic/build M=/root/ovs/datapath/linux modules_installmake[2]: Entering directory &apos;/usr/src/linux-headers-4.4.0-127-generic&apos; INSTALL /root/ovs/datapath/linux/openvswitch.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-geneve.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-gre.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-lisp.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-stt.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory INSTALL /root/ovs/datapath/linux/vport-vxlan.koAt main.c:222:- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178sign-file: certs/signing_key.pem: No such file or directory DEPMOD 4.4.0-127-genericmake[2]: Leaving directory &apos;/usr/src/linux-headers-4.4.0-127-generic&apos;depmod `sed -n &apos;s/#define UTS_RELEASE &quot;\([^&quot;]*\)&quot;/\1/p&apos; /lib/modules/4.4.0-127-generic/build/include/generated/utsrelease.h`make[1]: Leaving directory &apos;/root/ovs/datapath/linux&apos;]]></content>
      <categories>
        <category>cloud</category>
      </categories>
      <tags>
        <tag>ovs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitbook+gitlabå‘å¸ƒç§æœ‰çš„å›¾ä¹¦ä»“åº“]]></title>
    <url>%2Fpost%2F51748f3c.html</url>
    <content type="text"><![CDATA[è¿‘æœŸå¸¦ç€ä¸€äº›åŒäº‹å­¦ä¹ pythonï¼Œå¼€å§‹ç”¨markdownçš„æ ¼å¼å†™äº†å¾ˆå¤šç»ƒä¹ é¢˜ï¼Œä¸€ç›´æœ‰æƒ³æ³•å°†å…¶å‘å¸ƒæˆä¸€æœ¬ç”µå­ä¹¦åœ¨å…¬å¸å†…éƒ¨åˆ†äº«ã€‚ä½†ç”±äºŽæœ‰äº›å†…å®¹å¯èƒ½æ¶‰åŠå…¬å¸ç›¸å…³ï¼Œæ— æ³•ç›´æŽ¥å¯¹å¤–å‘å¸ƒã€‚è€Œå…¬å¸å†…éƒ¨è‡ªå»ºäº†ä¸€ä¸ªgitlabæœåŠ¡å™¨ï¼Œä¸€ç›´ç”¨äºŽæ‰˜ç®¡ä¸€äº›ä¸æ˜¯å¾ˆé‡è¦çš„ä»£ç ã€‚æ‰€ä»¥ï¼Œä¾¿æœ‰äº†å°†markdownæ‰˜ç®¡åˆ°gitlabä¸Šï¼Œç„¶åŽä½¿ç”¨gitbookåœ¨å†…éƒ¨è¿›è¡Œå‘å¸ƒã€‚ å¦ä¸€æ–¹é¢ï¼Œç”±äºŽæœ€è¿‘ç—´è¿·äºŽDockerï¼Œæ‰€ä»¥ï¼Œä¹ŸåŒæ ·å°†gitbookæ‰“åŒ…æˆdocker imageï¼Œç”¨äºŽå¿«é€Ÿå‘å¸ƒã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦ç”¨äºŽè®°å½•æ•´ä¸ªæ“ä½œè¿‡ç¨‹ã€‚ gitbook+docker æœ¬åœ°å®‰è£… å¯å‚çœ‹gitbookçš„å®˜æ–¹æ–‡æ¡£ çŽ¯å¢ƒéœ€æ±‚ gitbookéœ€è¦nodejsçŽ¯å¢ƒ NodeJS (v4.0.0 and above is recommended) å®‰è£…gitbook-cli 1npm install gitbook-cli -g åˆ›å»ºä¸€æœ¬ä¹¦ å½“ä½¿ç”¨gitlabæ—¶ï¼Œå¯è·³è¿‡æ­¤æ­¥éª¤ åˆ›å»ºå­˜æ”¾ä¹¦ç±çš„ç›®å½• 1$ mkdir mybook åˆå§‹åŒ– 1$ gitbook init åˆå§‹åŒ–å®ŒæˆåŽï¼Œå°†ç”ŸæˆSUMMARY.mdå’ŒREADME.md æ’ä»¶å®‰è£… å¦‚æžœæ²¡æœ‰ç”Ÿæˆbook.jsonï¼Œå¯è‡ªè¡Œåˆ›å»º 12345678910111213&#123;&quot;root&quot;: &quot;./&quot;,&quot;title&quot;: &quot;mybook&quot;,&quot;head_title&quot;: &quot;My first book&quot;,&quot;description&quot;: &quot;test with gitbook&quot;,&quot;author&quot;: &quot;myname&quot;,&quot;output.name&quot;: &quot;practice&quot;,&quot;gitbook&quot;: &quot;&gt;= 3.0.0&quot;,&quot;language&quot;: &quot;zh-hans&quot;,&quot;plugins&quot;: [ ] å°†æ’ä»¶åœ¨pluginså­—æ®µä¸­è¿›è¡Œå£°æ˜ŽåŽï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… 1$ gitbook install é¢„è§ˆå’Œå‘å¸ƒè‡ªå·±çš„ä¹¦ 1$ gitbook serve éšåŽå¯ç™»é™†http://localhost:4000æ¥é¢„è§ˆè‡ªå·±çš„ä¹¦ dockeré•œåƒ å…¶å®žåœ¨docker hubä¸Šæœç´¢ä¾¿å¯ä»¥å¾—åˆ°gitbookçš„é•œåƒï¼Œä½†æœ¬ç€å­¦ä¹ çš„æ€åº¦ï¼Œè¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹ç»ƒä¹ åˆ¶ä½œè‡ªå·±çš„dockeré•œåƒã€‚ ç”±äºŽnodejsæœ‰å®˜æ–¹æä¾›çš„dockeré•œåƒï¼Œæ‰€ä»¥ï¼Œä¸€åˆ‡å˜å¾—å¾ˆç®€å• Dockerfile 12345678910FROM node:8-alpineMAINTAINER Bo Qi &lt;simble1986@gmail.com&gt;RUN npm install gitbook-cli -g &amp;&amp; npm install &amp;&amp; gitbook installWORKDIR /bookEXPOSE 4000 35729CMD gitbook install &amp;&amp; gitbook serve ç¼–è¯‘dockeré•œåƒ 1$ docker build --tag mygitbook . ä¹¦çš„ç»“æž„ å½“ä½¿ç”¨gitbook initåŽä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šREADME.mdå’ŒSUMMARY.md. å…¶ä¸­ï¼ŒREADME.mdç”¨æ¥å¯¹æœ¬ä¹¦è¿›è¡Œä¸€äº›è¯´æ˜Ž è€ŒSUMMARY.mdåˆ™ç”¨æ¥åˆ›å»ºç›®å½•ç»“æž„ã€‚ SUMMARY.md 1234567891011121314151617# Summary* [ä»‹ç»](README.md)* [Gitä½¿ç”¨](gitSetup.md)* [PythonåŸºç¡€](part1/README.md) * [ç»ƒä¹ 1-åˆ—è¡¨](part1/1.md) * [ç»ƒä¹ 2-å­—å…¸](part1/2.md) * [ç»ƒä¹ 3-æ•°æ®ç»“æž„åµŒå¥—](part1/3.md) * [ç»ƒä¹ 4-è¿ç®—ç¬¦](part1/4.md) * [ç»ƒä¹ 5-é€»è¾‘æŽ§åˆ¶](part1/5.md) * [ç»ƒä¹ 6-å¼‚å¸¸å¤„ç†](part1/6.md) * [ç»ƒä¹ 7-å‡½æ•°](part1/7.md) * [ç»ƒä¹ 8-æ–‡ä»¶æ“ä½œ](part1/8.md) * [è½»æ¾ä¸€åˆ»-çŒœæ•°å­—æ¸¸æˆ](part1/happy1.md) * [ç»ƒä¹ 9-ç±».1](part1/9.md) * [ç»ƒä¹ 10-ç±».2](part1/10.md) * [ç»ƒä¹ 11-ç±»çš„ç»§æ‰¿](part1/11.md) book.json éœ€è¦è‡ªå·±åˆ›å»ºbook.json 12345678910111213141516171819202122232425262728293031323334353637&#123; "root": "./", "title": "ç»ƒä¹ python", "head_title": "é€šè¿‡ç»ƒä¹ çš„æ–¹å¼æ¥å­¦ä¹ python", "description": "é€šè¿‡å°ç»ƒä¹ ä¸€ç‚¹ä¸€ç‚¹ç†Ÿæ‚‰python", "author": "myname(simble1986@gmail.com)", "output.name": "é€šè¿‡ç»ƒä¹ å­¦è„šæœ¬", "gitbook": "3.2.3", "language": "zh-hans", "links" : &#123; "sidebar" : &#123; "Home" : "http://www.simble.site" &#125; &#125;, "plugins": [ "autotheme", "prism", "prism-themes", "-highlight", "-search", "search-pro", "emphasize", "splitter", "tbfed-pagefooter", "toggle-chapters", "codeblock-filename", "ace", "simple-page-toc", "edit-link", "copy-code-button", "alerts", "anchor-navigation-ex", "theme-comscore" ]&#125; git-labå½’æ¡£ åœ¨gitlabä¸Šåˆ›å»ºè‡ªå·±çš„projectå¹¶å½’æ¡£ åœ¨æœåŠ¡å™¨ä¸Šç”¨dockerå¯åŠ¨é¢„è§ˆ ä»Žgitlabä¸Šcloneä¹¦çš„ç»“æž„ å¯åŠ¨dockerå¹¶æŒ‚è½½gitbookçš„ç›®å½•åˆ°dockerä¸­ 1$ docker run -d -p 80:4000 -v /mybook:/book mygitbook æ’ä»¶åŠè¯´æ˜Ž éžå¸¸æ„Ÿè°¢Zhangjikaiçš„æ’ä»¶è¯´æ˜Žæ–‡æ¡£ï¼Œç„¶åŽæˆ‘å‘çŽ°Zhangjikaiå’Œæˆ‘ä¸€æ ·ä½¿ç”¨äº†Hexoæ­å»ºäº†è‡ªå·±çš„blogï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº†Nextçš„ä¸»é¢˜]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[python virtenvçŽ¯å¢ƒæ­å»º]]></title>
    <url>%2Fpost%2F4926e490.html</url>
    <content type="text"><![CDATA[è¿‘æœŸç”±äºŽç»„å†…æµ‹è¯•æ¡†æž¶æ›´æ–°é¢‘ç¹ï¼Œä¸”ç”±äºŽæ¡†æž¶é‡‡ç”¨äº†æ’ä»¶å½¢å¼ï¼Œå®‰è£…åŒ…å¾ˆå¤šã€‚å½“ä½¿ç”¨åŒä¸€å°æœåŠ¡å™¨æ¥å®‰è£…æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿäº§çŽ¯å¢ƒç ´åã€‚ä¸ºæ­¤ï¼Œå¿…é¡»é‡‡ç”¨virtenvæ–¹å¼ã€‚ virtualenvçš„çŽ¯å¢ƒå»ºç«‹å¹¶ä¸å¤æ‚ï¼Œä½†æ¯æ¬¡éƒ½éœ€è¦åŽ»æŸ¥ä¸€ç•ªã€‚ç‰¹æ­¤è®°å½• å®‰è£… å®‰è£…virtualenv python2.7 1pip install virtualenv python3 1pip3 install virtualenv ä½¿ç”¨ åˆ›å»ºå·¥ä½œç›®å½• 12root@vm1:/home/test# mkdir myprojectroot@vm1:/home/test# cd myproject åˆ›å»ºç‹¬ç«‹çš„pythonè¿è¡ŒçŽ¯å¢ƒ 1234root@vm1:/home/test# virtualenv venvNew python executable in /home/test/myproject/venv/bin/pythonInstalling setuptools, pip, wheel...done.root@vm1:/home/test# å¼•ç”¨æ–°çš„çŽ¯å¢ƒå˜é‡ 12root@vm1:/home/test# source venv/bin/activate(venv)root@vm1:/home/test# å¼€å§‹ä½¿ç”¨ 1(venv)root@vm1:/home/test# pip install docker é€€å‡ºå½“å‰venvçŽ¯å¢ƒ 12(venv)root@vm1:/home/test# deactivateroot@vm1:/home/test# ä¸€ä¸ªå°é—®é¢˜ git cloneæ—¶é‡åˆ°server certificate verification failed. CAfile: /etc/ssl/certs/ca-certificates.crt CRLfile: noneçš„è§£å†³æ–¹æ³• 1export GIT_SSL_NO_VERIFY=1]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker APIä¸€ç§è¿žæŽ¥åˆ°PTYçš„äº¤äº’æ–¹æ³•]]></title>
    <url>%2Fpost%2Fb18ab8ad.html</url>
    <content type="text"><![CDATA[æŠ˜è…¾äº†ä¸€å‘¨å¤šï¼Œç»ˆäºŽæžå®šäº†åœ¨dockerçš„python APIä¸‹ï¼Œå½“æ‰§è¡Œexec_runæ—¶ï¼Œå¦‚ä½•è¿žæŽ¥containerçš„PTYã€‚ å½“å¼„æ˜Žç™½ä¹‹åŽï¼Œæ‰å‘çŽ°åŽŸæ¥æ˜¯é‚£ä¹ˆç®€å•ã€‚ä¹‹å‰å‡ ä¹Žæœéäº†googleå’Œç™¾åº¦ï¼Œéƒ½æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„æ–‡ç«  å‰è¨€ è¿™ä¸¤å¹´ï¼Œdockerçš„å‘å±•å¦‚ç«å¦‚è¼ï¼Œä½œä¸ºç½‘ç»œæµ‹è¯•ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨å°è¯•ç€å°†dockerå¼•å…¥æµ‹è¯•ä¸­ï¼Œæ¥æ›´å¤šçš„æ¨¡æ‹ŸçœŸå®žç”¨æˆ·ï¼Œå¹¶å®žçŽ°è‡ªåŠ¨åŒ–ã€‚ Pexpectæ˜¯ä¸€ä¸ªéžå¸¸å¼ºå¤§ä¸”å¥½ç”¨çš„å·¥å…·ï¼Œå½“éœ€è¦ä¸Žè®¾å¤‡å’ŒPCè¿žæŽ¥æ—¶ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šç”¨åˆ°ã€‚è€Œä¹‹å‰éƒ½ç›´æŽ¥ä½¿ç”¨spawnä¸€ä¸ªå‘½ä»¤è¡Œæ¥è¿›è¡Œè¿žæŽ¥ æœ¬ç¯‡åšæ–‡å°†ä»‹ç»ä¸€ç§ä½¿ç”¨pexpectçš„fdspawnï¼Œé€šè¿‡socketæ–¹å¼è¿žæŽ¥åˆ°containerçš„æ–¹æ³•ï¼Œä»¥ä¾¿ä¸Žè¿œç¨‹çš„containerè¿›è¡Œäº¤äº’ è‡ªåŠ¨åŒ–æ€è·¯ clienté€šè¿‡python APIè¿žæŽ¥åˆ°docker åˆ›å»ºä¸€ä¸ªcontainerå¹¶ä¿æŒè¿è¡Œ ä½¿ç”¨exec_run()æ–°å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œè¿è¡Œ/bin/bashï¼Œå¹¶å¼€å¯socketæ–¹å¼ ä½¿ç”¨pexpectçš„fdspawnè¿žæŽ¥exec_run()è¿”å›žçš„socket çŽ¯å¢ƒå‡†å¤‡ Dockerå¼€å¯remote API å‚è§ä¹‹å‰åšæ–‡ Docker Client å®‰è£…å¿…è¦çš„åŒ… 12$ pip install docker$ pip install pexpect å¼€å§‹ä½¿ç”¨ åˆ›å»ºcontainer 123&gt;&gt;&gt; import docker&gt;&gt;&gt; client=docker.DockerClient(base_url='tcp://10.0.0.10:1234')&gt;&gt;&gt; c1 = client.containers.run("ubuntu", detach=True, tty=True) è¿žæŽ¥container 123456&gt;&gt;&gt; res = c1.exec_run("/bin/bash", socket=True, stdin=True, tty=True)&gt;&gt;&gt; resExecResult(exit_code=None, output=&lt;socket object, fd=15, family=1, type=1, protocol=0&gt;)&gt;&gt;&gt; sock = res.output&gt;&gt;&gt; sock&lt;socket object, fd=15, family=1, type=1, protocol=0&gt; ä½¿ç”¨pexpectè¿žæŽ¥ 1234567891011&gt;&gt;&gt; import pexpect.fdpexpect&gt;&gt;&gt; session=pexpect.fdpexpect.fdspawn(sock.fileno(),timeout=10)&gt;&gt;&gt; &gt;&gt;&gt; session.send("ls\n")3&gt;&gt;&gt; session.expect("#")0&gt;&gt;&gt; session.before' ls\r\n\x1b[0m\x1b[01;34mbin\x1b[0m \x1b[01;34mdev\x1b[0m \x1b[01;34mhome\x1b[0m \x1b[01;34mlib64\x1b[0m \x1b[01;34mmnt\x1b[0m \x1b[01;34mproc\x1b[0m \x1b[01;34mrun\x1b[0m \x1b[01;34msrv\x1b[0m \x1b[30;42mtmp\x1b[0m \x1b[01;34mvar\x1b[0m\r\n\x1b[01;34mboot\x1b[0m \x1b[01;34metc\x1b[0m \x1b[01;34mlib\x1b[0m \x1b[01;34mmedia\x1b[0m \x1b[01;34mopt\x1b[0m \x1b[01;34mroot\x1b[0m \x1b[01;34msbin\x1b[0m \x1b[01;34msys\x1b[0m \x1b[01;34musr\x1b[0m\r\n\x1b]0;root@6a097ddbe55d: /\x07root@6a097ddbe55d:/'&gt;&gt;&gt; session.after'#'&gt;&gt;&gt; æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨exec_run()æ‰§è¡Œå¼€å¯å‘½ä»¤æ—¶ï¼Œéœ€è¦æŒ‡å®šstdin=Trueï¼Œå¦åˆ™ï¼Œpexpectçš„send()å°†æ— æ³•å°†å‘½ä»¤å‘é€è‡³container åŒæ ·ï¼Œåœ¨ä½¿ç”¨exec_run()æ—¶ï¼Œéœ€è¦æŒ‡å®štty=Trueï¼Œå¦åˆ™ï¼Œå°†æ²¡æœ‰å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œæ— æ³•è¿›è¡ŒåŒ¹é…]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>pexpect</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerptyä½¿ç”¨]]></title>
    <url>%2Fpost%2F1c49a9aa.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡åšå®¢å°†ä»‹ç»åœ¨ä½¿ç”¨docker APIæ—¶ï¼Œå¦‚ä½•ç›‘ç®¡containerçš„PTYå®žçŽ°äº¤äº’ é—®é¢˜å¼•å…¥ dockerå®˜æ–¹å·²ç»æä¾›äº†APIç”¨æ¥ç®¡ç†clientï¼Œcontainerï¼Œimageï¼Œnetworkç­‰ï¼ŒåŸºæœ¬çš„æ“ä½œè¦†ç›–äº†docker CLIç›¸å…³åŠŸèƒ½ï¼Œä½†dockerçš„APIçŽ°åœ¨åªèƒ½ä½¿ç”¨exec_runæ¥æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œä¸­é—´æ— æ³•è¿›è¡Œäº¤äº’ï¼Œå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äºŽ-itçš„æ–¹å¼æ¥å®Œæˆäº¤äº’æ“ä½œã€‚ ç»è¿‡å‡ å¤©çš„å­¦ä¹ å’Œæµ‹è¯•ï¼Œå‘çŽ°å…¶å®ždockerçš„containers.run()å’Œcontainers.exec_run()éƒ½æ˜¯å¯ä»¥è®¾ç½®stdin=True, tty=Trueã€‚ä½†å¼€å¯è¿™äº›ä¹‹åŽï¼Œå°†è¿”å›žä¸€ä¸ªsocketï¼Œéœ€è¦è‡ªå·±æ¥è¿›è¡Œå¤„ç†ã€‚ googleå¤§æ³•åŽï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªdockerptyçš„python libï¼Œå¯ä»¥å®Œæˆè¿™ä»¶äº‹æƒ… çŽ¯å¢ƒæ­å»º æ ¹æ®dockerptyçš„githubä¸Šæåˆ°çš„å®‰è£…è¿‡ç¨‹ï¼Œåªéœ€è¦pip install dockerptyå³å¯å®Œæˆå®‰è£…ã€‚ ä½†æºç å·²ç»æœ‰ä¸¤å¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œè¯¥ç‰ˆæœ¬æ— æ³•åœ¨æ–°çš„docker APIä¸Šæ­£å¸¸å·¥ä½œ forkäº†å·¥ç¨‹åŽï¼Œå¯¹å…¶ä¸­çš„ä»£ç æ¶‰åŠåˆ°çš„docker APIè¿›è¡Œæ›´æ–°åŽï¼Œæµ‹è¯•å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæœ€æ–°çš„ä»£ç å·²ç»ä¸Šä¼ åˆ°gitä¸Šsimble1986/dockerpty ä¾èµ– åŽŸæœ‰çš„projectä¸Šæåˆ°ä¾èµ–çš„docker apiä¸ºdocker-py&gt;=0.3.2ï¼Œä½†dockerçš„python APIå·²ç»æ›´æ–° å®‰è£…docker API 1pip install docker å®‰è£…æ­¥éª¤ èŽ·å–æºç  1git clone https://github.com/simble1986/dockerpty.git å®‰è£… 123$ pip uninstall dockerpty$ cd dockerpty$ python setup.py install ç›¸å…³API å‚çœ‹dockerå®˜æ–¹APIæ–‡æ¡£ï¼Œä»¥ä¸‹ä¸»è¦å¯¹containerç›¸å…³å‚æ•°åŠ ä»¥è¯´æ˜Ž tty (bool) â€“ Allocate a pseudo-TTY. stdin_open (bool) â€“ Keep STDIN open even if not attached. åŸºæœ¬ä½¿ç”¨ è¿žæŽ¥client 1234567root@slt-docker:/home/bqi# pythonPython 2.7.12 (default, Dec 4 2017, 14:50:18)[GCC 5.4.0 20160609] on linux2Type "help", "copyright", "credits" or "license" for more information.&gt;&gt;&gt; import docker&gt;&gt;&gt; import dockerpty&gt;&gt;&gt; client=docker.from_env() æ³¨ï¼š æ”¯æŒè¿œç¨‹API åˆ›å»ºcontainer 1&gt;&gt;&gt; test1 = client.containers.create("ubuntu","/bin/bash",tty=True,stdin_open=True) ä½¿ç”¨dockerpty 123456&gt;&gt;&gt; dockerpty.start(client,test1)root@d6ddcf619602:/# lsbin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr varroot@d6ddcf619602:/# exitexit&gt;&gt;&gt;]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>dockerpty</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerä¸­æ— å¯†ç aptå®‰è£…mysql]]></title>
    <url>%2Fpost%2F70cf198a.html</url>
    <content type="text"><![CDATA[é—®é¢˜å‡ºçŽ° Linuxåœ¨ç¬¬ä¸€æ¬¡å®‰è£…æœ‰äº›è½¯ä»¶æ—¶ä¼šæœ‰äº¤äº’çš„è¾“å…¥çš„éœ€æ±‚ï¼Œæ¯”å¦‚mysqlåœ¨é¦–æ¬¡å®‰è£…æ—¶éœ€è¦è®¾ç½®rootçš„å¯†ç ã€‚è¿™åœ¨æ­£å¸¸é…ç½®è¿‡ç¨‹ä¸­æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†åœ¨ä½¿ç”¨DockerFileåˆ›å»ºdockeré•œåƒæ—¶ï¼Œåˆ™é‡åˆ°äº†éº»çƒ¦ã€‚ è§£å†³æ€è·¯ å¦‚æžœå°†å®‰è£…å¥½çš„mysql-serverä½¿ç”¨apt removeä»Žç³»ç»Ÿä¸­å¸è½½åŽï¼Œå†æ¬¡é‡æ–°å®‰è£…ï¼Œåˆ™ä¸å†éœ€è¦è¾“å…¥å¯†ç ã€‚å¦å¤–å½“å®‰è£…å®Œä¸€äº›è½¯ä»¶åŽï¼Œå¯ä»¥ä½¿ç”¨dpkg-configæ¥é‡æ–°é…ç½®ã€‚ è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨å®‰è£…è½¯ä»¶å‰å…ˆå¯¹ç³»ç»Ÿåšå¥½ç›¸å…³é…ç½®ã€‚æŽ¥ä¸‹æ¥ï¼Œå°±æ˜¯éœ€è¦èŽ·å–è½¯ä»¶çš„å¿…è¦é…ç½®é¡¹ èŽ·å–è½¯ä»¶å¿…è¦é…ç½®é¡¹ ä¸‹è½½è½¯ä»¶åŒ… å¯ä»¥é€šè¿‡ç½‘ä¸Šæœç´¢æ–¹å¼ä¸‹è½½ç›¸å…³çš„debåŒ…ï¼Œä½†ä¼—æ‰€å‘¨çŸ¥ï¼ŒLinuxçš„è½¯ä»¶åŒ…ç‰ˆæœ¬å¤šï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¹¶ä¸çŸ¥é“éœ€è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬ã€‚ä½†å¯ä»¥ä½¿ç”¨aptæ¥ä¸‹è½½ç›¸åº”çš„è½¯ä»¶åŒ… 1$ apt-get -d install -y mysql-server ä½¿ç”¨apt-getçš„-då‚æ•°ï¼Œå°†åªä¼šä¸‹è½½ï¼Œä¸è¿›è¡Œå®‰è£…ã€‚ä¸‹è½½å®Œæ¯•åŽï¼Œè½¯ä»¶åŒ…ä½äºŽ/var/cache/apt/archivesç›®å½•ä¸‹ã€‚ èŽ·å–é…ç½®é¡¹ è¿›å…¥è½¯ä»¶åŒ…çš„å­˜æ”¾ç›®å½•ï¼Œç„¶åŽæ‰§è¡Œ 1dpkg-preconfigure mysql-server-5.1_5.1.49-3_amd64.deb ä½¿ç”¨debconfig-showæ¥æŸ¥çœ‹ç›¸åº”çš„é…ç½®é¡¹ 12345$ debconf-show mysql-server mysql-server/root_password: (password omitted) mysql-server/root_password_again: (password omitted) mysql-server/error_setting_password: ... å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸¤é¡¹æ˜¯å¿…é¡»é…ç½®çš„ï¼šmysql-server/root_passwordå’Œmysql-server/root_password_again é¢„é…ç½® åˆ›å»ºé…ç½®æ–‡ä»¶ åœ¨åˆé€‚çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚mysql-passwdï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ 12debconf mysql-server/root_password password 123456debconf mysql-server/root_password_again password 123456 åŠ è½½é…ç½® 1$ debconf-set-selections mysql-passwd æµ‹è¯•ç»“æžœ å†æ¬¡å®‰è£…mysql-serverï¼Œå°†ä¸å†éœ€è¦è¾“å…¥å¯†ç  1$ apt-get install -y mysql-server DockerFileå¤„ç† DockerFileåº”å½“å°½é‡é¿å…ä¸éœ€è¦çš„æ“ä½œï¼Œæ‰€ä»¥ï¼ŒèŽ·å–é…ç½®é¡¹çš„æ“ä½œå¯ä»¥æå‰åœ¨å®žéªŒçŽ¯å¢ƒä¸­å®Œæˆã€‚ å¯å°†èŽ·å–çš„å‘½ä»¤è¡Œä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œä½¿ç”¨æ—¶copyè¿‡åŽ»ã€‚ 12COPY ./mysql-passwd /tmp/mysql-passwdRUN apt-get update &amp;&amp; debconf-set-selections /tmp/mysql-passwd &amp;&amp; apt-get install -yqq mysql-server &amp;&amp; rm -rf /var/lib/apt/lists/* æˆ–è€…æ˜¯åœ¨DockerFileä¸­ç›´æŽ¥ç”Ÿæˆï¼Œè¿™æ—¶åˆ™å¯ä»¥å°†mysql passwdè®¾ç½®ä¸ºå‚æ•° 12RUN echo debconf mysql-server/root_password password 123456 &gt; /tmp/mysql-passwd &amp;&amp; echo debconf mysql-server/root_password_again password 123456 &gt;&gt; /tmp/mysql-passwdRUN apt-get update &amp;&amp; debconf-set-selections /tmp/mysql-passwd &amp;&amp; apt-get install -yqq mysql-server &amp;&amp; rm -rf /var/lib/apt/lists/*]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>DockerFile</tag>
        <tag>mysql-server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo+Nextä¸Šå¼€å¯Valineè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2Fpost%2Fa072bce6.html</url>
    <content type="text"><![CDATA[æœ‹å‹ä¹‹å‰é—®æ€Žä¹ˆæ²¡æœ‰å¼€è¯„è®ºç³»ç»Ÿï¼Œå€’ä¸æ˜¯ä¸æƒ³å¼€ï¼Œè€Œæ˜¯åˆšå¼€å§‹å»ºç«™çš„æ—¶å€™æµè§ˆäº†å¥½å¤šåšæ–‡ï¼Œä¼¼ä¹Žå¾ˆå¤šåŽŸæ¥çš„æŽ¥å£éƒ½åœ¨hexoä¸å¤ªå¥½ç”¨äº†ã€‚ç‰¹åˆ«æ˜¯å¾ˆå¤šåšæ–‡éƒ½æ˜¯ä¸¤å¹´å‰å†™çš„ï¼Œå½“ç„¶ï¼Œå¤§å¤šæ•°å…¶ä»–åŠŸèƒ½éƒ½æ²¡é—®é¢˜ ç®€ä»‹ Valine Valineæ˜¯ä¸€æ¬¾åŸºäºŽLeancloudçš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åŽç«¯è¯„è®ºç³»ç»Ÿã€‚ Leancloud æˆ‘çš„ç†è§£ï¼ŒLeancloudç›¸å½“äºŽæ˜¯ä¸€ä¸ªæ•°æ®æ‰˜ç®¡å¹³å°ï¼Œå¯ä»¥å¸®åŠ©åº”ç”¨å­˜å‚¨ç›¸å…³æ•°æ®ã€‚Valineä¸»è¦ç”¨åˆ°çš„æ˜¯å…¶ä¸­çš„æ•°æ®å­˜å‚¨â€”â€”comments çŽ¯å¢ƒè¯´æ˜Ž ä½¿ç”¨äº†æœ€æ–°ç‰ˆçš„Hexoä»¥åŠæœ€æ–°ç‰ˆçš„Nextä¸»é¢˜ èŽ·å–AppID æ³¨å†ŒLeancloud è®¿é—®Leancloudï¼Œç‚¹å‡»å…è´¹è¯•ç”¨å°±ä¼šè·³è½¬åˆ°æ³¨å†Œ/ç™»é™†é¡µé¢ã€‚å½“å‰æ”¯æŒé€šè¿‡Githubï¼ŒWeiboä»¥åŠQQè¿›è¡Œæ³¨å†Œ æ³¨å†Œå®ŒåŽéœ€è¦éªŒè¯é‚®ç®± åˆ›å»ºåº”ç”¨ è®¿é—®æŽ§åˆ¶å°ï¼Œåœ¨æŽ§åˆ¶å°ä¸­åˆ›å»ºæ–°åº”ç”¨ èŽ·å–åº”ç”¨Key ç‚¹å‡»æ–°åˆ›å»ºçš„åº”ç”¨â€”â€”è®¾ç½®â€”â€”åº”ç”¨Keyï¼Œä¿å­˜é¡µé¢ä¸Šçš„App IDä»¥åŠApp Keyä»¥å¤‡åŽç»­ä½¿ç”¨ é…ç½®Valine åœ¨æœ€æ–°ç‰ˆçš„Nextä¸»é¢˜ä¸­ï¼Œå·²ç»åˆå…¥äº†Valineçš„é…ç½®ä»£ç ï¼Œä½¿å¾—é…ç½®èµ·æ¥éžå¸¸å¿«æ·ã€‚è®¿é—®Hexoä¸­ä½¿ç”¨Valineï¼Œç‚¹å‡»mergedï¼Œä¼šè·³è½¬åˆ°Nextä¸»é¢˜çš„mergeåŽ†å² æ£€æŸ¥ç›¸å…³æ–‡ä»¶ å¯ä»¥å†æ¬¡æ£€æŸ¥å¹¶ç¡®è®¤ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlï¼Œlayout/_macro/post.swigå’Œlayout/_third-party/comments/valine.swigæ˜¯å¦éƒ½å·²ç»åˆå…¥äº†ç›¸å…³ä»£ç  é…ç½®AppKey ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlä¸­çš„valineéƒ¨åˆ†å†…å®¹ 12345678910valine: enable: true appid: $Your APP ID # your leancloud application appid appkey: $Your APP Key # your leancloud application appkey notify: false # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: éšä¾¿è¯´äº›ä»€ä¹ˆå§ # comment box placeholder avatar: mm # gravatar style guest_info: nick,mail,link # custom comment header pageSize: 10 # pagination size é‡æ–°ç”Ÿæˆé¡µé¢ æ‰§è¡Œå‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶éƒ¨ç½² 1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d åˆ°è¿™é‡Œï¼ŒæŸ¥çœ‹é¡µé¢å·²ç»å¯ä»¥çœ‹åˆ°è¯„è®ºç³»ç»Ÿ åˆ›å»ºç•™è¨€é¡µé¢ å¯ä»¥ä¸ºç«™ç‚¹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç•™è¨€æ¿é¡µé¢ åˆ›å»ºé¡µé¢ 1$ hexo new page guestbook é…ç½®ä¸»é¢˜ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.xmlçš„menuå­—æ®µæ–°å¢žguestbookå­—æ®µ 12345678910menu: home: / || home tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat about: /about/ || user guestbook: /guestbook/ || comments å¯ä»¥è®¿é—®fontawesomeé€‰æ‹©è‡ªå·±å–œæ¬¢çš„å›¾æ ‡æ¥ä½œä¸ºç•™è¨€æ¿çš„å›¾æ ‡ æœ¬åœ°åŒ–å¤„ç† ç¼–è¾‘å¯¹åº”è¯­è¨€çš„é…ç½®æ–‡ä»¶themes/next/languages/zh-CN.ymlï¼Œåœ¨menuä¸­å¢žåŠ guestbookçš„ä¸­æ–‡ 1234567891011menu: home: é¦–é¡µ archives: å½’æ¡£ categories: åˆ†ç±» tags: æ ‡ç­¾ about: å…³äºŽ search: æœç´¢ schedule: æ—¥ç¨‹è¡¨ sitemap: ç«™ç‚¹åœ°å›¾ commonweal: å…¬ç›Š 404 guestbook: ç•™è¨€ ç¼–è¾‘é¡µé¢ ç¼–è¾‘ä¹‹å‰ç”Ÿæˆçš„guestbooké¡µé¢ 123456---title: ç•™è¨€æ¿date: 2018-03-26 23:36:19comments: true---&lt;center&gt;æ—¢ç„¶æ¥äº†ï¼Œå°±æ˜¯ä¸€ç§ç¼˜åˆ†ï¼Œç•™ä¸‹ç‚¹ä»€ä¹ˆå§:cat:&lt;/center&gt; é‡æ–°éƒ¨ç½²ä¹‹åŽå°±å¯ä»¥çœ‹åˆ°ç•™è¨€æ¿äº† ðŸ˜ƒ æ¸…é™¤æµ‹è¯•ç•™è¨€ ä¸ºäº†ç¡®ä¿ç•™è¨€åŠŸèƒ½å·²ç»æ­£å¸¸å·¥ä½œï¼Œéƒ½ä¼šæµ‹è¯•ä¸€ä¸‹ã€‚æµ‹è¯•å®Œæ¯•åŽï¼Œå¯ä»¥é€šè¿‡Leancloudçš„æŽ§åˆ¶å°æ¸…é™¤æµ‹è¯•æ•°æ® ç‚¹å‡»myblogâ€”â€”å­˜å‚¨â€”â€”Commentsï¼Œå³å¯æŸ¥çœ‹å½“å‰ç•™è¨€ï¼Œé€‰ä¸­æµ‹è¯•æ—¶çš„ç•™è¨€ï¼Œåˆ é™¤å³å¯]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>Next</tag>
        <tag>Valine</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨Ubuntu 16.04ä¸Šå¼€å¯Dockerçš„Remote API]]></title>
    <url>%2Fpost%2F3e41aa59.html</url>
    <content type="text"><![CDATA[ç”±äºŽè‡ªåŠ¨åŒ–çš„è€ƒè™‘ï¼Œéœ€è¦ç”¨dockerçš„remote APIï¼Œå°è¯•äº†å¤šç§æ–¹æ³•ï¼Œæœ€ç»ˆæ‰æ‰¾åˆ°äº†å¯è¡Œçš„æ–¹æ³• å¯è¡Œçš„æ–¹æ³• ç¼–è¾‘/lib/systemd/system/docker.service 1$ vim /lib/systemd/system/docker.service ä¿®æ”¹ExecStartçš„å‚æ•° 1ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 éšåŽæ‰§è¡Œservice docker restartæ—¶ä¼šæç¤ºWarning: docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.åˆ™è¡¨ç¤ºé…ç½®æˆåŠŸ 1systemctl daemon-reload é‡å¯dockeræœåŠ¡ 1service docker restart æµ‹è¯•æ˜¯å¦æˆåŠŸ 12$ curl http://localhost:2375/containers/json[&#123;"Id":"30c8e35f1292421d11f6b09385a4fc980d6abaca591d0f52b18dbad8e4f5be04","Names":["/clever_murdock"],"Image":"portainer/portainer","ImageID":"sha256:a8f2aeb34cf69178be1d152759fb17ccff7915faf750c82cd7d1851b12ec7b37","Command":"/portainer","Created":1520845664,"Ports":[&#123;"IP":"0.0.0.0","PrivatePort":9000,"PublicPort":9000,"Type":"tcp"&#125;],"Labels":&#123;&#125;,"State":"running","Status":"Up 13 minutes","HostConfig":&#123;"NetworkMode":"default"&#125;,"NetworkSettings":&#123;"Networks":&#123;"bridge":&#123;"IPAMConfig":null,"Links":null,"Aliases":null,"NetworkID":"78fa057306e70838bab1e18359c86bd8eff7de2285c351784ad951cd7a73f8d1","EndpointID":"e99ca98169320155c8833a8746be7d0e1c8d98186c75fba9d9bf2486367a4e00","Gateway":"172.17.0.1","IPAddress":"172.17.0.2","IPPrefixLen":16,"IPv6Gateway":"","GlobalIPv6Address":"","GlobalIPv6PrefixLen":0,"MacAddress":"02:42:ac:11:00:02","DriverOpts":null&#125;&#125;&#125;,"Mounts":[&#123;"Type":"bind","Source":"/opt/portainer","Destination":"/data","Mode":"","RW":true,"Propagation":"rprivate"&#125;,&#123;"Type":"bind","Source":"/var/run/docker.sock","Destination":"/var/run/docker.sock","Mode":"","RW":true,"Propagation":"rprivate"&#125;]&#125;] ä¸å¯è¡Œçš„æ–¹æ³• åŒæ—¶åˆ—å‡ºåœ¨Ubuntuä¸Šä¸å¯è¡Œçš„æ–¹æ³• ä¿®æ”¹/etc/default/dockerä¸­çš„DOCKER_OPTS 1DOCKER_OPTS='-H fd:// -H tcp://0.0.0.0:2375' ä¿®æ”¹/etc/init/docker.confä¸­çš„DOCKER_OPTS ç½‘ä¸Šæœ‰äººè¯´åœ¨Ubuntu14.04ä¸Šå¯ä»¥ç”Ÿæ•ˆ 123# modify these in /etc/default/$UPSTART_JOB (/etc/default/docker) DOCKERD=/usr/bin/dockerd DOCKER_OPTS='-H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375']]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨hexoæ­å»ºè‡ªå·±çš„åšå®¢â€”â€”åˆ›å»ºç«™ç‚¹]]></title>
    <url>%2Fpost%2F80ca9385.html</url>
    <content type="text"><![CDATA[å®‰è£…åŠé…ç½® ç®€ä»‹ Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€ä»‹ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ï¼Œå¯ä»¥ä½¿ç”¨Markdownè§£æžæ–‡ç« å¹¶ç”Ÿæˆç½‘ç«™ è¯´æ˜Ž ç«™ç‚¹é…ç½®æ–‡ä»¶ $site_dir/_config.xml ä¸»é¢˜é…ç½®æ–‡ä»¶$site_dir/theme/$theme_dir/_config å®‰è£…hexo å½“çŽ¯å¢ƒå‡†å¤‡å¥½gitä»¥åŠnodejsåŽä¾¿å¯ä»¥å®‰è£…hexo 1npm install hexo-cli -g å»ºç«™ å®‰è£…HexoåŽï¼Œåˆ›å»ºç«™ç‚¹æ–‡ä»¶å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼Œå¦‚blogï¼Œç„¶åŽæ‰§è¡Œ 123$ hexo init blog$ cd blog$ npm install å®ŒæˆåŽï¼Œblogç›®å½•ç»“æž„ 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes é…ç½® ä¿®æ”¹_config.yml 123456title: your site tilesubtitle: description: descriptionauthor: your namelanguage: zh-Hanstimezone: Asia/Shanghai å¸¸ç”¨å‘½ä»¤ æ¸…é™¤ç¼“å­˜æ–‡ä»¶åŠå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ 1$ hexo clean å¯åŠ¨æœåŠ¡å™¨ 1$ hexo server é»˜è®¤çŠ¶å†µä¸‹ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨4000ç«¯å£ã€‚å¯ä»¥é€šè¿‡hexo server -p 80æ¥å°†serverç»‘å®šè‡³80ç«¯å£ éƒ¨ç½²ç½‘ç«™ å¯å°†ç½‘ç«™æŒ‰ç…§_config.ymlä¸­çš„é…ç½®ç›´æŽ¥éƒ¨ç½²äºŽgithubç­‰ï¼ˆåŽç»­çœ‹å¿ƒæƒ…å†™æ­¥éª¤ï¼‰ 1$ hexo deploy ä¸»é¢˜ä¿®æ”¹ å¯è®¿é—®hexoå®˜æ–¹ä¸»é¢˜åº“é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œå¹¶ä¸‹è½½è‡³themeç›®å½•ä¸‹ ä¿®æ”¹_config.xmlä¸­çš„themeå­—æ®µ 1theme: landscape å†™ä½œ æœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºæ–‡ç«  åˆ›å»ºæ–‡ç«  hexoå‘½ä»¤è¡Œæ–¹å¼ 1$ hexo new &lt;layout&gt; title layoutä¸ºæ¨¡ç‰ˆ å‘½ä»¤æ‰§è¡ŒåŽï¼Œé»˜è®¤æ–‡ç« å°†ä½äºŽsource/_post/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶å†…å®¹ä¸ºï¼š 12345---title: testdate: 2018-03-25 23:10:04tags:--- ç›´æŽ¥åˆ›å»ºæ–‡ä»¶ 12$ cd source/_post/$ touch myfirstblog.md æ­¤æ—¶æ–‡ä»¶å†…å®¹ä¸ºç©ºï¼Œéœ€è¦è‡ªå·±æ·»åŠ ç›¸å…³å†…å®¹ åˆ›å»ºæ ‡ç­¾é¡µ é…ç½®ç¡®è®¤ ç¡®è®¤ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹å†…å®¹ 1tag_dir: tags ç¡®è®¤ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­tagsæ‰“å¼€ 123menu: ä¸»é¡µ: / || home æ ‡ç­¾: /tags/ || tags åˆ›å»ºæ ‡ç­¾é¡µ 1$ hexo new page tags ä¿®æ”¹tags/index.mdä¸­çš„typeä¸º&quot;tags&quot; 12345---title: Tagclouddate: 2018-03-23 01:18:00type: "tags"--- åˆ›å»ºåˆ†ç±»é¡µé¢ ä¸Žåˆ›å»ºæ ‡ç­¾é¡µç›¸ä¼¼ ç¡®è®¤é…ç½® ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æœ‰category_dir: categories ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„åˆ†ç±»: /categories/ || thå¼€å¯ åˆ›å»ºåˆ†ç±»ä¹Ÿ 1$ hexo new page categories]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>blog</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockeråŸºæœ¬æ“ä½œï¼ˆä¸€ï¼‰]]></title>
    <url>%2Fpost%2F493f285a.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä½œä¸ºdockerä½¿ç”¨ç¬”è®°ä¾›å°ä¼™ä¼´ä»¬å‚è€ƒ å‡†å¤‡å·¥ä½œ å®‰è£…æœ€æ–°ç‰ˆçš„docker-ceï¼Œä¼šå°†è‡ªåŠ¨å‘½ä»¤è¡Œè¡¥é½å®‰è£…åœ¨/usr/share/bash-completion/completions/dockerç›®å½• ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œåœ¨ubuntuä¸Šæ‰“å¼€dockerå‘½ä»¤è¡Œè‡ªåŠ¨è¡¥é½åŠŸèƒ½ ç¼–è¾‘/etc/bash.bashrcæ–‡ä»¶ï¼ŒæŸ¥æ‰¾completionæ®µï¼Œå°†è¯¥æ®µå†…å®¹å‰çš„#åˆ é™¤å³å¯ 12345678# enable bash completion in interactive shellsif ! shopt -oq posix; then if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; then . /etc/bash_completion fifi imageæ“ä½œ build image 1$ docker build -t mytest:latest . æŸ¥çœ‹image 12345$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx &lt;none&gt; 73acd1f0cfad 8 days ago 109MBmongo 3 5b1317f8158f 8 days ago 366MB$ dockeer image ls åˆ é™¤image 12$ docker image rm &lt;id/name&gt;$ docker rmi &lt;id/name&gt; ä»Ždocker hubä¸ŠèŽ·å–image å›½å†…è®¿é—®docker hubè¾ƒæ…¢ï¼Œå¯ä½¿ç”¨é˜¿é‡Œäº‘çš„dockeré•œåƒæœåŠ¡ 1$ docker pull nginx continerç›¸å…³ åˆ›å»ºdocker 1$ docker run -d --name mytest -p 80:80 mynginx å¸¸ç”¨å‚æ•°è¯´æ˜Ž â€“rm å½“è¿è¡Œç»“æŸï¼ˆå½“CMDæˆ–entrypointæˆ–docker runå‘½ä»¤è¡ŒæŒ‡å®šçš„å‘½ä»¤è¿è¡Œç»“æŸæ—¶ï¼Œå®¹å™¨åœæ­¢ï¼‰æ—¶è‡ªåŠ¨åˆ é™¤docker -it é‡å®šå‘dockerç»ˆç«¯ -d åœ¨åŽå°æ‰§è¡Œ -e æ·»åŠ è¿è¡Œæ—¶çš„å‚æ•°ï¼Œå¸¸è¢«ç”¨äºŽdocker CMDæ‰§è¡Œæ—¶å¢žåŠ å‚æ•° dockeræ”¯æŒé•¿idå’ŒçŸ­idæ–¹å¼ç´¢å¼•ï¼Œäº¦å¯é€šè¿‡åç§°è¿›è¡Œç´¢å¼• stop/start/restartå®¹å™¨ é€šè¿‡docker stopå¯ä»¥åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨docker killæ¥å¿«é€Ÿåœæ­¢ä¸€ä¸ªå®¹å™¨ docker startä¼šä¿ç•™å®¹å™¨çš„ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶çš„æ‰€æœ‰å‚æ•° docker restartå¯ä»¥é‡å¯å®¹å™¨ å¯ä»¥åœ¨å¯åŠ¨å®¹å™¨æ—¶è®¾ç½®â€“restartæ¥è‡ªåŠ¨é‡å¯å®¹å™¨ åˆ é™¤å®¹å™¨ å¯ä»¥ä½¿ç”¨docker psåˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ å®¹å™¨åœæ­¢è¿è¡Œä¸ä»£è¡¨å®¹å™¨å·²ç»è¢«åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨docker ps -a ä½¿ç”¨docker rmæ¥åˆ é™¤ä¸€ä¸ªå®¹å™¨ ä½¿ç”¨docker rmiåˆ™ä¼šåˆ é™¤dockerçš„image æŸ¥çœ‹åŠæ“ä½œ æŸ¥çœ‹å®¹å™¨çŠ¶æ€ 123$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES30c8e35f1292 portainer/portainer "/portainer" 10 days ago Up 2 days 0.0.0.0:9000-&gt;9000/tcp clever_murdock ä½¿ç”¨docker ps -aæŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…å«ä¼‘çœ çŠ¶æ€ï¼‰ 1234$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES30c8e35f1292 portainer/portainer "/portainer" 10 days ago Up 2 days 0.0.0.0:9000-&gt;9000/tcp clever_murdockef58155f9957 registry:2 "/entrypoint.sh /etcâ€¦" 2 days ago Exited (137) 41 hours ago sltregistry è¿žæŽ¥åˆ°å®¹å™¨çš„ç»ˆç«¯ å°½é‡ä½¿ç”¨execæ–¹æ³•ï¼Œattachè¿žå…¥åŽå¯æŸ¥çœ‹å½“å‰å®¹å™¨å‘½ä»¤è¿è¡Œçš„æ—¥å¿—ï¼Œä½†ä¸å½“çš„æ“ä½œå®¹æ˜“ä½¿è¿è¡Œä¸­çš„å®¹å™¨é€€å‡º ä½¿ç”¨attach 1$ docker attach &lt;id/name&gt; ä½¿ç”¨exec 1$ docker exec -it &lt;id/name&gt; /bin/sh æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„æ—¥å¿— å®¹å™¨ä»¥-då‚æ•°è¿è¡Œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨docker logsæŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿— 123$ docker logs mytest_haproxy[WARNING] 079/100555 (1) : [haproxy.main()] Cannot raise FD limit to 200000011, limit is 1048576.[WARNING] 079/100555 (1) : [haproxy.main()] FD limit (1048576) too low for maxconn=100000000/maxsock=200000011. Please raise 'ulimit-n' to 200000011 or more to avoid any trouble.]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨æ ‘èŽ“æ´¾ä¸Šéƒ¨ç½²nodejs]]></title>
    <url>%2Fpost%2F4fa2931e.html</url>
    <content type="text"><![CDATA[ç»ˆäºŽæœ‰æ—¶é—´åœ¨æ ‘èŽ“æ´¾ä¸Šéƒ¨ç½²ä¸€ä¸ªè‡ªå·±çš„å°åšå®¢äº†ï¼Œå¹³æ—¶ç”¨æƒ¯äº†ubuntuï¼Œåˆ°äº†æ ‘èŽ“æ´¾ä¸Šï¼Œå‘çŽ°å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚é¦–å…ˆå°±æ˜¯apt install nodejsï¼Œå®‰è£…å®Œæ²¡æœ‰npmã€‚ä¸è¿‡ï¼Œç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œä¾¿æœ‰äº†çŽ°åœ¨çš„å°ç«™ç‚¹ å®‰è£…nodejs nodejså¯ä»¥ä½¿ç”¨æºç ç¼–è¯‘å’ŒäºŒè¿›åˆ¶åŒ…æ¥å®‰è£…ã€‚è€ƒè™‘åˆ°æ ‘èŽ“æ´¾çš„å¤„ç†èƒ½åŠ›ï¼Œè¦ç¼–è¯‘ä¸€ä¸ªnodejsï¼Œå¤ªè¿‡è€—æ—¶ã€‚ç›´æŽ¥é€‰ç”¨å®˜ç½‘æä¾›çš„äºŒè¿›åˆ¶åŒ…å®Œæˆå®‰è£… å®‰è£…åŒ…èŽ·å– å®˜ç½‘ä¸ŠARMçš„binåŒ…æœ‰3ä¸ªï¼Œåˆ†åˆ«æ˜¯v6ï¼Œv7å’Œv8ã€‚è€Œæ ‘èŽ“æ´¾çš„ç‰ˆæœ¬æ˜¯v7 12$ uname -aLinux raspberrypi 4.9.80-v7+ #1098 SMP Fri Mar 9 19:11:42 GMT 2018 armv7l GNU/Linux èŽ·å–å®‰è£…åŒ… 1$ wget https://nodejs.org/dist/v8.10.0/node-v8.10.0-linux-armv7l.tar.xz å®‰è£…nodejs è§£åŽ‹ç¼© 1234567$ tar -Jxv -f node-v8.10.0-linux-armv7l.tar.xznode-v8.10.0-linux-armv7l/node-v8.10.0-linux-armv7l/README.mdnode-v8.10.0-linux-armv7l/bin/node-v8.10.0-linux-armv7l/bin/nodenode-v8.10.0-linux-armv7l/bin/npm... å¯æ ¹æ®ä¸ªäººå–œå¥½é‡å‘½åæ–‡ä»¶å¤¹ï¼Œæ­¤å¤„é‡å‘½åä¸ºnodeï¼Œåˆ†åˆ«éªŒè¯ç‰ˆæœ¬ä¿¡æ¯ 1234pi@raspberrypi:~/node $ ./bin/node -vv8.10.0pi@raspberrypi:~/node $ ./bin/npm -v5.6.0 é…ç½®nodeå’Œnpmä¸ºå…¨å±€å‘½ä»¤ 12pi@raspberrypi:~/node $ sudo ln /home/pi/node/bin/node /usr/local/bin/nodepi@raspberrypi:~/node $ sudo ln -s /home/pi/node/lib/node_modules/npm/bin/npm /usr/local/bin/npm æ­¤æ—¶æ‰§è¡Œnpmä¼šæŠ¥é”™ 123456pi@raspberrypi:~/node $ npm -vmodule.js:471 throw err; ^Error: Cannot find module '/usr/local/bin/node_modules/npm/bin/npm-cli.js' éœ€è¦ä¿®æ”¹/usr/local/bin/ç›®å½•ä¸‹çš„npmæ–‡ä»¶ï¼Œå°†$basediræ›¿æ¢ä¸ºç»å¯¹è·¯å¾„ï¼Œæ­¤å¤„ä¸º/home/pi/node/ 12345678910111213141516171819202122232425262728293031323334#!/bin/sh(set -o igncr) 2&gt;/dev/null &amp;&amp; set -o igncr; # cygwin encoding fixbasedir=`dirname "$0"`case `uname` in *CYGWIN*) basedir=`cygpath -w "$basedir"`;;esacNODE_EXE="/home/pi/node/bin/node.exe"if ! [ -x "$NODE_EXE" ]; then NODE_EXE=nodefiNPM_CLI_JS="/home/pi/node/lib/node_modules/npm/bin/npm-cli.js"case `uname` in *MINGW*) NPM_PREFIX=`"$NODE_EXE" "$NPM_CLI_JS" prefix -g` NPM_PREFIX_NPM_CLI_JS="$NPM_PREFIX/node_modules/npm/bin/npm-cli.js" if [ -f "$NPM_PREFIX_NPM_CLI_JS" ]; then NPM_CLI_JS="$NPM_PREFIX_NPM_CLI_JS" fi ;; *CYGWIN*) NPM_PREFIX=`"$NODE_EXE" "$NPM_CLI_JS" prefix -g` NPM_PREFIX_NPM_CLI_JS="$NPM_PREFIX/node_modules/npm/bin/npm-cli.js" if [ -f "$NPM_PREFIX_NPM_CLI_JS" ]; then NPM_CLI_JS="$NPM_PREFIX_NPM_CLI_JS" fi ;;esac"$NODE_EXE" "$NPM_CLI_JS" "$@" å†æ¬¡éªŒè¯ï¼Œnpmå·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œ]]></content>
      <categories>
        <category>æ ‘èŽ“æ´¾</category>
      </categories>
      <tags>
        <tag>æ ‘èŽ“æ´¾</tag>
        <tag>nodejs</tag>
        <tag>pi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fpost%2F4a17b156.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
